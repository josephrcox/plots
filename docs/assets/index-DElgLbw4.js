var cd=Object.defineProperty;var dd=(t,e,n)=>e in t?cd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var cn=(t,e,n)=>(dd(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function md(t){const e=pako.gzip(JSON.stringify(t));return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function pd(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=atob(e),o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);const i=pako.ungzip(o,{to:"string"});return JSON.parse(i)}async function hd(){let t=localStorage.getItem("plots_active_game_db");const e=await md(t);console.log("http://localhost:5173/plots/?shareId="+e)}const ur=window.location.search.substring(1).split("&").reduce((t,e)=>{const[n,o]=e.split("=");return t[n]=o,t},{});if(ur.shareId!=null||ur.shareId!=null){console.log("DECRYPING FROM shareId");const t=JSON.parse(pd(ur.shareId));let e=localStorage.getItem("plots_active_game_db");(e==""||e==null)&&localStorage.setItem("plots_active_game_db",JSON.stringify(t))}else console.log("COMPRESSING GAME TO SHARE"),hd();function Ce(){}const Ji=t=>t;function Z(t,e){for(const n in e)t[n]=e[n];return t}function kf(t){return t()}function Ll(){return Object.create(null)}function Ye(t){t.forEach(kf)}function Ft(t){return typeof t=="function"}function de(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _d(t){return Object.keys(t).length===0}function rl(t,...e){if(t==null){for(const o of e)o(void 0);return Ce}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Cf(t){let e;return rl(t,n=>e=n)(),e}function le(t,e,n){t.$$.on_destroy.push(rl(e,n))}function he(t,e,n,o){if(t){const i=Tf(t,e,n,o);return t[0](i)}}function Tf(t,e,n,o){return t[1]&&o?Z(n.ctx.slice(),t[1](o(e))):n.ctx}function _e(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],l=Math.max(e.dirty.length,i.length);for(let a=0;a<l;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function ge(t,e,n,o,i,r){if(i){const l=Tf(e,n,o,r);t.p(l,i)}}function be(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function je(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ue(t,e){const n={};e=new Set(e);for(const o in t)!e.has(o)&&o[0]!=="$"&&(n[o]=t[o]);return n}function Te(t,e,n){return t.set(n),e}function Ve(t){return t&&Ft(t.destroy)?t.destroy:Ce}const Sf=typeof window<"u";let ll=Sf?()=>window.performance.now():()=>Date.now(),sl=Sf?t=>requestAnimationFrame(t):Ce;const Zn=new Set;function Af(t){Zn.forEach(e=>{e.c(t)||(Zn.delete(e),e.f())}),Zn.size!==0&&sl(Af)}function al(t){let e;return Zn.size===0&&sl(Af),{promise:new Promise(n=>{Zn.add(e={c:t,f:n})}),abort(){Zn.delete(e)}}}const gd=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function y(t,e){t.appendChild(e)}function If(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function bd(t){const e=P("style");return e.textContent="/* empty */",yd(If(t),e),e.sheet}function yd(t,e){return y(t.head||t,e),e.sheet}function O(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function Zi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return document.createTextNode(t)}function B(){return G(" ")}function Fe(){return G("")}function te(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function vd(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const wd=["width","height"];function fe(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)e[o]==null?t.removeAttribute(o):o==="style"?t.style.cssText=e[o]:o==="__value"?t.value=t[o]=e[o]:n[o]&&n[o].set&&wd.indexOf(o)===-1?t[o]=e[o]:$(t,o,e[o])}function wi(t,e){for(const n in e)$(t,n,e[n])}function kd(t,e){Object.keys(e).forEach(n=>{Cd(t,n,e[n])})}function Cd(t,e,n){const o=e.toLowerCase();o in t?t[o]=typeof t[o]=="boolean"&&n===""?!0:n:e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:$(t,e,n)}function bn(t){return/-/.test(t)?kd:fe}function Td(t){return Array.from(t.childNodes)}function ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function ki(t,e){t.value=e??""}function tt(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Dl(t,e,n){for(let o=0;o<t.options.length;o+=1){const i=t.options[o];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}function bt(t,e,n){t.classList.toggle(e,!!n)}function Mf(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}class Qt{constructor(e=!1){cn(this,"is_svg",!1);cn(this,"e");cn(this,"n");cn(this,"t");cn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=Zi(n.nodeName):this.e=P(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)O(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}}const Ci=new Map;let Ti=0;function Sd(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ad(t,e){const n={stylesheet:bd(e),rules:{}};return Ci.set(t,n),n}function Si(t,e,n,o,i,r,l,a=0){const s=16.666/o;let u=`{
`;for(let p=0;p<=1;p+=s){const w=e+(n-e)*r(p);u+=p*100+`%{${l(w,1-w)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Sd(f)}_${a}`,d=If(t),{stylesheet:m,rules:h}=Ci.get(d)||Ad(d,t);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${f}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${c} ${o}ms linear ${i}ms 1 both`,Ti+=1,c}function Ai(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=n.length-o.length;i&&(t.style.animation=o.join(", "),Ti-=i,Ti||Id())}function Id(){sl(()=>{Ti||(Ci.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&M(e)}),Ci.clear())})}let Wo;function jo(t){Wo=t}function Jo(){if(!Wo)throw new Error("Function called outside component initialization");return Wo}function Zo(t){Jo().$$.on_mount.push(t)}function Of(t){Jo().$$.on_destroy.push(t)}function Md(){const t=Jo();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=Mf(e,n,{cancelable:o});return i.slice().forEach(l=>{l.call(t,r)}),!r.defaultPrevented}return!0}}function Qi(t,e){return Jo().$$.context.set(t,e),e}function zi(t){return Jo().$$.context.get(t)}function re(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const Kn=[],Re=[];let Qn=[];const Nr=[],Pf=Promise.resolve();let Er=!1;function Nf(){Er||(Er=!0,Pf.then(Ef))}function ul(){return Nf(),Pf}function it(t){Qn.push(t)}function xt(t){Nr.push(t)}const fr=new Set;let Wn=0;function Ef(){if(Wn!==0)return;const t=Wo;do{try{for(;Wn<Kn.length;){const e=Kn[Wn];Wn++,jo(e),Od(e.$$)}}catch(e){throw Kn.length=0,Wn=0,e}for(jo(null),Kn.length=0,Wn=0;Re.length;)Re.pop()();for(let e=0;e<Qn.length;e+=1){const n=Qn[e];fr.has(n)||(fr.add(n),n())}Qn.length=0}while(Kn.length);for(;Nr.length;)Nr.pop()();Er=!1,fr.clear(),jo(t)}function Od(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}function Pd(t){const e=[],n=[];Qn.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),Qn=e}let To;function fl(){return To||(To=Promise.resolve(),To.then(()=>{To=null})),To}function On(t,e,n){t.dispatchEvent(Mf(`${e?"intro":"outro"}${n}`))}const pi=new Set;let qt;function Ie(){qt={r:0,c:[],p:qt}}function Me(){qt.r||Ye(qt.c),qt=qt.p}function k(t,e){t&&t.i&&(pi.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(pi.has(t))return;pi.add(t),qt.c.push(()=>{pi.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const cl={duration:0};function Yt(t,e,n){const o={direction:"in"};let i=e(t,n,o),r=!1,l,a,s=0;function u(){l&&Ai(t,l)}function f(){const{delay:d=0,duration:m=300,easing:h=Ji,tick:g=Ce,css:p}=i||cl;p&&(l=Si(t,0,1,m,d,h,p,s++)),g(0,1);const w=ll()+d,v=w+m;a&&a.abort(),r=!0,it(()=>On(t,!0,"start")),a=al(A=>{if(r){if(A>=v)return g(1,0),On(t,!0,"end"),u(),r=!1;if(A>=w){const R=h((A-w)/m);g(R,1-R)}}return r})}let c=!1;return{start(){c||(c=!0,Ai(t),Ft(i)?(i=i(o),fl().then(f)):f())},invalidate(){c=!1},end(){r&&(u(),r=!1)}}}function Ut(t,e,n){const o={direction:"out"};let i=e(t,n,o),r=!0,l;const a=qt;a.r+=1;let s;function u(){const{delay:f=0,duration:c=300,easing:d=Ji,tick:m=Ce,css:h}=i||cl;h&&(l=Si(t,1,0,c,f,d,h));const g=ll()+f,p=g+c;it(()=>On(t,!1,"start")),"inert"in t&&(s=t.inert,t.inert=!0),al(w=>{if(r){if(w>=p)return m(0,1),On(t,!1,"end"),--a.r||Ye(a.c),!1;if(w>=g){const v=d((w-g)/c);m(1-v,v)}}return r})}return Ft(i)?fl().then(()=>{i=i(o),u()}):u(),{end(f){f&&"inert"in t&&(t.inert=s),f&&i.tick&&i.tick(1,0),r&&(l&&Ai(t,l),r=!1)}}}function vt(t,e,n,o){let r=e(t,n,{direction:"both"}),l=o?0:1,a=null,s=null,u=null,f;function c(){u&&Ai(t,u)}function d(h,g){const p=h.b-l;return g*=Math.abs(p),{a:l,b:h.b,d:p,duration:g,start:h.start,end:h.start+g,group:h.group}}function m(h){const{delay:g=0,duration:p=300,easing:w=Ji,tick:v=Ce,css:A}=r||cl,R={start:ll()+g,b:h};h||(R.group=qt,qt.r+=1),"inert"in t&&(h?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=R:(A&&(c(),u=Si(t,l,h,p,g,w,A)),h&&v(0,1),a=d(R,p),it(()=>On(t,h,"start")),al(q=>{if(s&&q>s.start&&(a=d(s,p),s=null,On(t,a.b,"start"),A&&(c(),u=Si(t,l,a.b,a.duration,0,w,r.css))),a){if(q>=a.end)v(l=a.b,1-l),On(t,a.b,"end"),s||(a.b?c():--a.group.r||Ye(a.group.c)),a=null;else if(q>=a.start){const F=q-a.start;l=a.a+a.d*w(F/a.duration),v(l,1-l)}}return!!(a||s)}))}return{run(h){Ft(r)?fl().then(()=>{r=r({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),a=s=null}}}function Ke(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Nd(t,e){S(t,1,1,()=>{e.delete(t.key)})}function Ed(t,e,n,o,i,r,l,a,s,u,f,c){let d=t.length,m=r.length,h=d;const g={};for(;h--;)g[t[h].key]=h;const p=[],w=new Map,v=new Map,A=[];for(h=m;h--;){const E=c(i,r,h),I=n(E);let N=l.get(I);N?A.push(()=>N.p(E,e)):(N=u(I,E),N.c()),w.set(I,p[h]=N),I in g&&v.set(I,Math.abs(h-g[I]))}const R=new Set,q=new Set;function F(E){k(E,1),E.m(a,f),l.set(E.key,E),f=E.first,m--}for(;d&&m;){const E=p[m-1],I=t[d-1],N=E.key,j=I.key;E===I?(f=E.first,d--,m--):w.has(j)?!l.has(N)||R.has(N)?F(E):q.has(j)?d--:v.get(N)>v.get(j)?(q.add(N),F(E)):(R.add(j),d--):(s(I,l),d--)}for(;d--;){const E=t[d];w.has(E.key)||s(E,l)}for(;m;)F(p[m-1]);return Ye(A),p}function ve(t,e){const n={},o={},i={$$scope:1};let r=t.length;for(;r--;){const l=t[r],a=e[r];if(a){for(const s in l)s in a||(o[s]=1);for(const s in a)i[s]||(n[s]=a[s],i[s]=1);t[r]=a}else for(const s in l)i[s]=1}for(const l in o)l in n||(n[l]=void 0);return n}function at(t){return typeof t=="object"&&t!==null?t:{}}function Kt(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Y(t){t&&t.c()}function V(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),it(()=>{const r=t.$$.on_mount.map(kf).filter(Ft);t.$$.on_destroy?t.$$.on_destroy.push(...r):Ye(r),t.$$.on_mount=[]}),i.forEach(it)}function x(t,e){const n=t.$$;n.fragment!==null&&(Pd(n.after_update),Ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $d(t,e){t.$$.dirty[0]===-1&&(Kn.push(t),Nf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,n,o,i,r,l=null,a=[-1]){const s=Wo;jo(t);const u=t.$$={fragment:null,ctx:[],props:r,update:Ce,not_equal:i,bound:Ll(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Ll(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&i(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&$d(t,c)),d}):[],u.update(),f=!0,Ye(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const c=Td(e.target);u.fragment&&u.fragment.l(c),c.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&k(t.$$.fragment),V(t,e.target,e.anchor),Ef()}jo(s)}class pe{constructor(){cn(this,"$$");cn(this,"$$set")}$destroy(){x(this,1),this.$destroy=Ce}$on(e,n){if(!Ft(n))return Ce;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!_d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rd="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rd);const Vn=[];function Pn(t,e){return{subscribe:Xe(t,e).subscribe}}function Xe(t,e=Ce){let n;const o=new Set;function i(a){if(de(t,a)&&(t=a,n)){const s=!Vn.length;for(const u of o)u[1](),Vn.push(u,t);if(s){for(let u=0;u<Vn.length;u+=2)Vn[u][0](Vn[u+1]);Vn.length=0}}}function r(a){i(a(t))}function l(a,s=Ce){const u=[a,s];return o.add(u),o.size===1&&(n=e(i,r)||Ce),a(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:l}}function rn(t,e,n){const o=!Array.isArray(t),i=o?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Pn(n,(l,a)=>{let s=!1;const u=[];let f=0,c=Ce;const d=()=>{if(f)return;c();const h=e(o?u[0]:u,l,a);r?l(h):c=Ft(h)?h:Ce},m=i.map((h,g)=>rl(h,p=>{u[g]=p,f&=~(1<<g),s&&d()},()=>{f|=1<<g}));return s=!0,d(),function(){Ye(m),c(),s=!1}})}function Fl(t){return{subscribe:t.subscribe.bind(t)}}const $f={plots:[],timeSpent:0,lastChangeDay:0,townLog:[],currentTutorialStep:0,gameSettings:[],resource_capacity:1e3,townInfo:{name:"Your town",gold:150,population_count:0,population_max:0,employees:0,guardians:0,happiness:150,health:150,recreation:0,community:150,knowledge_points:0,productivity:100},kingdom_expansions:0,resources:{food:150,wood:750,stone:750,metal:5,power:0,bureaucracy:0},resource_rate:{food:0,wood:0,stone:0,metal:0,bureaucracy:0,knowledge:0},hasCityHall:!1,hasBank:!1,hasHospital:!1,hasLab:!1,modifiers:{happiness:1,health:1,community:1},economyAndLaws:{tax_rate:.1,max_tax_rate:1,weeklyProfit:0,knowledge_gold_market_rates:[],enacted:[]},plotCounts:[],environment:{day:0,year:1},maximums:{health:300,happiness:300,community:300},difficulty:0,endGoal:"land",endGameDetails:{msg:"",win:!1,still_playing:!0},tick:0,overtime:!1,last_warning_happiness:0,last_warning_health:0,lab:{active_experiment:null,past_experiments:[],xp:0},liege_location:null},Ld={username:"",stats:{games_played:0,wins:0,losses:0},achievements:[]};var ot=(t=>(t[t.GOOD=0]="GOOD",t[t.BAD=1]="BAD",t[t.NORMAL=2]="NORMAL",t))(ot||{}),Rf=(t=>(t.START_GAME="start_game",t.BUILD_PLOT="build_plot",t))(Rf||{});const Lf={0:"Easy",1:"Normal",2:"Hard"},Dd={0:Math.random()*(.5-.3)+.3,1:Math.random()*(.4-.2)+.2,2:Math.random()*(.4-.2)+.2},ie=[{id:"small_homes",emoji:"🏠",title:"Homes",type:"residential",description:"+16 people",revenue_per_week:0,requirements:{gold:150,plots:[],employees:0,knowledge:0,size:1,xp:0,resources:{food:0,wood:50,stone:10,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:16,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,knowledge_points_per_month:0,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:2,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"Listen to the townspeople.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"large_homes",emoji:"🏡",title:"Large Homes",type:"residential",description:"+32 people",revenue_per_week:0,requirements:{gold:1800,plots:[],employees:0,knowledge:0,size:1,xp:0,resources:{food:0,wood:350,stone:100,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.01,health:1,community:1},immediate_variable_changes:{happiness:10,health:0,population:32,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,knowledge_points_per_month:0,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:40,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"Listen to the townspeople.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"farm",emoji:"🥕",title:"Farm",type:"farm",description:"Produces veggies, grains, fruit",revenue_per_week:6,requirements:{gold:80,plots:[],employees:4,knowledge:0,size:1,xp:0,resources:{food:0,wood:10,stone:10,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.03,health:1.03,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:5,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},check_for_variety:!1,liege_on_plot_hint:"Your presence on the farm is encouraging the farmers to work harder!",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"tree_farm",emoji:"🌲",title:"Tree Farm",type:"lumber",description:"Produces some wood",revenue_per_week:8,requirements:{gold:300,plots:[],employees:4,knowledge:0,size:1,xp:0,resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},check_for_variety:!0,styling:"",affordable:null,selected:null,knowledge_points_per_month:0,generated_resources:{food:0,wood:10,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"Your presence on the farm is encouraging the farmers to work harder!",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"quarry",emoji:"⛏️",title:"Quarry",type:"quarry",description:"Produces stone, small amounts of metal. Isn't great for health. ",revenue_per_week:0,requirements:{gold:800,plots:[],employees:6,knowledge:0,size:1,xp:0,resources:{food:0,wood:50,stone:0,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:.98,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,knowledge_points_per_month:0,generated_resources:{food:0,wood:0,stone:18,metal:1,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"The workers at the quarry are working harder with the presence of their liege.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"Apothecary",emoji:"🌿",title:"Apothecary",type:"medical",description:"Produces medicine from herbs and plants found in the forest. Increases health overall for a short bit. Fine until you can build a Healing House.",revenue_per_week:0,requirements:{gold:600,plots:[],employees:2,knowledge:0,size:1,xp:0,resources:{food:0,wood:250,stone:250,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.01,health:1.06,community:1},immediate_variable_changes:{happiness:25,health:70,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,knowledge_points_per_month:0,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"livestock_farm",emoji:"🐄",title:"Livestock",type:"farm",description:"Makes more money and food than a regular farm, but doesn't bonus from water.",revenue_per_week:60,requirements:{gold:600,plots:[],employees:8,knowledge:0,size:1,xp:0,resources:{food:0,wood:20,stone:20,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.1,health:1.05,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:14,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},check_for_variety:!1,liege_on_plot_hint:"The cows are producing more milk and cheese when you are hanging out on the farm.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"stockpile",emoji:"📦",title:"Stockpile",type:"stockpile",description:"Enables you to store more resources. Costs gold weekly.",revenue_per_week:0,requirements:{gold:600,plots:[],employees:2,knowledge:0,size:1,xp:0,resources:{food:0,wood:220,stone:60,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:15,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},check_for_variety:!1,liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"adv_stockpile",emoji:"📦📦",title:"Adv. Stockpile",type:"stockpile",description:"Stores more than a normal Stockpile. Costs more to build & operate.",revenue_per_week:0,requirements:{gold:3e3,plots:[],employees:4,knowledge:0,size:1,xp:0,resources:{food:0,wood:2e3,stone:2e3,metal:200,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:4,active_costs:{gold:100,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},check_for_variety:!1,liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"bakery",emoji:"🥖",title:"Bakery",type:"business",description:"Converts food into some extra cash. Make sure you have enough food.",revenue_per_week:80,requirements:{gold:1800,plots:[],employees:3,knowledge:0,size:1,xp:0,resources:{food:0,wood:300,stone:300,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.11,health:.95,community:1},immediate_variable_changes:{happiness:25,health:0,population:0,community:0,bureaucracy:0},check_for_variety:!0,knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:15},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"stables",emoji:"🐴",title:"Stables",type:"recreation",description:"Improves the health of the town and provides recreation.",revenue_per_week:24,requirements:{gold:1700,plots:[],employees:2,knowledge:0,size:1,xp:0,resources:{food:0,wood:280,stone:0,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.2,health:1.2,community:1},immediate_variable_changes:{happiness:5,health:10,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"church",emoji:"⛪️",title:"Church",type:"recreation",description:"Makes people VERY happy for a short period.",revenue_per_week:0,requirements:{gold:900,plots:[],employees:1,knowledge:0,size:1,xp:0,resources:{food:0,wood:1250,stone:0,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:2,health:1,community:1.3},immediate_variable_changes:{happiness:25,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"pub",emoji:"🍻",title:"Pub",type:"recreation",description:"Generates knowledge, happiness, community. Isn't great for health.",revenue_per_week:100,knowledge_points_per_month:1,requirements:{gold:2e3,plots:[],employees:12,knowledge:0,size:1,xp:0,resources:{food:0,wood:1200,stone:250,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.2,health:.97,community:1.1},immediate_variable_changes:{happiness:10,health:-15,population:0,community:0,bureaucracy:0},check_for_variety:!0,styling:"",affordable:null,selected:null,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1.05}},{id:"village_market",emoji:"🛒",title:"Market",type:"shop",description:"Turns food into money. Sells goods and employs many. Makes significantly more money from tourism if you have a Village Inn.",revenue_per_week:150,requirements:{gold:6e3,plots:[],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:1600,stone:600,metal:5,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.05,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:15,wood:35,stone:0,metal:0,bureaucracy:0,food:35},liege_on_plot_hint:"Your presence is helping the market make more money.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"fishery",emoji:"🐠",title:"Fishery",type:"business",description:"Requires metal but generates a lot of food. Must be near water.",revenue_per_week:35,requirements:{gold:3500,plots:[],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:2500,stone:0,metal:100,power:0,bureaucracy:0},adjacent_plots:["water"]},purchase_effect_modifiers:{happiness:1.05,health:1,community:1},immediate_variable_changes:{happiness:15,health:8,population:0,community:0,bureaucracy:0},check_for_variety:!0,knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:130,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"Your expertise in fishing is helping the town reel in far more fish!",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"vineyard",emoji:"🍇",title:"Vineyard",type:"recreation",description:"Makes fair money, lowers health. Generates knowledge too similar to a pub.",revenue_per_week:60,requirements:{gold:1800,plots:[],employees:12,knowledge:0,size:1,xp:0,resources:{food:0,wood:1200,stone:0,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.2,health:.9,community:1},immediate_variable_changes:{happiness:0,health:-10,population:0,community:0,bureaucracy:0},knowledge_points_per_month:3,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"water_wheel",emoji:"💧",title:"Water Wheel",type:"industrial",description:"Produces small amount of power",revenue_per_week:0,requirements:{gold:1600,plots:[],employees:15,knowledge:0,size:1,xp:0,resources:{food:0,wood:2e3,stone:25,metal:0,power:0,bureaucracy:0},adjacent_plots:["water"]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:35,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"You are trying to improve the efficiency of the water wheel, but you aren't making a difference.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"adv_water_wheel",emoji:"💧💧",title:"Adv. Water Wheel",type:"industrial",description:"Produces a large amount of power",revenue_per_week:0,requirements:{gold:3e3,plots:["blacksmith"],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:1200,stone:150,metal:500,power:0,bureaucracy:0},adjacent_plots:["water"]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:250,bureaucracy:0},level:4,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"You are trying to improve the efficiency of the water wheel, but you aren't making a difference.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"adv_farm",emoji:"🌾",title:"Adv. Farm",type:"farm",description:"Uses knowledge and technology to produce more food, with only 1 employee.",revenue_per_week:60,requirements:{gold:750,plots:[],employees:1,knowledge:0,size:1,xp:0,resources:{food:0,wood:0,stone:0,metal:300,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:15,health:15,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:180,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:100,wood:0,stone:0,metal:3,bureaucracy:0,food:0},check_for_variety:!1,liege_on_plot_hint:"Your presence on the farm is encouraging the farmer to work harder!",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"park",emoji:"🎪",title:"Park",type:"recreation",description:"Makes people extremely happy & healthy for a period. Improves community.",revenue_per_week:0,requirements:{gold:600,plots:[],employees:3,knowledge:0,size:1,xp:0,resources:{food:0,wood:100,stone:100,metal:10,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.5,health:1.5,community:1.3},immediate_variable_changes:{happiness:40,health:40,population:0,community:40,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:1,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"village_inn",emoji:"🛌",title:"Village Inn",type:"tourism",description:"Each inn brings more visitors to your town, increasing profits for the Market and other stores.",revenue_per_week:40,requirements:{gold:5500,plots:[],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:3e3,stone:100,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1.02},immediate_variable_changes:{happiness:10,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:20,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"schoolhouse",emoji:"🏫",title:"Schoolhouse",type:"education",description:"Produces knowledge, costs money to run.",revenue_per_week:0,knowledge_points_per_month:75,requirements:{gold:15e3,plots:["library"],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:3e3,stone:600,metal:100,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.1,health:1.1,community:1.2},immediate_variable_changes:{happiness:15,health:3,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:50,power:20,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:"The children seem to be learning worse when you are around, maybe you are a distraction from the teachers.",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"blacksmith",emoji:"⚒️",title:"Blacksmith",type:"business",description:"Converts metal into tools for money. Make sure you have enough metal!",revenue_per_week:300,requirements:{gold:12500,plots:[],employees:24,knowledge:0,size:1,xp:0,resources:{food:0,wood:250,stone:4e3,metal:500,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:.95},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:3,active_costs:{gold:0,power:30,wood:0,stone:0,metal:5,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"library",emoji:"📕",title:"Library",type:"recreation",description:"Produces knowledge and happiness",revenue_per_week:0,knowledge_points_per_month:10,requirements:{gold:2e3,plots:["village_market"],employees:6,knowledge:0,size:1,xp:0,resources:{food:0,wood:2025,stone:500,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.3,health:1,community:1.1},immediate_variable_changes:{happiness:15,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:2,active_costs:{gold:0,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"lumber_mill",emoji:"🏭",title:"Lumber Mill",type:"industrial",description:"Increases wood production by 50%, has to be next to a tree farm, but increases production at all.",revenue_per_week:0,requirements:{gold:12e3,plots:[],employees:12,knowledge:0,size:1,xp:0,resources:{food:0,wood:100,stone:100,metal:300,power:0,bureaucracy:0},adjacent_plots:["tree_farm"]},purchase_effect_modifiers:{happiness:1.2,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:50,stone:0,metal:0,power:0,bureaucracy:0},level:4,active_costs:{gold:0,power:40,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:.96}},{id:"solar_farm",emoji:"☀️",title:"Solar farm",type:"industrial",description:"Produces a lot of power without the need of water. Requires a lot of metal every week.",revenue_per_week:0,requirements:{gold:3e4,plots:["blacksmith","library"],employees:4,knowledge:0,size:1,xp:0,resources:{food:0,wood:0,stone:0,metal:500,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:750,bureaucracy:0},level:4,active_costs:{gold:0,power:0,wood:0,stone:0,metal:25,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"general_store",emoji:"🛒",title:"General Store",type:"shop",description:"Makes the most money of any plot, requires power. Makes significantly more from tourism if you have a Village Inn.",revenue_per_week:750,requirements:{gold:27500,plots:[],employees:32,knowledge:0,size:1,xp:0,resources:{food:0,wood:3e4,stone:5e3,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:2,health:2,community:1.1},immediate_variable_changes:{happiness:50,health:50,population:0,community:50,bureaucracy:0},check_for_variety:!0,knowledge_points_per_month:0,styling:"",affordable:null,selected:null,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:4,active_costs:{gold:0,power:160,wood:0,stone:0,metal:0,bureaucracy:0,food:100},liege_on_plot_hint:"Your experience managing towns is increasing the profits at the general store!",weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"healing_house",emoji:"🏥",title:"Healing House",type:"medical",description:"Treats the sick and continuously improves health.",revenue_per_week:0,knowledge_points_per_month:0,requirements:{gold:3e4,plots:["mine"],employees:16,knowledge:0,size:1,xp:0,resources:{food:0,wood:1e3,stone:2e3,metal:500,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.25,health:1.5,community:1.1},immediate_variable_changes:{happiness:5,health:75,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:4,active_costs:{gold:0,power:30,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"community_center",emoji:"🫶",title:"Community Center",type:"recreation",description:"Improves community, makes people happier, costs money",revenue_per_week:0,requirements:{gold:16e3,plots:[],employees:12,knowledge:0,size:1,xp:0,resources:{food:0,wood:7500,stone:700,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1.09,health:1,community:2},immediate_variable_changes:{happiness:50,health:15,population:0,community:0,bureaucracy:0},knowledge_points_per_month:0,styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:4,active_costs:{gold:0,power:10,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1.05}},{id:"city_hall",emoji:"🗳️",title:"City Hall",type:"federal",description:"Generates bureaucracy that can be used to pass laws to impact the city and expand. Costs a LOT of gold every week.",revenue_per_week:0,knowledge_points_per_month:0,requirements:{gold:125e3,plots:[],employees:32,knowledge:1e4,size:1,xp:0,resources:{food:0,wood:3250,stone:2e3,metal:200,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1.3},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:10},level:5,active_costs:{gold:600,power:20,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"mine",emoji:"⛏️",title:"Mine",type:"mine",description:"Produces a significant amount of metal and stone.",revenue_per_week:0,requirements:{gold:3e4,plots:["blacksmith"],employees:48,knowledge:0,size:1,xp:0,resources:{food:0,wood:0,stone:0,metal:110,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:.95,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,knowledge_points_per_month:0,generated_resources:{food:0,wood:0,stone:10,metal:60,power:0,bureaucracy:0},level:4,active_costs:{gold:0,power:80,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:.95}},{id:"academy",emoji:"🏫",title:"Academy",type:"education",description:"Produces a lot of knowledge, more than a schoolhouse or library. But freakishly expensive.",revenue_per_week:0,knowledge_points_per_month:400,requirements:{gold:99e3,plots:["lumber_mill","schoolhouse"],employees:24,knowledge:3e3,size:1,xp:0,resources:{food:0,wood:3e3,stone:1600,metal:0,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:1,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:5,active_costs:{gold:300,power:0,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"bank",emoji:"🏦",title:"Bank",type:"bank",description:"Enables the conversion of knowledge to gold, and increases maximum tax rate so you can make more money.",revenue_per_week:0,knowledge_points_per_month:0,requirements:{gold:1e5,plots:["academy"],employees:32,knowledge:25e3,size:1,xp:0,resources:{food:0,wood:1e3,stone:1e4,metal:1e3,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:.8,health:1,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:5,active_costs:{gold:0,power:100,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}},{id:"lab",emoji:"🧪",title:"Laboratory",type:"science",description:"Designs things to help the city grow",revenue_per_week:0,knowledge_points_per_month:300,requirements:{gold:1e5,plots:["academy"],employees:48,knowledge:15e3,size:1,xp:0,resources:{food:0,wood:0,stone:1e4,metal:5e3,power:0,bureaucracy:0},adjacent_plots:[]},purchase_effect_modifiers:{happiness:.98,health:.99,community:1},immediate_variable_changes:{happiness:0,health:0,population:0,community:0,bureaucracy:0},styling:"",affordable:null,selected:null,check_for_variety:!1,generated_resources:{food:0,wood:0,stone:0,metal:0,power:0,bureaucracy:0},level:5,active_costs:{gold:0,power:700,wood:0,stone:0,metal:0,bureaucracy:0,food:0},liege_on_plot_hint:null,weekly_effect_modifiers:{happiness:1,health:1,community:1}}],So={empty_unusable:"rgba(255,255,255,0.50)",empty_buildable:"rgba(239,234,90,1.0)",residential:"rgba(222,118,51,1.0)",farm:"rgba(107,143,73,1.0)",lumber:"rgba(145,116,44,1.0)",business:"rgba(146,115,165,1.0)",recreation:"rgba(82,119,177,1.0)",shop:"rgba(82,119,177,1.0)",tourism:"rgba(216,150,216,1.0)",education:"rgba(153,151,223,1.0)",medical:"rgba(74,91,163,1.0)",bank:"rgba(132,119,190,1.0)",federal:"rgba(132,119,190,1.0)",science:"rgba(74,91,163,1.0)",mine:"rgba(217,135,74,1.0)",quarry:"rgba(134,134,133,1.0)",industrial:"rgba(22, 80, 135,0.8)",stockpile:"rgba(134,134,133,1.0)"};function $r(t,e=!1,n=22){if(t<0)return t==-1?e?So.empty_buildable:So.empty_unusable:t==-2?So.recreation:So.empty_unusable;const o=ie[t];return jd(So[o.type],n)}const Fd={lab:1,city_hall:1,bank:1,community_center:1,inn:1},jd=(t,e=20)=>{const n=(l,a,s)=>{l/=255,a/=255,s/=255;const u=Math.max(l,a,s),f=Math.min(l,a,s);let c=0,d=0,m=(u+f)/2;if(u!==f){const h=u-f;switch(d=m>.5?h/(2-u-f):h/(u+f),u){case l:c=(a-s)/h+(a<s?6:0);break;case a:c=(s-l)/h+2;break;case s:c=(l-a)/h+4;break}c/=6}return[c*360,d,m]},o=(l,a,s,u)=>{const f=Math.min(1,s+u/100);return`hsl(${l}, ${(a*100).toFixed(1)}%, ${(f*100).toFixed(1)}%)`},i=l=>{const a=l.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return a?[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]:null};let r=null;if(t.startsWith("#")){const l=t.replace("#",""),a=parseInt(l,16);r=[a>>16&255,a>>8&255,a&255]}else(t.startsWith("rgba")||t.startsWith("rgb"))&&(r=i(t));if(r){const[l,a,s]=n(r[0],r[1],r[2]);return o(l,a,s,e)}throw new Error("Invalid color format")};function Df(t){var e,n,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Df(t[e]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n);return o}function qd(){for(var t,e,n=0,o="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Df(t))&&(o&&(o+=" "),o+=e);return o}const dl="-";function Bd(t){const e=Gd(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=t;function i(l){const a=l.split(dl);return a[0]===""&&a.length!==1&&a.shift(),Ff(a,e)||Hd(l)}function r(l,a){const s=n[l]||[];return a&&o[l]?[...s,...o[l]]:s}return{getClassGroupId:i,getConflictingClassGroupIds:r}}function Ff(t,e){var l;if(t.length===0)return e.classGroupId;const n=t[0],o=e.nextPart.get(n),i=o?Ff(t.slice(1),o):void 0;if(i)return i;if(e.validators.length===0)return;const r=t.join(dl);return(l=e.validators.find(({validator:a})=>a(r)))==null?void 0:l.classGroupId}const jl=/^\[(.+)\]$/;function Hd(t){if(jl.test(t)){const e=jl.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function Gd(t){const{theme:e,prefix:n}=t,o={nextPart:new Map,validators:[]};return Vd(Object.entries(t.classGroups),n).forEach(([r,l])=>{Rr(l,o,r,e)}),o}function Rr(t,e,n,o){t.forEach(i=>{if(typeof i=="string"){const r=i===""?e:ql(e,i);r.classGroupId=n;return}if(typeof i=="function"){if(Wd(i)){Rr(i(o),e,n,o);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([r,l])=>{Rr(l,ql(e,r),n,o)})})}function ql(t,e){let n=t;return e.split(dl).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n}function Wd(t){return t.isThemeGetter}function Vd(t,e){return e?t.map(([n,o])=>{const i=o.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([l,a])=>[e+l,a])):r);return[n,i]}):t}function xd(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,o=new Map;function i(r,l){n.set(r,l),e++,e>t&&(e=0,o=n,n=new Map)}return{get(r){let l=n.get(r);if(l!==void 0)return l;if((l=o.get(r))!==void 0)return i(r,l),l},set(r,l){n.has(r)?n.set(r,l):i(r,l)}}}const jf="!";function Yd(t){const e=t.separator,n=e.length===1,o=e[0],i=e.length;return function(l){const a=[];let s=0,u=0,f;for(let g=0;g<l.length;g++){let p=l[g];if(s===0){if(p===o&&(n||l.slice(g,g+i)===e)){a.push(l.slice(u,g)),u=g+i;continue}if(p==="/"){f=g;continue}}p==="["?s++:p==="]"&&s--}const c=a.length===0?l:l.substring(u),d=c.startsWith(jf),m=d?c.substring(1):c,h=f&&f>u?f-u:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:m,maybePostfixModifierPosition:h}}}function Ud(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(o=>{o[0]==="["?(e.push(...n.sort(),o),n=[]):n.push(o)}),e.push(...n.sort()),e}function Kd(t){return{cache:xd(t.cacheSize),splitModifiers:Yd(t),...Bd(t)}}const Xd=/\s+/;function Jd(t,e){const{splitModifiers:n,getClassGroupId:o,getConflictingClassGroupIds:i}=e,r=new Set;return t.trim().split(Xd).map(l=>{const{modifiers:a,hasImportantModifier:s,baseClassName:u,maybePostfixModifierPosition:f}=n(l);let c=o(f?u.substring(0,f):u),d=!!f;if(!c){if(!f)return{isTailwindClass:!1,originalClassName:l};if(c=o(u),!c)return{isTailwindClass:!1,originalClassName:l};d=!1}const m=Ud(a).join(":");return{isTailwindClass:!0,modifierId:s?m+jf:m,classGroupId:c,originalClassName:l,hasPostfixModifier:d}}).reverse().filter(l=>{if(!l.isTailwindClass)return!0;const{modifierId:a,classGroupId:s,hasPostfixModifier:u}=l,f=a+s;return r.has(f)?!1:(r.add(f),i(s,u).forEach(c=>r.add(a+c)),!0)}).reverse().map(l=>l.originalClassName).join(" ")}function Zd(){let t=0,e,n,o="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qf(e))&&(o&&(o+=" "),o+=n);return o}function qf(t){if(typeof t=="string")return t;let e,n="";for(let o=0;o<t.length;o++)t[o]&&(e=qf(t[o]))&&(n&&(n+=" "),n+=e);return n}function Lr(t,...e){let n,o,i,r=l;function l(s){const u=e.reduce((f,c)=>c(f),t());return n=Kd(u),o=n.cache.get,i=n.cache.set,r=a,a(s)}function a(s){const u=o(s);if(u)return u;const f=Jd(s,n);return i(s,f),f}return function(){return r(Zd.apply(null,arguments))}}function et(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const Bf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Qd=/^\d+\/\d+$/,zd=new Set(["px","full","screen"]),em=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,om=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,im=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Jt(t){return In(t)||zd.has(t)||Qd.test(t)}function dn(t){return ho(t,"length",dm)}function In(t){return!!t&&!Number.isNaN(Number(t))}function oi(t){return ho(t,"number",In)}function Ao(t){return!!t&&Number.isInteger(Number(t))}function rm(t){return t.endsWith("%")&&In(t.slice(0,-1))}function xe(t){return Bf.test(t)}function mn(t){return em.test(t)}const lm=new Set(["length","size","percentage"]);function sm(t){return ho(t,lm,Hf)}function am(t){return ho(t,"position",Hf)}const um=new Set(["image","url"]);function fm(t){return ho(t,um,pm)}function cm(t){return ho(t,"",mm)}function Io(){return!0}function ho(t,e,n){const o=Bf.exec(t);return o?o[1]?typeof e=="string"?o[1]===e:e.has(o[1]):n(o[2]):!1}function dm(t){return tm.test(t)&&!nm.test(t)}function Hf(){return!1}function mm(t){return om.test(t)}function pm(t){return im.test(t)}function Dr(){const t=et("colors"),e=et("spacing"),n=et("blur"),o=et("brightness"),i=et("borderColor"),r=et("borderRadius"),l=et("borderSpacing"),a=et("borderWidth"),s=et("contrast"),u=et("grayscale"),f=et("hueRotate"),c=et("invert"),d=et("gap"),m=et("gradientColorStops"),h=et("gradientColorStopPositions"),g=et("inset"),p=et("margin"),w=et("opacity"),v=et("padding"),A=et("saturate"),R=et("scale"),q=et("sepia"),F=et("skew"),E=et("space"),I=et("translate"),N=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",xe,e],b=()=>[xe,e],T=()=>["",Jt,dn],D=()=>["auto",In,xe],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],X=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",xe],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[In,oi],oe=()=>[In,xe];return{cacheSize:500,separator:":",theme:{colors:[Io],spacing:[Jt,dn],blur:["none","",mn,xe],brightness:ne(),borderColor:[t],borderRadius:["none","","full",mn,xe],borderSpacing:b(),borderWidth:T(),contrast:ne(),grayscale:Q(),hueRotate:oe(),invert:Q(),gap:b(),gradientColorStops:[t],gradientColorStopPositions:[rm,dn],inset:C(),margin:C(),opacity:ne(),padding:b(),saturate:ne(),scale:ne(),sepia:Q(),skew:oe(),space:b(),translate:b()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[mn]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),xe]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ao,xe]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",Ao,xe]}],"grid-cols":[{"grid-cols":[Io]}],"col-start-end":[{col:["auto",{span:["full",Ao,xe]},xe]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Io]}],"row-start-end":[{row:["auto",{span:[Ao,xe]},xe]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[mn]},mn]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mn,dn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",oi]}],"font-family":[{font:[Io]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",In,oi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jt,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jt,dn]}],"underline-offset":[{"underline-offset":["auto",Jt,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),am]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fm]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:L()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[Jt,xe]}],"outline-w":[{outline:[Jt,dn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Jt,dn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mn,cm]}],"shadow-color":[{shadow:[Io]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":U()}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[o]}],contrast:[{contrast:[s]}],"drop-shadow":[{"drop-shadow":["","none",mn,xe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[c]}],saturate:[{saturate:[A]}],sepia:[{sepia:[q]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[s]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[c]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Ao,xe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jt,dn,oi]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}function hm(t,{cacheSize:e,prefix:n,separator:o,extend:i={},override:r={}}){hi(t,"cacheSize",e),hi(t,"prefix",n),hi(t,"separator",o);for(const l in r)_m(t[l],r[l]);for(const l in i)gm(t[l],i[l]);return t}function hi(t,e,n){n!==void 0&&(t[e]=n)}function _m(t,e){if(e)for(const n in e)hi(t,n,e[n])}function gm(t,e){if(e)for(const n in e){const o=e[n];o!==void 0&&(t[n]=(t[n]||[]).concat(o))}}function bm(t,...e){return typeof t=="function"?Lr(Dr,t,...e):Lr(()=>hm(Dr(),t),...e)}const Gf=Lr(Dr);function Wf(t){const e=t-1;return e*e*e+1}function We(...t){return Gf(qd(t))}function ym(t,e,n){const r={...{townName:t.townInfo.name,population:t.townInfo.population_count,gold:t.townInfo.gold,day:t.environment.day*t.environment.year,tick:t.tick},...n};gtag("event",e,r)}const _o=(t,e={y:-8,x:0,start:.95,duration:150})=>{const n=getComputedStyle(t),o=n.transform==="none"?"":n.transform,i=(l,a,s)=>{const[u,f]=a,[c,d]=s;return(l-u)/(f-u)*(d-c)+c},r=l=>Object.keys(l).reduce((a,s)=>l[s]===void 0?a:a+`${s}:${l[s]};`,"");return{duration:e.duration??200,delay:0,css:l=>{const a=i(l,[0,1],[e.y??5,0]),s=i(l,[0,1],[e.x??0,0]),u=i(l,[0,1],[e.start??.95,1]);return r({transform:`${o} translate3d(${s}px, ${a}px, 0) scale(${u})`,opacity:l})},easing:Wf}};function st(t,e){if(e===void 0&&(e=0),t==null||t==null)return 0;t=parseFloat((t*Math.pow(10,e)).toFixed(11));var n=Math.round(t)/Math.pow(10,e);return+n.toFixed(e)}function cr(t){return t<10?"0"+t:t}function vm(t){let e=Math.floor(t/1e3),n=Math.floor(e/60);e=e%60;let o=Math.floor(n/60);return n=n%60,`${cr(o)}:${cr(n)}:${cr(e)}`}function ke(t){return ie.findIndex(e=>e.id===t)}function Bl(t){return ie.find(e=>e.id===t)}function tn(t,e=!0){let n=t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return e||(n=n.split(".")[0]),n}function no(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Hl(t,e=!0){return t=st(t/(e?3:1),2),t<0?`${t}`:`+${t}`}function oo(t,e,n,o=!1){if(t<0||t>=n.plots.length||e<0||e>=n.plots[0].length)return!1;let i=[[t-1,e],[t+1,e],[t,e-1],[t,e+1],[t-1,e-1],[t-1,e+1],[t+1,e-1],[t+1,e+1]];for(let r=0;r<i.length;r++){let l=i[r][0],a=i[r][1];if(l>=0&&l<n.plots.length&&a>=0&&a<n.plots[0].length&&n.plots[l][a].water&&(o||n.plots[t][e].active==!0&&n.plots[t][e].type>0&&ie[n.plots[t][e].type].id=="farm"))return!0}return!1}function wm(t,e=0){let n=t*.95,o=t*1.05;return st(Math.random()*(o-n)+n,e)}function Ii(t,e,n){let o={x:t,y:e};return o.x===0&&o.y===0?!0:[{x:o.x-1,y:o.y},{x:o.x+1,y:o.y},{x:o.x,y:o.y-1},{x:o.x,y:o.y+1}].some(r=>r.x<0||r.x>=n.plots.length||r.y<0||r.y>=n.plots[r.x].length?!1:n.plots[r.x][r.y].active)}function km(t,e){let n=!0;return t.requirements.gold>e.townInfo.gold&&(n=!1),t.requirements.knowledge!==void 0&&t.requirements.knowledge>e.townInfo.knowledge_points&&(n=!1),t.requirements.plots.length>0&&t.requirements.plots.forEach(o=>{Ge(o,e).length===0&&(n=!1)}),n}function Cm(t){return ie.findIndex(e=>e.id===t)}function xn(t,e,n,o,i=!1){const r=Cm(t),l=ie[r];if(i||km(l,o)){if(o.plots[e][n].type!==-1&&En(e,n,o),o.plots[e][n].type=r,o.plots[e][n].active=!0,o.plots[e][n].referencePlot=[],o.plots[e][n].typeId=l.id,o.townInfo.gold-=l.requirements.gold,o.townInfo.gold=st(o.townInfo.gold,2),o.townInfo.population_count+=l.immediate_variable_changes.population,o.townInfo.population_max+=l.immediate_variable_changes.population,o.townInfo.happiness+=l.immediate_variable_changes.happiness,o.townInfo.health+=l.immediate_variable_changes.health,o.modifiers.happiness=st(o.modifiers.happiness*l.purchase_effect_modifiers.happiness,2),o.modifiers.health=st(o.modifiers.health*l.purchase_effect_modifiers.health,2),o.modifiers.community=st(o.modifiers.community*l.purchase_effect_modifiers.community,2),o.townInfo.employees+=l.requirements.employees,(o.plotCounts[r]===void 0||o.plotCounts[r]===null)&&(o.plotCounts[r]=0),o.plotCounts[r]++,o.lastChangeDay=o.environment.day,l.requirements.resources!==void 0){const a=l.requirements.resources;o.resources.food-=a.food,o.resources.wood-=a.wood,o.resources.stone-=a.stone,o.resources.metal-=a.metal}switch(l.id){case"city_hall":o.hasCityHall=!0;break;case"bank":o.hasBank=!0;break}return o}return o}function Tm(t,e,n){if(!n||!n.plots||!n.plots.length)return null;const o=n.plots.length,i=n.plots[0].length;for(let r=1;r<o+i;r++)for(let l=-r;l<=r;l++)for(let a=-r;a<=r;a++){if(Math.abs(l)+Math.abs(a)!==r)continue;const s=t+l,u=e+a;if(!(s<0||s>=o||u<0||u>=i)&&!n.plots[s][u].active&&!n.plots[s][u].mineralSource&&!n.plots[s][u].water&&!n.plots[s][u].disabled&&Ii(s,u,n))return[s,u]}return null}function Sm(t){let e={...$f};e.difficulty=1,e.endGoal="land",e.townInfo.name="Mock Town",e.townInfo.gold=Math.random()*5e4+2e4,e.townInfo.happiness=300,e.townInfo.health=300,e.townInfo.knowledge_points=Math.random()*1e3+100,e.modifiers.happiness=1e4,e.modifiers.health=1e4,e.resources.food=Math.random()*1e4+1e3,e.resources.wood=Math.random()*1e4+1e3,e.resources.stone=Math.random()*1e4+1e3,e.resources.metal=Math.random()*1e4+1e3;let n=[];const o=25,i=Math.floor(Math.random()*o/2)+1,r=Math.floor(Math.random()*o/2)+1;for(let l=0;l<o;l++){n.push([]);for(let a=0;a<o;a++){const s=l==i&&a==r?!1:Mi(l,a,o);n[l][a]={id:Math.random().toString(36).substring(2,9),active:!1,x:l,y:a,type:s?-9:-1,typeId:"",mineralSource:s?!1:i===l&&r===a,water:i===l&&r===a?!1:s}}}e.plots=n,$e.set(e),localStorage.setItem(_t,JSON.stringify(e)),localStorage.reset=!1,e=xn("small_homes",0,0,e,!0),e=xn("farm",1,0,e,!0),e=xn("farm",2,0,e,!0),e=xn("farm",3,0,e,!0),e=xn("tree_farm",4,0,e,!0);for(let l=1;l<t.plots.length*t.plots[0].length/2;l++)for(let a=0;a<ie.length/2;a++){let s=ie[Math.floor(Math.random()*ie.length)];t=xn(s.id,l,a,e,!1)}$e.set(e),localStorage.setItem(_t,JSON.stringify(e)),localStorage.reset=!1,location.reload()}const _t="plots_active_game_db",io="plots_user_db";function Am(){const t=["York","London","Paris","Madrid","Rome","Berlin","Vienna","Prague","Warsaw","Oslo","Lisbon","Dublin","Brussels","Amsterdam","Stockholm","Copenhagen","Edinburgh","Moscow","Beijing","Tokyo","Seoul","Bangkok","Delhi","Mumbai","Shanghai","Sydney","Melbourne","Cairo","Dubai","Istanbul","Athens","Budapest","Reykjavik","Helsinki","Tallinn","Riga","Vilnius","Sofia","Bucharest","Belgrade","Zagreb","Sarajevo","Ljubljana","Skopje","Tirana","Podgorica","Thessaloniki","Barcelona","Valencia","Seville","Granada","Malaga","Lyon","Marseille","Toulouse","Nice","Nantes","Strasbourg","Bordeaux","Lille","Venice","Milan","Florence","Naples","Turin","Bologna","Perugia","Genoa","Pisa","Verona","Palermo","Catania","Bari","Padua","Cagliari","Krakow","Gdansk","Poznan","Wroclaw","Lodz","Katowice","Bialystok","Gdynia","Sopot","Bydgoszcz","Lublin","Szczecin","Gorzow","Zakopane","Olsztyn","Torun","Rzeszow","Kielce","Radom","Siedlce","Los","Angeles","Chicago","Houston","Phoenix","San","Antonio","San","Diego","Dallas","San","Jose","Austin","Jacksonville","Fort","Worth","Columbus","Charlotte","Liverpool","Manchester","Glasgow","Birmingham","Leeds","Sheffield","Newcastle","upon","Tyne","Bristol","Nottingham","Leicester","Coventry","Belfast","Reading","Cardiff","Southampton","Aberdeen","Plymouth","Stoke","Trent","Wolverhampton","Swansea","Sunderland","Portsmouth","Yorkshire","Hull","Blackpool","Bradford","Derby","Middlesbrough","Peterborough","Stockton","on","Tees","Brighton","Poole","Bournemouth","Huddersfield","Luton","Oxford","Norwich","Oldham","Cambridge","Exeter","Walsall","Colchester","Watford","Rotherham","Newport","Gateshead","Dundee","Gloucester","Solihull","High","Wycombe","Maidstone","Slough","Basildon","Chelmsford","Salford","Bedford","Stevenage","Woking","Grimsby","Birkenhead","Halifax","Warrington","Gillingham","Wigan","Worcester","Wakefield","Lincoln","Chester","Rochdale","Dagenham","Widnes","St","Albans","Mansfield","Sutton","Coldfield","Crawley","Wokingham","Barnsley","St","Helens","Harrogate","Redditch","Scunthorpe","Nuneaton","Chesterfield","Hemel","Hempstead","Bury","Guildford","Ashford","Telford","Newcastle","under","Lyme","Aylesbury","Halesowen","Shrewsbury","Lowestoft","Loughborough","Cheltenham","Kidderminster","Basingstoke","Rugby","Stourbridge","Southport","Kettering","Royal","Leamington","Spa","Beeston","Farnborough","Wrexham","Banbury","Weymouth","Wallsend","Dartford","Grays","Tamworth","Ashford","Esher","Folkestone","Tonbridge","Taunton","Runcorn","Macclesfield","Keighley","Bridgend","Barnstaple","Letchworth","Garden","City","Worthing","Gosport","Eastleigh","Staines","upon","Thames","Lisburn","Livingston","Bognor","Regis","Scarborough","Cannock","Margate","Chippenham","Rhondda","Maidenhead","Wellingborough","Washington","Camberley","Bootle","Lancaster","Llanelli","Chatham","Cheshunt","Bishop","Auckland","Nelson","Belper","Pontefract","Barry","Braintree","Crosby","Bury","St","Edmunds","Bexhill","Margate","Aldershot","Rowley","Regis","Hoddesdon","Sittingbourne","Rugby","Newquay","Falmouth","Stretford","Camberley","Beverley","Windsor","Rochester","Wickford","Diss","Farnham","Andover","Camberwell","Bermondsey","Lewisham","Wembley","Hayes","Harrow","Ilford","Enfield","Twickenham","Richmond","Brentwood","Edgware","Ealing","Greenwich","Bromley","Hounslow","Romford","Hillingdon","Uxbridge","Wandsworth","Sutton","Kingston","upon","Thames","Bexley","Havering","Barking"],e=["ia","ville","ton","land","field","burgh","ford","wood","port","bay","beach","peak","valley","ridge","hill","dale","island","cape","spring","grove","polis","side","view","shore","haven","place","gardens","plaza","square"],n=["New","Old","North","South","East","West","Upper","Lower","Little","Great","Saint","Fort","Mount","Lake","River","The Village of","The City of","The Town of","The Borough of","The County of","The State of","The Kingdom of","The Empire of","The Republic of","The Commonwealth of","The Union of","The Federation of","Rainy","Sunny","Windy","Frosty","Snowy"];function o(s){return s[Math.floor(Math.random()*s.length)]}let i=o(n),r=o(t),l=o(e),a="";return Math.random()>.5?a=i+" "+r+l:a=r+l,a}let $e=Xe(JSON.parse(localStorage.getItem(_t)||"null")),_n=Xe(JSON.parse(localStorage.getItem(io)||"null"));Mm();function Im(t,e,n,o){localStorage.removeItem(_t),$e.set(null);let i={...$f};i.gameSettings=o,i.economyAndLaws.max_tax_rate=Dd[t],i.endGoal=e;let r=[];n=n.replace(/[^a-zA-Z0-9 ]/g,"").trim(),i.townInfo.name=n!=""?n:Am(),i.difficulty=parseInt(t),JSON.parse(localStorage.getItem(io)||"null").username=="dev"&&o.push("devMode"),o.includes("devMode")&&(i.townInfo.gold=1e8,i.townInfo.happiness=1e7,i.townInfo.health=1e6,i.townInfo.knowledge_points=1e5,i.modifiers.happiness=1e4,i.modifiers.health=1e4,i.resources.food=1e6,i.resources.wood=1e6,i.resources.stone=1e6,i.resources.metal=1e6);const a=12,s=Math.floor(Math.random()*a/2)+1,u=Math.floor(Math.random()*a/2)+1;for(let f=0;f<a;f++){r.push([]);for(let c=0;c<a;c++){const d=f==s&&c==u?!1:Mi(f,c,a);r[f][c]={id:Math.random().toString(36).substring(2,9),active:!1,x:f,y:c,type:d?-9:-1,typeId:"",mineralSource:d?!1:s===f&&u===c,water:s===f&&u===c?!1:d}}}i.plots=r,localStorage.setItem(_t,JSON.stringify(i)),$e.set(i),localStorage.reset=!1,ym(i,Rf.START_GAME,{difficulty:t,end_goal:e,settings:o.join(",")}),location.reload()}function Mi(t,e,n){let o=.08;return t>0&&e>0&&t<n-1&&e<n-1&&(o*=2),(e==Math.round(n/2)||e==Math.round(n/2)-1)&&(o*=3),t==0&&e==0&&(o=0),Math.random()<o}function Mm(){if(localStorage.getItem(io)===null){let t=Ld;t.username="my_username_click_to_change",localStorage.setItem(io,JSON.stringify(t)),_n.set(t)}}function En(t,e,n){let o=n.plots[t][e].type;if(n.plots[t][e].type=-1,n.plots[t][e].typeId="",n.plots[t][e].active=!1,o>-1&&(n.townInfo.population_count-=ie[o].immediate_variable_changes.population,n.townInfo.population_max-=ie[o].immediate_variable_changes.population,n.townInfo.employees-=ie[o].requirements.employees,(n.plotCounts[o]===void 0||n.plotCounts[o]===null)&&(n.plotCounts[o]=0),n.plotCounts[o]--,(ie[o].requirements.size??1)>1))for(let r=0;r<n.plots.length;r++)for(let l=0;l<n.plots[t].length;l++)n.plots[r][l].referencePlot!=null&&n.plots[r][l].referencePlot[0]===t&&n.plots[r][l].referencePlot[1]===e&&En(r,l,n);n.lastChangeDay=n.environment.day,$e.set(n),localStorage.setItem(_t,JSON.stringify(n))}function Ge(t,e){let n=[];for(let o=0;o<e.plots.length;o++)for(let i=0;i<e.plots[o].length;i++)e.plots[o][i].active==!1||e.plots[o][i]==null||e.plots[o][i].type===null||e.plots[o][i].type<0||(ie[e.plots[o][i].type].id===t||ie[e.plots[o][i].type].type===t)&&n.push(e.plots[o][i]);return n}function Xn(t,e,n){return n.liege_location!=null&&n.liege_location[0]===t&&n.liege_location[1]===e}function Om(t,e){const n=t.plots.length,o=n>0?t.plots[0].length:0,i=e=="east"?5:0,r=e=="south"?5:0,l=Math.round(Math.pow(1.7,t.kingdom_expansions+5));if(t.townInfo.guardians<l)return`You need ${l-t.townInfo.guardians} more Guardians to expand the kingdom. See the City mgmt menu.`;for(let a=0;a<n;a++)for(let s=o;s<o+i;s++)t.plots[a].push({id:Math.random().toString(36).substring(2,9),active:!1,x:a,y:s,type:-1,typeId:"",mineralSource:!1,water:Mi(a,s,n+r),disabled:!1,referencePlot:null});for(let a=n;a<n+r;a++){const s=[];for(let u=0;u<o+i;u++)s.push({id:Math.random().toString(36).substring(2,9),active:!1,x:a,y:u,type:-1,typeId:"",mineralSource:!1,water:Mi(a,u,n+r)});t.plots.push(s)}t.kingdom_expansions++,$e.set(t)}function Fr(t=null){localStorage.removeItem(_t),$e.set(null),t&&(localStorage.setItem(_t,JSON.stringify(t)),$e.set(t))}function Gl(t,e,n){n.liege_location=[t,e],so.set(!1),document.querySelectorAll(".plot_container").forEach(i=>{i.style.cursor=""}),$e.set(n)}let Qe=Xe({visible:!1,x:0,y:0,isMineralSource:!1}),qo=Xe({visible:!1});function Pm(t){_n.set(t),localStorage.setItem(io,JSON.stringify(t))}let ro=Xe({}),Bo=Xe(!1),Et=Xe(!1),_i=Xe(!0),Oi=Xe(!1),lo=Xe(!1),Pi=Xe(!1),zn=Xe(!1),so=Xe(!1),ao=Xe(!1),St=Xe(""),Wl=localStorage.getItem("showCompletedAchievements")==="true"?Xe(!0):Xe(!1);localStorage.getItem("showOnlyAffordable")==="true"?Xe(!0):Xe(!1);let Nm=localStorage.getItem("pauseMenuTab")==="game"?Xe("game"):Xe("achievements"),Eo=Xe(750),Bt=Xe({visible:!1,plotName:"",location:"",missingResources:[],plotCost:0,x:0,y:0});const Rt={unemployment_num:" people can't find jobs.",bored:"People are bored. Try making some new buildings.",vairety:"People don't like going to the same places over and over again. Try making some new buildings.",nobody_home:"Build some homes!",leave_town_num:" people left town because they were unhappy.",new_people_num:" new people moved to town.",people_want_to_move_in:"People want to move in. Build more homes.",high_tax_rate:"People are unhappy with the high tax rate.",very_high_tax_rate:"People are extremely unhappy with the high tax rate.",sickAndDying:"People are sick and dying.",sickAndLeaving:"People are sick and leaving town.",happiness_zero:"The town has fallen into chaos due to extreme unhappiness.",health_zero:"The town has fallen into chaos due to extreme sickness.",population_zero:"The town has been condemned due to lack of population.",win:{land:"You have filled the grid with buildings. You win!"},hospital_advantage:"Because you have a hospital, the town is staying healthier for longer!",notEnoughVariety:"People are sick of going to the same places over and over, add some variety!"},pt=[{id:"happiness_at_300",title:"Happy Town",description:"One of your towns wins Happiest Town Award!",requirements:"Happiness reaches 300",icon:"😍",check:t=>t.townInfo.happiness>=300,prize:1e3},{id:"get_educated",title:"Get Educated",description:"The kids are finally able to learn!",requirements:"Build a school or library",icon:"📌",check:t=>Ge("small_school",t).length!==0||Ge("large_school",t).length!==0||Ge("library",t).length!==0,prize:1850},{id:"10k",title:"$10,000",description:"",requirements:"Gold reaches $10,000",icon:"﹩",check:t=>t.townInfo.gold>=1e4,prize:2500},{id:"25k",title:"$25,000",description:"",requirements:"Gold reaches $25,000",icon:"💵",check:t=>t.townInfo.gold>=25e3,prize:7500},{id:"stayin_frugal",title:"Stayin' Frugal!",description:"",requirements:"Gold under $50 with >=300 population",icon:"🚲",check:t=>t.townInfo.gold<=50&&t.townInfo.population_count>=300,prize:1e4},{id:"profits_to_the_moon",title:"Profits to the moon!",description:"Now you're making dough!",requirements:"Last month profit is over $10,000",icon:"🌛",check:t=>t.economyAndLaws.weeklyProfit>=1e4,prize:15e3},{id:"happily_dying",title:"Happily Dying!",description:"Not something to be proud of...",requirements:"Happiness > 275, health < 25",icon:"🌛",check:t=>t.townInfo.happiness>275&&t.townInfo.health<25,prize:2e4},{id:"long_game",title:"The Long Game",description:"So are you gonna win anytime soon?",requirements:"Still playing after 10,000 days, without winning. ",icon:"🐌",check:t=>t.endGameDetails.win===!1&&t.environment.day>1e4&&t.endGameDetails.msg==="",prize:25e3},{id:"tax_man",title:"Tax man",description:"Set the tax rate to the absolute max that the town will tolerate.",requirements:"",icon:"🙃",check:t=>{let e=Math.floor(t.economyAndLaws.max_tax_rate*20)/20;return t.economyAndLaws.tax_rate===e},prize:1500},{id:"good_job",title:"Good job",description:"Beat 'Fill the grid' with Normal difficulty in under 3,000 days.",requirements:"",icon:"👍",check:t=>t.endGameDetails.win===!0&&t.environment.day<=3e3&&t.difficulty===1&&t.endGoal==="land",prize:1e4},{id:"great_job",title:"Great job",description:"Beat 'Fill the grid' with Normal difficulty in under 2,000 days.",requirements:"",icon:"👏",check:t=>t.endGameDetails.win===!0&&t.environment.day<=2e3&&t.difficulty===1&&t.endGoal==="land",prize:45e3},{id:"superb_job",title:"SUPERB job",description:"Beat 'Fill the grid' with Normal difficulty in under 500 days.",requirements:"",icon:"👌",check:t=>t.endGameDetails.win===!0&&t.environment.day<=500&&t.difficulty===1&&t.endGoal==="land",prize:1e5},{id:"250k",title:"$250,000",description:"",requirements:"Gold reaches $250,000",icon:"💸",check:t=>t.townInfo.gold>=25e4,prize:5e4},{id:"banker",title:"Banker",description:"",requirements:"Build your first bank. ",icon:"🏦",check:t=>Ge("bank",t).length!==0,prize:5e3},{id:"community",title:"Community Center",description:"",requirements:"Build your first community center. ",icon:"❤️",check:t=>Ge("community_center",t).length!==0,prize:1e4},{id:"1m",title:"MILLIONAIRE!",description:"",requirements:"Gold reaches $1,000,000",icon:"💰",check:t=>t.townInfo.gold>=1e6,prize:15e4},{id:"pub_knowledge",title:"Street smartz",description:"You get 250 knowledge without building a school or library.",requirements:"Knowledge >= 250 without building a school or library",icon:"🤓",check:t=>Ge("small_school",t).length===0&&Ge("large_school",t).length===0&&Ge("library",t).length===0&&t.townInfo.knowledge_points>=250,prize:5e4}],Ho=[{message:"Build homes to start growing our village",isComplete:t=>t.townInfo.population_max>0,goldReward:750},{message:"Start producing food and wood to keep the town running",isComplete:t=>Ge("farm",t).length>=1&&Ge("tree_farm",t).length>=1,goldReward:500},{message:"We need stone and metals. Build a quarry",isComplete:t=>Ge("quarry",t).length>0,goldReward:700},{message:"Weekly revenue >= 200 gold",isComplete:t=>t.economyAndLaws.weeklyProfit>=200,goldReward:3e3},{message:"Grow our population to 100.",isComplete:t=>t.townInfo.population_count>=100,goldReward:8e3},{message:"Start generating power. Build a water wheel or solar farm",isComplete:t=>t.resources.power>0,goldReward:1e4},{message:"Knowledge >= 250",isComplete:t=>t.townInfo.knowledge_points>=250,goldReward:5e3},{message:"Population >= 200",isComplete:t=>t.townInfo.population_count>=200,goldReward:2e4},{message:"Build a mine to boost our metal supply",isComplete:t=>Ge("mine",t).length>0,goldReward:2e4},{message:"Establish a City Hall to advance our town",isComplete:t=>Ge("city_hall",t).length>0,goldReward:5e4}];let Mo=function(t){return t.gameSettings.includes("casual")?3:1};const jr=[{id:"organic_farming",description:"Organic Farming. Make townspeople healthier and happier, while decreasing overall food production.",cost:150,weekly_effect:t=>(t.modifiers.happiness*=1.01,t.modifiers.health*=1.01,t.resources.food-=2*Mo(t)*Ge("farm",t).length,t)},{id:"tax_free",description:"Tax-Free Month. For 1 month, the town loses all revenue from taxes, but happiness and health increase quite a lot. Automatically ends after 4 weeks.",cost:250,weekly_effect:t=>(localStorage.getItem("tax_free")===null?(localStorage.setItem("tax_free","0"),t.economyAndLaws.weeklyProfit=-1*t.economyAndLaws.weeklyProfit):localStorage.setItem("tax_free",(parseInt(localStorage.getItem("tax_free"))+1).toString()),parseInt(localStorage.getItem("tax_free"))>=4?(t.modifiers.happiness*=1,t.modifiers.health*=1,localStorage.removeItem("tax_free"),t.economyAndLaws.enacted=t.economyAndLaws.enacted.filter(e=>e!=="tax_free")):(t.modifiers.happiness*=1.02,t.modifiers.health*=1.01),t)},{id:"healthy_mining",description:"Healthy mining. Miners must mine with proper ventilation, but they move like molasses.",cost:250,weekly_effect:t=>(ie.find(e=>e.id==="mine"),t.modifiers.health*=1.1,t.resources.stone-=5*Mo(t)*Ge("quarry",t).length,t.resources.stone-=7*Mo(t)*Ge("mine",t).length,t.resources.metal-=15*Mo(t)*Ge("mine",t).length,t)},{id:"complicated_tax_forms",description:"Complicated Tax Forms. You sneak in a clause to charge 5% more in taxes. Now, if you adjust your tax rate 5% higher, they won't be upset. This can be enacted multiple times to stack.",cost:500,weekly_effect:t=>(t.economyAndLaws.max_tax_rate+=.05,t.economyAndLaws.enacted=t.economyAndLaws.enacted.filter(e=>e!=="complicated_tax_forms"),t)},{id:"legalize_it",description:"Legalize it. You legalize a substance that makes people happy, but it also gives them 'the munchies'. Food consumption and happiness go up.",cost:350,weekly_effect:t=>(t.resources.food-=Math.round(.2*Mo(t)*t.townInfo.population_count),t.modifiers.happiness*=1.1,t)},{id:"park_upgrade",description:"Park upgrade. You hold a community forum and add the top 5 things that the people want in their parks. This increases happiness for each park.",cost:350,weekly_effect:t=>(t.townInfo.happiness+=2*Ge("park",t).length,t)},{id:"career_politician",description:"Career Politician. You hire a career politician to help you with your town. They cost the town $100 per week, but they earn bureaucracy points faster.",cost:200,weekly_effect:t=>(t.townInfo.gold-=100,t.resources.bureaucracy+=25,t)},{id:"the_big_wood_deal",description:"The Big Wood Deal. This law allows you to sell all of the wood in your town for $5/wood at once. This won't make the town happy, but may be necessary in a pinch. Can be enacted multiple times to sell to other buyers.",cost:500,weekly_effect:t=>(t.townInfo.gold+=5*t.resources.wood,t.resources.wood=0,t.resource_rate.wood=0,t.townInfo.happiness*=.95,t.economyAndLaws.enacted=t.economyAndLaws.enacted.filter(e=>e!=="the_big_wood_deal"),t)},{id:"picky_eating_liege",description:"Picky Eater Liege. There is some food that the town makes that you just really hate. By passing this law, you insist that they sell off that gross food for $1/food every week. You won't make as much food, but you won't have to eat it either.",cost:200,weekly_effect:t=>{const e=Ge("farm",t).length*2,n=Math.floor(Math.random()*(.15*e-.05*e)+.05*e);return t.resources.food-=n,t.townInfo.gold+=n,t.townInfo.happiness=.95*t.townInfo.happiness,t}},{id:"stone_statue",description:"Stone Statue. You insist that we use ALL of our stone to build a massive statue. We lose all of our stone, but for some reason, the town has perfect health for a while, I guess.",cost:1e3,weekly_effect:t=>(t.resources.stone=0,t.modifiers.health=5,t)},{id:"out_of_town",description:"TODO: Out of town. Everyone needs a vacation, right? When this is enacted, EVERYONE must leave the town for 10 days. During this time, no resources are produced, no taxes are collected, and you must take a break from the game.",cost:1e3,weekly_effect:t=>t}],Vl=30;function Em(t){return t=Fm(t),t=t,t}function $m(t){const e=[()=>t.townInfo.happiness<100?"I heard that the town is unhappy. We miss our churches and parks...":"",()=>t.townInfo.health<100?"My kids keep getting sick, probably not enough farms around here!":"",()=>t.townInfo.happiness<50?"I'm thinking of moving out if things don't improve soon!":"",()=>t.townInfo.employees<t.townInfo.population_count?"I am unemployed and I hate it here":"",()=>t.townInfo.knowledge_points<100?"I wish we had more schools!":"",()=>t.economyAndLaws.tax_rate>t.economyAndLaws.max_tax_rate?"I wish the taxes were lower, I could use a break!":"",()=>t.townInfo.productivity>100?"I think we should take a day or two to just be chill, we've been working hard!":"",()=>t.economyAndLaws.tax_rate<t.economyAndLaws.max_tax_rate?"We would probably be ok chipping in more gold for village improvements.":""],n=Math.floor(Math.random()*e.length);return e[n]()}function Rm(t,e,n){return t.resource_rate.food=dt(n.food-e.food,0),t.resource_rate.wood=dt(n.wood-e.wood,0),t.resource_rate.stone=dt(n.stone-e.stone,0),t.resource_rate.metal=dt(n.metal-e.metal,0),t.resource_rate.bureaucracy=dt(n.bureaucracy-e.bureaucracy,0),t}function Lm(t){return t.hasBank,t}function Dm(t){let e=t.economyAndLaws.knowledge_gold_market_rates[t.economyAndLaws.knowledge_gold_market_rates.length-1]||1;const n=-100,o=8,i=3;let r=Math.random(),l=Math.random()*i;if(r<.4){let a=Math.random()*o;Math.random()<.5?e+=a:e-=a}else Math.random()>.5?e+=l:e-=l;return e<n&&(e+=Math.random()*l/5),e=Math.round(e),t.economyAndLaws.knowledge_gold_market_rates=[...t.economyAndLaws.knowledge_gold_market_rates,e],t}function Fm(t){if(t.townInfo.population_count<t.townInfo.population_max&&t.townInfo.happiness>50){let e=t.townInfo.population_max-t.townInfo.population_count,n=Math.round(t.townInfo.happiness/100*e);t.townInfo.population_count+=n,t.townInfo.population_count>t.townInfo.population_max&&(t.townInfo.population_count=t.townInfo.population_max),t.townInfo.employees+=n,t.townInfo.employees>t.townInfo.population_count&&(t.townInfo.employees=t.townInfo.population_count)}if(t.townInfo.happiness<50&&t.townInfo.population_count>0){let e=Math.round((150-t.townInfo.happiness)/5);t.townInfo.population_count-=e,t.townInfo.employees>0&&(t.townInfo.employees-=e)}else t.townInfo.population_count==t.townInfo.population_max;return t}function qr(t){return t.lab.active_experiment==null||t.lab.active_experiment.duration>0&&(t.lab.active_experiment.duration-=1),t}function Br(t){t.townInfo.happiness<0&&(t.townInfo.happiness=0),t.townInfo.health<0&&(t.townInfo.health=0),t.townInfo.community<0&&(t.townInfo.community=0),t.townInfo.gold<0&&(t.townInfo.gold=0),t.townInfo.employees<0&&(t.townInfo.employees=0),t.townInfo.knowledge_points<0&&(t.townInfo.knowledge_points=0),t.townInfo.population_count<0&&(t.townInfo.population_count=0),t.economyAndLaws.weeklyProfit=dt(t.economyAndLaws.weeklyProfit,0),t.townInfo.employees>t.townInfo.population_count&&(t.townInfo.employees=t.townInfo.population_count),t.townInfo.gold=dt(t.townInfo.gold,0),t.townInfo.population_count=dt(t.townInfo.population_count,0),t.townInfo.employees=dt(t.townInfo.employees,0),t.townInfo.population_max=dt(t.townInfo.population_max,0),t.townInfo.happiness=dt(t.townInfo.happiness,2),t.townInfo.health=dt(t.townInfo.health,2),t.townInfo.knowledge_points=dt(t.townInfo.knowledge_points,0),t.townInfo.happiness>t.maximums.happiness&&(t.townInfo.happiness=t.maximums.happiness),t.townInfo.health>t.maximums.health&&(t.townInfo.health=t.maximums.health),t.townInfo.community>300&&(t.townInfo.community=300),t.modifiers.happiness<.5&&(t.modifiers.happiness=.5),t.modifiers.health<.5&&(t.modifiers.health=.5),t.modifiers.community<.5&&(t.modifiers.community=.5),t.modifiers.happiness>2&&(t.modifiers.happiness=2),t.modifiers.health>2&&(t.modifiers.health=2),t.modifiers.community>2&&(t.modifiers.community=2);for(let e=0;e<t.plots.length;e++)for(let n=0;n<t.plots[e].length;n++)t.plots[e][n].active==!1&&t.plots[e][n].disabled==!0&&(t.plots[e][n].disabled=!1);return t}function Hr(t){if(t.townInfo.happiness>150){let n=t.townInfo.happiness-150;t.townInfo.happiness-=n*.08,t.townInfo.happiness<150&&(t.townInfo.happiness=150)}if(t.townInfo.health>150){let n=t.townInfo.health-150;t.townInfo.health-=n*.08,t.townInfo.health<150&&(t.townInfo.health=150)}if(t.townInfo.community>150){let n=t.townInfo.community-150;t.townInfo.community-=n*.08,t.townInfo.community<150&&(t.townInfo.community=150)}return t}function ct(t,e,n){let o=e.townLog||[];return o.filter(i=>i.message==t).length>0||o.unshift({message:t,day:e.environment.day,vibe:n}),e}function dt(t,e){e===void 0&&(e=0);let n=Math.pow(10,e);return t=parseFloat((t*n).toFixed(11)),+(Math.round(t)/n).toFixed(e)}function jm(t,e,n){let o,i,r,l,a,s;le(t,Eo,_=>n(7,o=_)),le(t,Bo,_=>n(8,i=_)),le(t,Pi,_=>n(9,r=_)),le(t,Et,_=>n(10,l=_)),le(t,_n,_=>n(11,a=_)),le(t,Bt,_=>n(12,s=_)),le(t,$e,_=>n(13,_));function u(_){_=ne(_),_=z(_),_=h(_),_=Dm(_),_=oe(_),_=A(_);const K={food:_.resources.food,wood:_.resources.wood,stone:_.resources.stone,metal:_.resources.metal,bureaucracy:_.resources.bureaucracy,power:_.resources.power};_=j(_),_=Q(_),_=T(_),_=Pe(_),_=N(_);const J={food:_.resources.food,wood:_.resources.wood,stone:_.resources.stone,metal:_.resources.metal,bureaucracy:_.resources.bureaucracy,power:_.resources.power};return _.environment.day%14===0&&(_=ce(_)),_=Rm(_,K,J),_}function f(_){return _=Lm(_),_=v(_),_=ee(_),_=Hr(_),_=X(_),_=E(_),_=g(_),_}function c(_){return _=b(_),_=Ae(_),_=Br(_),_=qr(_),_=I(_),_=F(_),_=m(_),_=p(_),_.overtime==!1&&(_=U(_),_=_),_=L(_),_=D(_),_=w(_),_}function d(){$e.update(_=>{if(_==null||(_.tick++,_.tick%Vl!==0))return _;if(s.visible||l||!_||_.endGameDetails.msg!==""&&_.overtime==!1||_.townInfo.population_count<=0)return console.info("The game is over, or paused. Not running the game loop."),_;try{return _.environment.day+=1,_.environment.day%7===0&&(_=u(_)),_.environment.day%30===0&&(_=f(_)),_.environment.day%90===0&&(_=Em(_)),window.location.search.includes("debug=true")&&console.log(_),_=c(_),_}catch(K){return window.location.hostname==="localhost"&&alert("Error in game loop: "+K),console.error("Error in game loop:",K),_}})}$e.subscribe(_=>{_&&localStorage.setItem(_t,JSON.stringify(_))}),_n.subscribe(_=>{_&&localStorage.setItem(io,JSON.stringify(_))});function m(_){let K=_.townInfo.population_count-_.townInfo.employees,J=`${K} people can't find jobs!`;return _.townLog=_.townLog.filter(se=>!se.message.includes("people can't find jobs")),K>0&&(_=ct(J,_,ot.BAD)),_}function h(_){let K=!1,J=!1,se=!1,we=!1;for(let Oe=0;Oe<_.plots.length;Oe++)for(let De=0;De<_.plots[Oe].length;De++)if(_.plots[Oe][De].active==!0&&_.plots[Oe][De].type>-1){let qe=ie[_.plots[Oe][De].type].id;qe=="bank"&&(K=!0),qe=="city_hall"&&(se=!0),(qe=="small_hospital"||qe=="large_hospital")&&(J=!0),qe=="lab"&&(we=!0)}return _.hasBank=K,_.hasHospital=J,_.hasCityHall=se,_.hasLab=we,_}function g(_){let K=0,J=0;for(let se=0;se<_.plots.length;se++)for(let we=0;we<_.plots[se].length;we++)if(_.plots[se][we].active==!0&&_.plots[se][we].type>-1){let Oe=ie[_.plots[se][we].type].type;J++,(Oe=="recreation"||Oe=="shop")&&K++}return _.townInfo.recreation=K,J>40&&(K/J<.2?(_.modifiers.happiness*.95,_=ct("The city is growing and citizens are demanding more recreation, look for plots with 🛝 icons.",_,ot.BAD)):(_.modifiers.happiness*1.03,_=ct("The city is growing and citizens are happy with the amount of recreation available.",_,ot.GOOD))),_}function p(_){let K=0;for(let J=0;J<_.plots.length;J++)for(let se=0;se<_.plots[J].length;se++)if(_.plots[J][se].active==!0&&_.plots[J][se].type>-1){let Oe=ie[_.plots[J][se].type].requirements.employees;K+=Oe}return K!=_.townInfo.employees&&(K>_.townInfo.population_max,_.townInfo.employees=K),_}function w(_){for(let K=0;K<_.plots.length;K++)for(let J=0;J<_.plots[K].length;J++)_.plots[K][J].active==!0&&(_.plots[K][J].type=ke(_.plots[K][J].typeId));return _}function v(_){const K=_.townInfo.productivity;let J=1;if(K>50&&K<100)J=1.05;else{if(K==100)return _;K<50?J=1.3:K>100&&K<125?J=.95:K>125&&K<150?J=.9:K>150&&K<175?J=.85:K>175&&K<200&&(J=.75)}const se=_.townInfo.happiness;return _.townInfo.happiness*=J,J>1?_=ct(`Happiness has gone up by ${Math.round(_.townInfo.happiness/se*100)}% due to productivity.`,_,ot.GOOD):_=ct(`Happiness has gone down by ${100-Math.round(_.townInfo.happiness/se*100)}% due to productivity.`,_,ot.BAD),_}function A(_){return _.endGameDetails!=null||(_.townInfo.happiness<70&&_.last_warning_happiness+365<_.environment.day&&(St.set("Your citizens are very unhappy. You should do something about it."),_.last_warning_happiness=_.environment.day),_.townInfo.health<70&&_.last_warning_health+365<_.environment.day&&(St.set("Your citizens are very unhealthy. You should do something about it."),_.last_warning_health=_.environment.day)),_}const R=["Abigail","Elijah","Mabel","Silas","Beatrice","Clarence","Dorothy","Edgar","Florence","George","Harriet","Isaac","Josephine","Levi","Matilda","Nathaniel","Olive","Percy","Quincy","Rose","Samuel","Theodore","Ursula","Vincent","Winifred","Xavier","Yvette","Zachary","Amos","Betsy","Cecil","Delia","Emmett","Fanny","Gideon","Hazel","Irving","Jeannette","Karl","Lucinda","Mortimer","Nettie","Otis","Prudence","Rufus","Sophronia","Titus","Ulysses","Vera","Winston","Xenia","Yolanda","Zeke","Ada","Bernard","Cornelia","Duncan","Esther","Fletcher","Genevieve"],q=["Farmer","Blacksmith","Biscuit Sculptor","Baker","Carpenter","Chicken Whisperer","Fisher","Herbalist","Miner","Mason","Mustache Twirler","Brewer","Butcher","Candlemaker","Cloud Watcher","Dressmaker","Gardener","Hunter","Innkeeper","Jeweler","Locksmith","Miller","Painter","Potter","Quilter","Rancher","Saddler","Tanner","Upholsterer","Vintner","Watchmaker","Wheelwright","Wooly Sock Knitter","Yarn Spinner","Zodiac Interpreter","Archivist","Bookbinder","Cobbler","Dyer","Engraver","Fletcher","Glassblower","Haberdasher","Illuminator","Joiner","Knitter","Lace Maker","Mapmaker","Navigator","Orchardist","Potion Tester","Quarryman","Roofer","Soapmaker","Tobacconist","Undertaker","Victualler","Wainwright","Xylographer","Yeoman","Pumpkin Carver","Mud Pie Maker","Folk Tale Teller","Leaf Collector","Sunset Chaser","Dream Interpreter","Star Gazer"];function F(_){if(_.gameSettings.includes("bagOfHolding"))return _.resource_capacity=972024,_;let K=Ge("stockpile",_).length,J=Ge("adv_stockpile",_).length,se=1e3+K*2e3+J*12e3;return _.resource_capacity=se,Object.keys(_.resources).forEach(we=>{_.resources[we]>se&&(_.resources[we]=se)}),_}function E(_){for(let K=0;K<_.plots.length;K++)for(let J=0;J<_.plots[K].length;J++)if(Xn(K,J,_)&&_.plots[K][J].active==!0&&ie[_.plots[K][J].type].type=="residential"&&Math.random()<.99){let se=`👑🏠 ${R[Math.floor(Math.random()*R.length)]} the ${q[Math.floor(Math.random()*q.length)]}: `,we=$m(_);se+=we,we!=""&&(_=ct(se,_,ot.NORMAL))}return _}function I(_){let K=0;for(let J=0;J<_.plots.length;J++)for(let se=0;se<_.plots[J].length;se++)if(_.plots[J][se].active==!0&&_.plots[J][se].type>-1){let we=ie[_.plots[J][se].type].type;(we=="recreation"||we=="shop")&&K++}return _.townInfo.recreation=K,_}function N(_){const K=_.townInfo.population_count;return _.resources.food<K?(_.modifiers.happiness*=.95,_.modifiers.health*=.95,_=ct("There isn't enough food for everyone!",_,ot.BAD),_.resources.food=0):(_.townLog=_.townLog.filter(se=>!se.message.includes("There isn't enough food for everyone!")),_.resources.food-=K),_.resources.food=Math.round(_.resources.food),_}function j(_){const K=_.townInfo.productivity;let J=1;K<50?J=.5:K>50&&K<100?J=.75:K==100?J=1:K>100&&K<125?J=1.25:K>125&&K<150?J=1.75:K>150&&K<175?J=3:K>175&&K<200&&(J=5);const se=_.gameSettings.includes("casual")?2.2:1;J*=se,J=wm(J,2),J*=_.townInfo.community>150?1.2:_.townInfo.community<100?.85:1;let we=Ge("lumber_mill",_).length*1.5;we===0&&(we=1);for(let Oe=0;Oe<_.plots.length;Oe++)for(let De=0;De<_.plots[Oe].length;De++)if(_.plots[Oe][De].active==!0&&_.plots[Oe][De].type>-1&&_.plots[Oe][De].disabled==!1){let qe=oo(Oe,De,_),He=Xn(Oe,De,_)?2:1,Be=ie[_.plots[Oe][De].type];Be.generated_resources!=null&&(_.resources.food+=Math.round(Be.generated_resources.food*J)*(qe?2:1)*He,_.resources.wood+=Math.round(Be.generated_resources.wood*J*we)*He,_.resources.stone+=Math.round(Be.generated_resources.stone*J)*He,_.resources.metal+=Math.round(Be.generated_resources.metal*J)*He,_.resources.bureaucracy+=Math.round(Be.generated_resources.bureaucracy*J)*He)}return _.resources.food=Math.round(_.resources.food),_.resources.wood=Math.round(_.resources.wood),_.resources.stone=Math.round(_.resources.stone),_.resources.metal=Math.round(_.resources.metal),_.resources.bureaucracy=Math.round(_.resources.bureaucracy),_}var C;(function(_){_.food="food",_.wood="wood",_.stone="stone",_.metal="metal",_.bureaucracy="bureaucracy"})(C||(C={}));function b(_){for(let K=0;K<_.plots.length;K++)for(let J=0;J<_.plots[K].length;J++)if(_.plots[K][J].active&&_.plots[K][J].type>-1&&!_.plots[K][J].disabled){let se=ie[_.plots[K][J].type];if(se.type=="residential")continue;let we=!1,Oe=[];const De=_.plots[K][J].snoozedUntil&&_.environment.day<=(_.plots[K][J].snoozedUntil||0);Object.keys(se.active_costs).forEach((qe,He)=>{let Be=Object.values(se.active_costs)[He];Be=Be/7,qe!="power"&&(qe=="gold"?_.townInfo.gold<Be&&(we=!0,Oe.push(`💰${Be-_.townInfo.gold} gold`)):_.resources[qe]<Be?(we=!0,Oe.push(`${Be-_.resources[qe]} ${qe}`)):De||(_.resources[qe]-=Be))}),we&&!De&&(Bt.set({visible:!0,plotName:se.title,location:`at (${J}, ${K})`,missingResources:Oe,plotCost:se.requirements.gold,x:K,y:J}),_.plots[K][J].disabled=!0),_.plots[K][J].disabled=!De&&we}else _.plots[K][J].active||(_.plots[K][J].disabled=!1);return _}function T(_){let K=0;for(let J=0;J<_.plots.length;J++)for(let se=0;se<_.plots[J].length;se++)if(_.plots[J][se].active==!0&&_.plots[J][se].type>-1){let we=ie[_.plots[J][se].type];we.active_costs.power!=0&&(K-=we.active_costs.power),we.generated_resources.power!=0&&(K+=we.generated_resources.power)}return _.resources.power=K,_.resources.power<0&&(_.modifiers.happiness*.98,_.townInfo.happiness-=5,_=ct("🔋 POWER SHORTAGE. HAPPINESS DROPPING THROUGH BLACKOUTS.",_,ot.BAD)),_}function D(_){if(_.gameSettings.includes("devMode"))return _;let K=a;for(let J=0;J<pt.length;J++)K.achievements.find(se=>se[0]==pt[J].id)==null&&pt[J].check(_)&&(K.achievements.push([pt[J].id,_.environment.day,_.townInfo.name]),Te(Et,l=!0,l),Te(Pi,r=!0,r));return _n.update(()=>K),_}let W=!1;function L(_){if(W||_.currentTutorialStep>=Ho.length)return _;for(let K=_.currentTutorialStep;K<_.currentTutorialStep+1;K++)if(Ho[K].isComplete(_)){Te(Bo,i=!0,i),W=!0,_.townInfo.gold+=Ho[K].goldReward,setTimeout(()=>{Te(Bo,i=!1,i),_.currentTutorialStep++,W=!1},3e3);break}return _}function U(_){return _.gameSettings.includes("tomPetty")&&(_.townInfo.happiness<=3||_.townInfo.health<=3)?(_.townInfo.happiness=300,_.modifiers.happiness=1,_.townInfo.health=300,_.modifiers.health=1,_.townInfo.gold=dt(_.townInfo.gold*.1,0),alert("Since you are playing in Tom Petty mode, you have been given another chance. All it took was 90% of your gold. Good luck!"),_):(_.townInfo.happiness<=3&&(_.townInfo.happiness=0,_.endGameDetails={msg:Rt.happiness_zero,win:!1,still_playing:!1}),_.townInfo.health<=3&&(_.townInfo.health=3,_.endGameDetails={msg:Rt.health_zero,win:!1,still_playing:!1}),_.townInfo.population_count<=0&&_.townInfo.population_max>0&&(_.townInfo.population_count=0,_.endGameDetails={msg:Rt.population_zero,win:!1,still_playing:!1}),_)}function X(_){let K=_.townInfo.population_count-_.townInfo.employees;if(_.gameSettings.includes("casual")&&Math.random()<.75)return _;if(K>0){let J=K*.2;J>10&&(J=10),_.townInfo.happiness-=J,_=ct(K+Rt.unemployment_num,_,ot.BAD)}else _.townLog=_.townLog.filter(J=>!J.message.includes(Rt.unemployment_num));return _}function Q(_){for(let K=0;K<_.economyAndLaws.enacted.length;K++){let J=jr.find(se=>se.id==_.economyAndLaws.enacted[K]);J!=null&&J.weekly_effect!=null&&(_=J.weekly_effect(_))}return _}function z(_){let K=_.townInfo.health,J=0;return K>50||K<Math.random()*50&&(K<25?(_=ct(Rt.sickAndDying,_,ot.BAD),_.townInfo.happiness-=10,J=Math.round(_.townInfo.population_count*.1)):(_=ct(Rt.sickAndLeaving,_,ot.BAD),_.townInfo.happiness-=5,J=Math.round(_.townInfo.population_count*.05)),_.townInfo.population_count-=J,_.townInfo.employees-=J),_}function ne(_){const K=Math.random();if(_.economyAndLaws.tax_rate>_.economyAndLaws.max_tax_rate&&_.townInfo.population_count>0){let J=1;_.hasBank&&(J=2);const se=_.difficulty==0?.7:_.difficulty==1?.4:.2;K<se&&_.economyAndLaws.tax_rate>_.economyAndLaws.max_tax_rate*2*J?(_.modifiers.happiness-=.02,_=ct(Rt.very_high_tax_rate+"  ("+_.economyAndLaws.tax_rate+"%)",_,ot.BAD)):(_.modifiers.happiness-=.01,_=ct(Rt.high_tax_rate+"  ("+_.economyAndLaws.tax_rate*100+"%)",_,ot.BAD))}return _}function oe(_){if(_.modifiers.happiness>1){let J=_.modifiers.happiness-1;_.modifiers.happiness-=J*.3,_.modifiers.happiness<1.02&&(_.modifiers.happiness=1)}if(_.modifiers.community>1){let J=_.modifiers.community-1;_.modifiers.community-=J*.3,_.modifiers.community<1.02&&(_.modifiers.community=1)}if(_.modifiers.health>1)if(Ge("healing_house",_).length>0){_=ct(Rt.hospital_advantage,_,ot.GOOD);let J=_.modifiers.health-1;_.modifiers.health-=J*Ge("healing_house",_).length?.03:.06,_.modifiers.health<1.02&&(_.modifiers.health=1)}else{let J=_.modifiers.health-1;_.modifiers.health-=J*.3,_.modifiers.health<1.02&&(_.modifiers.health=1)}else Ge("healing_house",_).length>0&&(_.modifiers.health+=.8,_.townInfo.health+=Math.floor(Math.random()*10)+5);return _}function Ae(_){_.economyAndLaws.weeklyProfit=0;for(let K=0;K<_.plots.length;K++)for(let J=0;J<_.plots[K].length;J++)if(_.plots[K][J].active==!0&&_.plots[K][J].type>-1){const se=ie[_.plots[K][J].type];console.log(se.id);let we=Ne(se.revenue_per_week,_,se.type,K,J)*(_.townInfo.productivity/100)/7;console.log("Profit: "+we);let Oe=oo(K,J,_);const De=_.gameSettings.includes("casual")&&we>0?3:1;we*=De,we*=Oe?2:1,console.log("Profit: "+we),_.townInfo.gold+=we,_.economyAndLaws.weeklyProfit+=we*7,console.log("Weekly profit: "+_.economyAndLaws.weeklyProfit)}return _}function ce(_){for(let K=0;K<_.plots.length;K++)for(let J=0;J<_.plots[K].length;J++)if(_.plots[K][J].active==!0&&_.plots[K][J].type>-1){const se=ie[_.plots[K][J].type];_.townInfo.happiness*=se.purchase_effect_modifiers.happiness,_.townInfo.health*=se.purchase_effect_modifiers.health,_.townInfo.community*=se.purchase_effect_modifiers.community}return _.townInfo.happiness*=_.modifiers.happiness,_.townInfo.health*=_.modifiers.health,_.townInfo.community*=_.modifiers.community,_}function ee(_){return _.gameSettings.includes("casual")&&Math.random()<.75||Ge("mine",_).length>0&&(_.townInfo.health-=7,Ge("healing_house",_).length==0&&(_=ct("The mine is actively hurting the health of the town. A Healing House can counteract this.",_,ot.BAD))),_}function Pe(_){let K=0;for(let J=0;J<_.plots.length;J++)for(let se=0;se<_.plots[J].length;se++)if(_.plots[J][se].active==!0&&_.plots[J][se].type>-1){let we=ie[_.plots[J][se].type],Oe=Xn(J,se,_)?.75:1;we.knowledge_points_per_month!=null&&(_.townInfo.knowledge_points+=Math.round(we.knowledge_points_per_month*Oe/4),K+=we.knowledge_points_per_month*Oe/4)}return _.resource_rate.knowledge=dt(K,0),_}function Ne(_,K,J,se,we){let Oe=K.townInfo.happiness/100;Oe>2?Oe=2:Oe<.75&&(Oe=.75),K.townInfo.community>150?Oe*=1.1:K.townInfo.community<100&&(Oe*=.8);let De=Ge("village_inn",K).length;J=="shop"&&De>0&&(Oe*=1.35*De),Xn(se,we,K)&&(Oe*=1.5);let He=ie[K.plots[se][we].type].active_costs.gold,Be=Math.round(_*K.economyAndLaws.tax_rate*(K.townInfo.population_count/K.townInfo.population_max)*Oe*(K.economyAndLaws.enacted.includes("tax_free")?-1:1)-He);return dt(Be,0)}return Zo(async()=>{for(;;)localStorage.reset=="true"&&(Fr(),localStorage.setItem("reset","false")),d(),await new Promise(_=>setTimeout(_,o/Vl))}),[d,qr,Br,oe,Hr]}class qm extends pe{constructor(e){super(),me(this,e,jm,null,de,{mainGameThreadLoop:0,_checkExperiment:1,_fixVariables:2,_bringModifiersBackToNormal:3,_bringStatsBackToNormal:4},null,[-1,-1])}get mainGameThreadLoop(){return this.$$.ctx[0]}get _checkExperiment(){return qr}get _fixVariables(){return Br}get _bringModifiersBackToNormal(){return this.$$.ctx[3]}get _bringStatsBackToNormal(){return Hr}}function Bm(t){return t[t.length-1]}function gn(t){return Object.keys(t).reduce((e,n)=>t[n]===void 0?e:e+`${n}:${t[n]};`,"")}function dr(t){return t?!0:void 0}gn({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Vf(t){if(t!==null)return t}function xl(t){function e(n){return n(t),()=>{}}return{subscribe:e}}function mr(t){if(!Vo)return null;const e=document.querySelector(`[data-melt-id="${t}"]`);return kt(e)?e:null}const $o=t=>new Proxy(t,{get(e,n,o){return Reflect.get(e,n,o)},ownKeys(e){return Reflect.ownKeys(e).filter(n=>n!=="action")}}),Yl=t=>typeof t=="function";mt("empty");function mt(t,e){const{stores:n,action:o,returned:i}=e??{},r=(()=>{if(n&&i)return rn(n,a=>{const s=i(a);if(Yl(s)){const u=(...f)=>$o({...s(...f),[`data-melt-${t}`]:"",action:o??nt});return u.action=o??nt,u}return $o({...s,[`data-melt-${t}`]:"",action:o??nt})});{const a=i,s=a==null?void 0:a();if(Yl(s)){const u=(...f)=>$o({...s(...f),[`data-melt-${t}`]:"",action:o??nt});return u.action=o??nt,xl(u)}return xl($o({...s,[`data-melt-${t}`]:"",action:o??nt}))}})(),l=o??(()=>{});return l.subscribe=r.subscribe,l}function Ul(t,e){const{stores:n,returned:o,action:i}=e,{subscribe:r}=rn(n,a=>o(a).map(s=>$o({...s,[`data-melt-${t}`]:"",action:i??nt}))),l=i??(()=>{});return l.subscribe=r,l}function er(t){const e=r=>r?`${t}-${r}`:t,n=r=>`data-melt-${t}${r?`-${r}`:""}`,o=r=>`[data-melt-${t}${r?`-${r}`:""}]`;return{name:e,attribute:n,selector:o,getEl:r=>document.querySelector(o(r))}}const Vo=typeof document<"u",xf=t=>typeof t=="function";function Hm(t){return t instanceof Document}function tr(t){return t instanceof Element}function kt(t){return t instanceof HTMLElement}function Kl(t){return t.pointerType==="touch"}function Gm(t){return t!==null&&typeof t=="object"}function Wm(t){return Gm(t)&&"subscribe"in t}function Gt(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function nt(){}function ht(t,e,n,o){const i=Array.isArray(e)?e:[e];return i.forEach(r=>t.addEventListener(r,n,o)),()=>{i.forEach(r=>t.removeEventListener(r,n,o))}}function yt(t,e,n,o){const i=Array.isArray(e)?e:[e];if(typeof n=="function"){const r=xm(l=>n(l));return i.forEach(l=>t.addEventListener(l,r,o)),()=>{i.forEach(l=>t.removeEventListener(l,r,o))}}return()=>void 0}function Vm(t){const e=t.currentTarget;if(!kt(e))return null;const n=new CustomEvent(`m-${t.type}`,{detail:{originalEvent:t},cancelable:!0});return e.dispatchEvent(n),n}function xm(t){return e=>{const n=Vm(e);if(!(n!=null&&n.defaultPrevented))return t(e)}}function nr(t,...e){const n={};for(const o of Object.keys(t))e.includes(o)||(n[o]=t[o]);return n}function en(t){return{...t,get:()=>Cf(t)}}en.writable=function(t){const e=Xe(t);let n=t;return{subscribe:e.subscribe,set(o){e.set(o),n=o},update(o){const i=o(n);e.set(i),n=i},get(){return n}}};en.derived=function(t,e){const n=new Map,o=()=>{const r=Array.isArray(t)?t.map(l=>l.get()):t.get();return e(r)};return{get:o,subscribe:r=>{const l=[];return(Array.isArray(t)?t:[t]).forEach(s=>{l.push(s.subscribe(()=>{r(o())}))}),r(o()),n.set(r,l),()=>{const s=n.get(r);if(s)for(const u of s)u();n.delete(r)}}}};const or=(t,e)=>{const n=en(t),o=(r,l)=>{n.update(a=>{const s=r(a);let u=s;return e&&(u=e({curr:a,next:s})),l==null||l(u),u})};return{...n,update:o,set:r=>{o(()=>r)}}};function ml(t){return new Promise(e=>setTimeout(e,t))}let Ym="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Um=(t=21)=>{let e="",n=t;for(;n--;)e+=Ym[Math.random()*64|0];return e};function Km(){return Um(10)}function pl(t){return t.reduce((e,n)=>(e[n]=Km(),e),{})}const ut={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"},Yf=()=>typeof window<"u";function Xm(){const t=navigator.userAgentData;return(t==null?void 0:t.platform)??navigator.platform}const Uf=t=>Yf()&&t.test(Xm().toLowerCase()),Jm=()=>Yf()&&!!navigator.maxTouchPoints,Zm=()=>Uf(/^mac/)&&!Jm(),Qm=()=>Uf(/mac|iphone|ipad|ipod/i),zm=()=>Qm()&&!Zm();function ep(t){const e=t.slice();return e.sort(np),tp(e)}function tp(t){if(t.length<=1)return t.slice();const e=[];for(let o=0;o<t.length;o++){const i=t[o];for(;e.length>=2;){const r=e[e.length-1],l=e[e.length-2];if((r.x-l.x)*(i.y-l.y)>=(r.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let o=t.length-1;o>=0;o--){const i=t[o];for(;n.length>=2;){const r=n[n.length-1],l=n[n.length-2];if((r.x-l.x)*(i.y-l.y)>=(r.y-l.y)*(i.x-l.x))n.pop();else break}n.push(i)}return n.pop(),e.length==1&&n.length==1&&e[0].x==n[0].x&&e[0].y==n[0].y?e:e.concat(n)}function np(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}function op(t){const e=t.getBoundingClientRect();return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom}]}function ip(t){const e=t.flatMap(n=>op(n));return ep(e)}function rp(t,e){let n=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const r=e[o].x,l=e[o].y,a=e[i].x,s=e[i].y;l>t.y!=s>t.y&&t.x<(a-r)*(t.y-l)/(s-l)+r&&(n=!n)}return n}const pr="data-melt-scroll-lock";function Xl(t,e){if(!t)return;const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}function lp(t,e,n){if(!t)return;const o=t.style.getPropertyValue(e);return t.style.setProperty(e,n),()=>{o?t.style.setProperty(e,o):t.style.removeProperty(e)}}function sp(t){const e=t.getBoundingClientRect().left;return Math.round(e)+t.scrollLeft?"paddingLeft":"paddingRight"}function ap(t){const e=document,n=e.defaultView??window,{documentElement:o,body:i}=e;if(i.hasAttribute(pr))return nt;i.setAttribute(pr,"");const l=n.innerWidth-o.clientWidth,a=()=>lp(o,"--scrollbar-width",`${l}px`),s=sp(o),u=n.getComputedStyle(i)[s],f=()=>Xl(i,{overflow:"hidden",[s]:`calc(${u} + ${l}px)`}),c=()=>{const{scrollX:m,scrollY:h,visualViewport:g}=n,p=(g==null?void 0:g.offsetLeft)??0,w=(g==null?void 0:g.offsetTop)??0,v=Xl(i,{position:"fixed",overflow:"hidden",top:`${-(h-Math.floor(w))}px`,left:`${-(m-Math.floor(p))}px`,right:"0",[s]:`calc(${u} + ${l}px)`});return()=>{v==null||v(),n.scrollTo(m,h)}},d=[a(),zm()?c():f()];return()=>{d.forEach(m=>m==null?void 0:m()),i.removeAttribute(pr)}}const up=t=>{try{Of(t)}catch{return t}};function Nt(t,e){let n;const o=rn(t,r=>{n==null||n(),n=e(r)}).subscribe(nt),i=()=>{o(),n==null||n()};return up(i),i}function $n(t){const e={};return Object.keys(t).forEach(n=>{const o=n,i=t[o];e[o]=en(Xe(i))}),e}function fp(t){let e=t.parentElement;for(;kt(e)&&!e.hasAttribute("data-portal");)e=e.parentElement;return e||"body"}function Kf(t,e){return e!==void 0?e:fp(t)==="body"?document.body:null}async function Jl(t){const{prop:e,defaultEl:n}=t;if(await Promise.all([ml(1),ul]),e===void 0){n==null||n.focus();return}const o=xf(e)?e(n):e;if(typeof o=="string"){const i=document.querySelector(o);if(!kt(i))return;i.focus()}else kt(o)&&o.focus()}function hr(t,e,n,o){const i=(t-(isNaN(e)?0:e))%o;let r=Math.abs(i)*2>=o?t+Math.sign(i)*(o-Math.abs(i)):t-i;isNaN(e)?!isNaN(n)&&r>n&&(r=Math.floor(n/o)*o):r<e?r=e:!isNaN(n)&&r>n&&(r=e+Math.floor((n-e)/o)*o);const l=o.toString(),a=l.indexOf("."),s=a>=0?l.length-a:0;if(s>0){const u=Math.pow(10,s);r=Math.round(r*u)/u}return r}Pn(void 0,t=>{function e(o){t(o),t(void 0)}return ht(document,"pointerup",e,{passive:!1,capture:!0})});const cp=Pn(void 0,t=>{function e(o){o&&o.key===ut.ESCAPE&&t(o),t(void 0)}return ht(document,"keydown",e,{passive:!1})}),Zl=(t,e={})=>{let n=nt;function o(i={}){n();const r={enabled:!0,...i},l=Wm(r.enabled)?r.enabled:Pn(r.enabled);n=Gt(cp.subscribe(a=>{var u;if(!a||!Cf(l))return;const s=a.target;if(!(!kt(s)||s.closest("[data-escapee]")!==t)){if(a.preventDefault(),r.ignore){if(xf(r.ignore)){if(r.ignore(a))return}else if(Array.isArray(r.ignore)&&r.ignore.length>0&&r.ignore.some(f=>f&&s===f))return}(u=r.handler)==null||u.call(r,a)}}),Nt(l,a=>{a?t.dataset.escapee="":delete t.dataset.escapee}))}return o(e),{update:o,destroy(){t.removeAttribute("data-escapee"),n()}}},yn=Math.min,Tt=Math.max,Ni=Math.round,ii=Math.floor,vn=t=>({x:t,y:t}),dp={left:"right",right:"left",bottom:"top",top:"bottom"},mp={start:"end",end:"start"};function Gr(t,e,n){return Tt(t,yn(e,n))}function go(t,e){return typeof t=="function"?t(e):t}function wn(t){return t.split("-")[0]}function bo(t){return t.split("-")[1]}function Xf(t){return t==="x"?"y":"x"}function hl(t){return t==="y"?"height":"width"}function Qo(t){return["top","bottom"].includes(wn(t))?"y":"x"}function _l(t){return Xf(Qo(t))}function pp(t,e,n){n===void 0&&(n=!1);const o=bo(t),i=_l(t),r=hl(i);let l=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=Ei(l)),[l,Ei(l)]}function hp(t){const e=Ei(t);return[Wr(t),e,Wr(e)]}function Wr(t){return t.replace(/start|end/g,e=>mp[e])}function _p(t,e,n){const o=["left","right"],i=["right","left"],r=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:o:e?o:i;case"left":case"right":return e?r:l;default:return[]}}function gp(t,e,n,o){const i=bo(t);let r=_p(wn(t),n==="start",o);return i&&(r=r.map(l=>l+"-"+i),e&&(r=r.concat(r.map(Wr)))),r}function Ei(t){return t.replace(/left|right|bottom|top/g,e=>dp[e])}function bp(t){return{top:0,right:0,bottom:0,left:0,...t}}function Jf(t){return typeof t!="number"?bp(t):{top:t,right:t,bottom:t,left:t}}function $i(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Ql(t,e,n){let{reference:o,floating:i}=t;const r=Qo(e),l=_l(e),a=hl(l),s=wn(e),u=r==="y",f=o.x+o.width/2-i.width/2,c=o.y+o.height/2-i.height/2,d=o[a]/2-i[a]/2;let m;switch(s){case"top":m={x:f,y:o.y-i.height};break;case"bottom":m={x:f,y:o.y+o.height};break;case"right":m={x:o.x+o.width,y:c};break;case"left":m={x:o.x-i.width,y:c};break;default:m={x:o.x,y:o.y}}switch(bo(e)){case"start":m[l]-=d*(n&&u?-1:1);break;case"end":m[l]+=d*(n&&u?-1:1);break}return m}const yp=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:l}=n,a=r.filter(Boolean),s=await(l.isRTL==null?void 0:l.isRTL(e));let u=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:c}=Ql(u,o,s),d=o,m={},h=0;for(let g=0;g<a.length;g++){const{name:p,fn:w}=a[g],{x:v,y:A,data:R,reset:q}=await w({x:f,y:c,initialPlacement:o,placement:d,strategy:i,middlewareData:m,rects:u,platform:l,elements:{reference:t,floating:e}});f=v??f,c=A??c,m={...m,[p]:{...m[p],...R}},q&&h<=50&&(h++,typeof q=="object"&&(q.placement&&(d=q.placement),q.rects&&(u=q.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):q.rects),{x:f,y:c}=Ql(u,d,s)),g=-1)}return{x:f,y:c,placement:d,strategy:i,middlewareData:m}};async function gl(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:r,rects:l,elements:a,strategy:s}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:c="floating",altBoundary:d=!1,padding:m=0}=go(e,t),h=Jf(m),p=a[d?c==="floating"?"reference":"floating":c],w=$i(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(p)))==null||n?p:p.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:s})),v=c==="floating"?{...l.floating,x:o,y:i}:l.reference,A=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),R=await(r.isElement==null?void 0:r.isElement(A))?await(r.getScale==null?void 0:r.getScale(A))||{x:1,y:1}:{x:1,y:1},q=$i(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:A,strategy:s}):v);return{top:(w.top-q.top+h.top)/R.y,bottom:(q.bottom-w.bottom+h.bottom)/R.y,left:(w.left-q.left+h.left)/R.x,right:(q.right-w.right+h.right)/R.x}}const vp=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:i,rects:r,platform:l,elements:a,middlewareData:s}=e,{element:u,padding:f=0}=go(t,e)||{};if(u==null)return{};const c=Jf(f),d={x:n,y:o},m=_l(i),h=hl(m),g=await l.getDimensions(u),p=m==="y",w=p?"top":"left",v=p?"bottom":"right",A=p?"clientHeight":"clientWidth",R=r.reference[h]+r.reference[m]-d[m]-r.floating[h],q=d[m]-r.reference[m],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let E=F?F[A]:0;(!E||!await(l.isElement==null?void 0:l.isElement(F)))&&(E=a.floating[A]||r.floating[h]);const I=R/2-q/2,N=E/2-g[h]/2-1,j=yn(c[w],N),C=yn(c[v],N),b=j,T=E-g[h]-C,D=E/2-g[h]/2+I,W=Gr(b,D,T),L=!s.arrow&&bo(i)!=null&&D!==W&&r.reference[h]/2-(D<b?j:C)-g[h]/2<0,U=L?D<b?D-b:D-T:0;return{[m]:d[m]+U,data:{[m]:W,centerOffset:D-W-U,...L&&{alignmentOffset:U}},reset:L}}}),wp=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:r,rects:l,initialPlacement:a,platform:s,elements:u}=e,{mainAxis:f=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...p}=go(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const w=wn(i),v=wn(a)===a,A=await(s.isRTL==null?void 0:s.isRTL(u.floating)),R=d||(v||!g?[Ei(a)]:hp(a));!d&&h!=="none"&&R.push(...gp(a,g,h,A));const q=[a,...R],F=await gl(e,p),E=[];let I=((o=r.flip)==null?void 0:o.overflows)||[];if(f&&E.push(F[w]),c){const b=pp(i,l,A);E.push(F[b[0]],F[b[1]])}if(I=[...I,{placement:i,overflows:E}],!E.every(b=>b<=0)){var N,j;const b=(((N=r.flip)==null?void 0:N.index)||0)+1,T=q[b];if(T)return{data:{index:b,overflows:I},reset:{placement:T}};let D=(j=I.filter(W=>W.overflows[0]<=0).sort((W,L)=>W.overflows[1]-L.overflows[1])[0])==null?void 0:j.placement;if(!D)switch(m){case"bestFit":{var C;const W=(C=I.map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,X)=>U+X,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:C[0];W&&(D=W);break}case"initialPlacement":D=a;break}if(i!==D)return{reset:{placement:D}}}return{}}}};async function kp(t,e){const{placement:n,platform:o,elements:i}=t,r=await(o.isRTL==null?void 0:o.isRTL(i.floating)),l=wn(n),a=bo(n),s=Qo(n)==="y",u=["left","top"].includes(l)?-1:1,f=r&&s?-1:1,c=go(e,t);let{mainAxis:d,crossAxis:m,alignmentAxis:h}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return a&&typeof h=="number"&&(m=a==="end"?h*-1:h),s?{x:m*f,y:d*u}:{x:d*u,y:m*f}}const Cp=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:i,y:r,placement:l,middlewareData:a}=e,s=await kp(e,t);return l===((n=a.offset)==null?void 0:n.placement)&&(o=a.arrow)!=null&&o.alignmentOffset?{}:{x:i+s.x,y:r+s.y,data:{...s,placement:l}}}}},Tp=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:r=!0,crossAxis:l=!1,limiter:a={fn:p=>{let{x:w,y:v}=p;return{x:w,y:v}}},...s}=go(t,e),u={x:n,y:o},f=await gl(e,s),c=Qo(wn(i)),d=Xf(c);let m=u[d],h=u[c];if(r){const p=d==="y"?"top":"left",w=d==="y"?"bottom":"right",v=m+f[p],A=m-f[w];m=Gr(v,m,A)}if(l){const p=c==="y"?"top":"left",w=c==="y"?"bottom":"right",v=h+f[p],A=h-f[w];h=Gr(v,h,A)}const g=a.fn({...e,[d]:m,[c]:h});return{...g,data:{x:g.x-n,y:g.y-o}}}}},Sp=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:i,elements:r}=e,{apply:l=()=>{},...a}=go(t,e),s=await gl(e,a),u=wn(n),f=bo(n),c=Qo(n)==="y",{width:d,height:m}=o.floating;let h,g;u==="top"||u==="bottom"?(h=u,g=f===(await(i.isRTL==null?void 0:i.isRTL(r.floating))?"start":"end")?"left":"right"):(g=u,h=f==="end"?"top":"bottom");const p=m-s[h],w=d-s[g],v=!e.middlewareData.shift;let A=p,R=w;if(c){const F=d-s.left-s.right;R=f||v?yn(w,F):F}else{const F=m-s.top-s.bottom;A=f||v?yn(p,F):F}if(v&&!f){const F=Tt(s.left,0),E=Tt(s.right,0),I=Tt(s.top,0),N=Tt(s.bottom,0);c?R=d-2*(F!==0||E!==0?F+E:Tt(s.left,s.right)):A=m-2*(I!==0||N!==0?I+N:Tt(s.top,s.bottom))}await l({...e,availableWidth:R,availableHeight:A});const q=await i.getDimensions(r.floating);return d!==q.width||m!==q.height?{reset:{rects:!0}}:{}}}};function kn(t){return Zf(t)?(t.nodeName||"").toLowerCase():"#document"}function At(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ln(t){var e;return(e=(Zf(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Zf(t){return t instanceof Node||t instanceof At(t).Node}function nn(t){return t instanceof Element||t instanceof At(t).Element}function Vt(t){return t instanceof HTMLElement||t instanceof At(t).HTMLElement}function zl(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof At(t).ShadowRoot}function zo(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=$t(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function Ap(t){return["table","td","th"].includes(kn(t))}function bl(t){const e=yl(),n=$t(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Ip(t){let e=uo(t);for(;Vt(e)&&!ir(e);){if(bl(e))return e;e=uo(e)}return null}function yl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ir(t){return["html","body","#document"].includes(kn(t))}function $t(t){return At(t).getComputedStyle(t)}function rr(t){return nn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function uo(t){if(kn(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zl(t)&&t.host||ln(t);return zl(e)?e.host:e}function Qf(t){const e=uo(t);return ir(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vt(e)&&zo(e)?e:Qf(e)}function xo(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Qf(t),r=i===((o=t.ownerDocument)==null?void 0:o.body),l=At(i);return r?e.concat(l,l.visualViewport||[],zo(i)?i:[],l.frameElement&&n?xo(l.frameElement):[]):e.concat(i,xo(i,[],n))}function zf(t){const e=$t(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=Vt(t),r=i?t.offsetWidth:n,l=i?t.offsetHeight:o,a=Ni(n)!==r||Ni(o)!==l;return a&&(n=r,o=l),{width:n,height:o,$:a}}function vl(t){return nn(t)?t:t.contextElement}function eo(t){const e=vl(t);if(!Vt(e))return vn(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:r}=zf(e);let l=(r?Ni(n.width):n.width)/o,a=(r?Ni(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const Mp=vn(0);function ec(t){const e=At(t);return!yl()||!e.visualViewport?Mp:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Op(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==At(t)?!1:e}function Rn(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=vl(t);let l=vn(1);e&&(o?nn(o)&&(l=eo(o)):l=eo(t));const a=Op(r,n,o)?ec(r):vn(0);let s=(i.left+a.x)/l.x,u=(i.top+a.y)/l.y,f=i.width/l.x,c=i.height/l.y;if(r){const d=At(r),m=o&&nn(o)?At(o):o;let h=d,g=h.frameElement;for(;g&&o&&m!==h;){const p=eo(g),w=g.getBoundingClientRect(),v=$t(g),A=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*p.x,R=w.top+(g.clientTop+parseFloat(v.paddingTop))*p.y;s*=p.x,u*=p.y,f*=p.x,c*=p.y,s+=A,u+=R,h=At(g),g=h.frameElement}}return $i({width:f,height:c,x:s,y:u})}const Pp=[":popover-open",":modal"];function tc(t){return Pp.some(e=>{try{return t.matches(e)}catch{return!1}})}function Np(t){let{elements:e,rect:n,offsetParent:o,strategy:i}=t;const r=i==="fixed",l=ln(o),a=e?tc(e.floating):!1;if(o===l||a&&r)return n;let s={scrollLeft:0,scrollTop:0},u=vn(1);const f=vn(0),c=Vt(o);if((c||!c&&!r)&&((kn(o)!=="body"||zo(l))&&(s=rr(o)),Vt(o))){const d=Rn(o);u=eo(o),f.x=d.x+o.clientLeft,f.y=d.y+o.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-s.scrollLeft*u.x+f.x,y:n.y*u.y-s.scrollTop*u.y+f.y}}function Ep(t){return Array.from(t.getClientRects())}function nc(t){return Rn(ln(t)).left+rr(t).scrollLeft}function $p(t){const e=ln(t),n=rr(t),o=t.ownerDocument.body,i=Tt(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),r=Tt(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let l=-n.scrollLeft+nc(t);const a=-n.scrollTop;return $t(o).direction==="rtl"&&(l+=Tt(e.clientWidth,o.clientWidth)-i),{width:i,height:r,x:l,y:a}}function Rp(t,e){const n=At(t),o=ln(t),i=n.visualViewport;let r=o.clientWidth,l=o.clientHeight,a=0,s=0;if(i){r=i.width,l=i.height;const u=yl();(!u||u&&e==="fixed")&&(a=i.offsetLeft,s=i.offsetTop)}return{width:r,height:l,x:a,y:s}}function Lp(t,e){const n=Rn(t,!0,e==="fixed"),o=n.top+t.clientTop,i=n.left+t.clientLeft,r=Vt(t)?eo(t):vn(1),l=t.clientWidth*r.x,a=t.clientHeight*r.y,s=i*r.x,u=o*r.y;return{width:l,height:a,x:s,y:u}}function es(t,e,n){let o;if(e==="viewport")o=Rp(t,n);else if(e==="document")o=$p(ln(t));else if(nn(e))o=Lp(e,n);else{const i=ec(t);o={...e,x:e.x-i.x,y:e.y-i.y}}return $i(o)}function oc(t,e){const n=uo(t);return n===e||!nn(n)||ir(n)?!1:$t(n).position==="fixed"||oc(n,e)}function Dp(t,e){const n=e.get(t);if(n)return n;let o=xo(t,[],!1).filter(a=>nn(a)&&kn(a)!=="body"),i=null;const r=$t(t).position==="fixed";let l=r?uo(t):t;for(;nn(l)&&!ir(l);){const a=$t(l),s=bl(l);!s&&a.position==="fixed"&&(i=null),(r?!s&&!i:!s&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||zo(l)&&!s&&oc(t,l))?o=o.filter(f=>f!==l):i=a,l=uo(l)}return e.set(t,o),o}function Fp(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const l=[...n==="clippingAncestors"?Dp(e,this._c):[].concat(n),o],a=l[0],s=l.reduce((u,f)=>{const c=es(e,f,i);return u.top=Tt(c.top,u.top),u.right=yn(c.right,u.right),u.bottom=yn(c.bottom,u.bottom),u.left=Tt(c.left,u.left),u},es(e,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function jp(t){const{width:e,height:n}=zf(t);return{width:e,height:n}}function qp(t,e,n){const o=Vt(e),i=ln(e),r=n==="fixed",l=Rn(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const s=vn(0);if(o||!o&&!r)if((kn(e)!=="body"||zo(i))&&(a=rr(e)),o){const c=Rn(e,!0,r,e);s.x=c.x+e.clientLeft,s.y=c.y+e.clientTop}else i&&(s.x=nc(i));const u=l.left+a.scrollLeft-s.x,f=l.top+a.scrollTop-s.y;return{x:u,y:f,width:l.width,height:l.height}}function ts(t,e){return!Vt(t)||$t(t).position==="fixed"?null:e?e(t):t.offsetParent}function ic(t,e){const n=At(t);if(!Vt(t)||tc(t))return n;let o=ts(t,e);for(;o&&Ap(o)&&$t(o).position==="static";)o=ts(o,e);return o&&(kn(o)==="html"||kn(o)==="body"&&$t(o).position==="static"&&!bl(o))?n:o||Ip(t)||n}const Bp=async function(t){const e=this.getOffsetParent||ic,n=this.getDimensions;return{reference:qp(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function Hp(t){return $t(t).direction==="rtl"}const Gp={convertOffsetParentRelativeRectToViewportRelativeRect:Np,getDocumentElement:ln,getClippingRect:Fp,getOffsetParent:ic,getElementRects:Bp,getClientRects:Ep,getDimensions:jp,getScale:eo,isElement:nn,isRTL:Hp};function Wp(t,e){let n=null,o;const i=ln(t);function r(){var a;clearTimeout(o),(a=n)==null||a.disconnect(),n=null}function l(a,s){a===void 0&&(a=!1),s===void 0&&(s=1),r();const{left:u,top:f,width:c,height:d}=t.getBoundingClientRect();if(a||e(),!c||!d)return;const m=ii(f),h=ii(i.clientWidth-(u+c)),g=ii(i.clientHeight-(f+d)),p=ii(u),v={rootMargin:-m+"px "+-h+"px "+-g+"px "+-p+"px",threshold:Tt(0,yn(1,s))||1};let A=!0;function R(q){const F=q[0].intersectionRatio;if(F!==s){if(!A)return l();F?l(!1,F):o=setTimeout(()=>{l(!1,1e-7)},100)}A=!1}try{n=new IntersectionObserver(R,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(R,v)}n.observe(t)}return l(!0),r}function Vp(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:s=!1}=o,u=vl(t),f=i||r?[...u?xo(u):[],...xo(e)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),r&&w.addEventListener("resize",n)});const c=u&&a?Wp(u,n):null;let d=-1,m=null;l&&(m=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var A;(A=m)==null||A.observe(e)})),n()}),u&&!s&&m.observe(u),m.observe(e));let h,g=s?Rn(t):null;s&&p();function p(){const w=Rn(t);g&&(w.x!==g.x||w.y!==g.y||w.width!==g.width||w.height!==g.height)&&n(),g=w,h=requestAnimationFrame(p)}return n(),()=>{var w;f.forEach(v=>{i&&v.removeEventListener("scroll",n),r&&v.removeEventListener("resize",n)}),c==null||c(),(w=m)==null||w.disconnect(),m=null,s&&cancelAnimationFrame(h)}}const xp=Tp,Yp=wp,Up=Sp,Kp=vp,Xp=(t,e,n)=>{const o=new Map,i={platform:Gp,...n},r={...i.platform,_c:o};return yp(t,e,{...i,platform:r})},Jp={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},Zp={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Qp(t,e,n={}){if(!e||!t||n===null)return{destroy:nt};const o={...Jp,...n},i=e.querySelector("[data-arrow=true]"),r=[];o.flip&&r.push(Yp({boundary:o.boundary,padding:o.overflowPadding}));const l=kt(i)?i.offsetHeight/2:0;if(o.gutter||o.offset){const s=o.gutter?{mainAxis:o.gutter}:o.offset;(s==null?void 0:s.mainAxis)!=null&&(s.mainAxis+=l),r.push(Cp(s))}r.push(xp({boundary:o.boundary,crossAxis:o.overlap,padding:o.overflowPadding})),i&&r.push(Kp({element:i,padding:8})),r.push(Up({padding:o.overflowPadding,apply({rects:s,availableHeight:u,availableWidth:f}){o.sameWidth&&Object.assign(e.style,{width:`${Math.round(s.reference.width)}px`,minWidth:"unset"}),o.fitViewport&&Object.assign(e.style,{maxWidth:`${f}px`,maxHeight:`${u}px`})}}));function a(){if(!t||!e)return;const{placement:s,strategy:u}=o;Xp(t,e,{placement:s,middleware:r,strategy:u}).then(f=>{const c=Math.round(f.x),d=Math.round(f.y);if(Object.assign(e.style,{position:o.strategy,top:`${d}px`,left:`${c}px`}),kt(i)&&f.middlewareData.arrow){const{x:m,y:h}=f.middlewareData.arrow,g=f.placement.split("-")[0];Object.assign(i.style,{position:"absolute",left:m!=null?`${m}px`:"",top:h!=null?`${h}px`:"",[g]:`calc(100% - ${l}px)`,transform:Zp[g],backgroundColor:"inherit",zIndex:"inherit"})}return f})}return Object.assign(e.style,{position:o.strategy}),{destroy:Vp(t,e,a)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var rc=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ri=rc.join(","),lc=typeof Element>"u",Ln=lc?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Li=!lc&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Di=function t(e,n){var o;n===void 0&&(n=!0);var i=e==null||(o=e.getAttribute)===null||o===void 0?void 0:o.call(e,"inert"),r=i===""||i==="true",l=r||n&&e&&t(e.parentNode);return l},zp=function(e){var n,o=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return o===""||o==="true"},sc=function(e,n,o){if(Di(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ri));return n&&Ln.call(e,Ri)&&i.unshift(e),i=i.filter(o),i},ac=function t(e,n,o){for(var i=[],r=Array.from(e);r.length;){var l=r.shift();if(!Di(l,!1))if(l.tagName==="SLOT"){var a=l.assignedElements(),s=a.length?a:l.children,u=t(s,!0,o);o.flatten?i.push.apply(i,u):i.push({scopeParent:l,candidates:u})}else{var f=Ln.call(l,Ri);f&&o.filter(l)&&(n||!e.includes(l))&&i.push(l);var c=l.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(l),d=!Di(c,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(l));if(c&&d){var m=t(c===!0?l.children:c.children,!0,o);o.flatten?i.push.apply(i,m):i.push({scopeParent:l,candidates:m})}else r.unshift.apply(r,l.children)}}return i},uc=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},An=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||zp(e))&&!uc(e)?0:e.tabIndex},eh=function(e,n){var o=An(e);return o<0&&n&&!uc(e)?0:o},th=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},fc=function(e){return e.tagName==="INPUT"},nh=function(e){return fc(e)&&e.type==="hidden"},oh=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(o){return o.tagName==="SUMMARY"});return n},ih=function(e,n){for(var o=0;o<e.length;o++)if(e[o].checked&&e[o].form===n)return e[o]},rh=function(e){if(!e.name)return!0;var n=e.form||Li(e),o=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=o(window.CSS.escape(e.name));else try{i=o(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var r=ih(i,e.form);return!r||r===e},lh=function(e){return fc(e)&&e.type==="radio"},sh=function(e){return lh(e)&&!rh(e)},ah=function(e){var n,o=e&&Li(e),i=(n=o)===null||n===void 0?void 0:n.host,r=!1;if(o&&o!==e){var l,a,s;for(r=!!((l=i)!==null&&l!==void 0&&(a=l.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(s=e.ownerDocument)!==null&&s!==void 0&&s.contains(e));!r&&i;){var u,f,c;o=Li(i),i=(u=o)===null||u===void 0?void 0:u.host,r=!!((f=i)!==null&&f!==void 0&&(c=f.ownerDocument)!==null&&c!==void 0&&c.contains(i))}}return r},ns=function(e){var n=e.getBoundingClientRect(),o=n.width,i=n.height;return o===0&&i===0},uh=function(e,n){var o=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=Ln.call(e,"details>summary:first-of-type"),l=r?e.parentElement:e;if(Ln.call(l,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var s=e.parentElement,u=Li(e);if(s&&!s.shadowRoot&&i(s)===!0)return ns(e);e.assignedSlot?e=e.assignedSlot:!s&&u!==e.ownerDocument?e=u.host:e=s}e=a}if(ah(e))return!e.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return ns(e);return!1},fh=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var o=0;o<n.children.length;o++){var i=n.children.item(o);if(i.tagName==="LEGEND")return Ln.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Fi=function(e,n){return!(n.disabled||Di(n)||nh(n)||uh(n,e)||oh(n)||fh(n))},Vr=function(e,n){return!(sh(n)||An(n)<0||!Fi(e,n))},ch=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},dh=function t(e){var n=[],o=[];return e.forEach(function(i,r){var l=!!i.scopeParent,a=l?i.scopeParent:i,s=eh(a,l),u=l?t(i.candidates):a;s===0?l?n.push.apply(n,u):n.push(a):o.push({documentOrder:r,tabIndex:s,item:i,isScope:l,content:u})}),o.sort(th).reduce(function(i,r){return r.isScope?i.push.apply(i,r.content):i.push(r.content),i},[]).concat(n)},mh=function(e,n){n=n||{};var o;return n.getShadowRoot?o=ac([e],n.includeContainer,{filter:Vr.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ch}):o=sc(e,n.includeContainer,Vr.bind(null,n)),dh(o)},ph=function(e,n){n=n||{};var o;return n.getShadowRoot?o=ac([e],n.includeContainer,{filter:Fi.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):o=sc(e,n.includeContainer,Fi.bind(null,n)),o},Yn=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ln.call(e,Ri)===!1?!1:Vr(n,e)},hh=rc.concat("iframe").join(","),_r=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ln.call(e,hh)===!1?!1:Fi(n,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function os(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,o)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?os(Object(n),!0).forEach(function(o){_h(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _h(t,e,n){return e=bh(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gh(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bh(t){var e=gh(t,"string");return typeof e=="symbol"?e:String(e)}var rs={activateTrap:function(e,n){if(e.length>0){var o=e[e.length-1];o!==n&&o.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var o=e.indexOf(n);o!==-1&&e.splice(o,1),e.length>0&&e[e.length-1].unpause()}},yh=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},vh=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Go=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},wh=function(e){return Go(e)&&!e.shiftKey},kh=function(e){return Go(e)&&e.shiftKey},ls=function(e){return setTimeout(e,0)},ss=function(e,n){var o=-1;return e.every(function(i,r){return n(i)?(o=r,!1):!0}),o},Oo=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,o):e},ri=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ch=[],Th=function(e,n){var o=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||Ch,r=is({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:wh,isKeyBackward:kh},n),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,s=function(b,T,D){return b&&b[T]!==void 0?b[T]:r[D||T]},u=function(b,T){var D=typeof(T==null?void 0:T.composedPath)=="function"?T.composedPath():void 0;return l.containerGroups.findIndex(function(W){var L=W.container,U=W.tabbableNodes;return L.contains(b)||(D==null?void 0:D.includes(L))||U.find(function(X){return X===b})})},f=function(b){var T=r[b];if(typeof T=="function"){for(var D=arguments.length,W=new Array(D>1?D-1:0),L=1;L<D;L++)W[L-1]=arguments[L];T=T.apply(void 0,W)}if(T===!0&&(T=void 0),!T){if(T===void 0||T===!1)return T;throw new Error("`".concat(b,"` was specified but was not a node, or did not return a node"))}var U=T;if(typeof T=="string"&&(U=o.querySelector(T),!U))throw new Error("`".concat(b,"` as selector refers to no known node"));return U},c=function(){var b=f("initialFocus");if(b===!1)return!1;if(b===void 0||!_r(b,r.tabbableOptions))if(u(o.activeElement)>=0)b=o.activeElement;else{var T=l.tabbableGroups[0],D=T&&T.firstTabbableNode;b=D||f("fallbackFocus")}if(!b)throw new Error("Your focus-trap needs to have at least one focusable element");return b},d=function(){if(l.containerGroups=l.containers.map(function(b){var T=mh(b,r.tabbableOptions),D=ph(b,r.tabbableOptions),W=T.length>0?T[0]:void 0,L=T.length>0?T[T.length-1]:void 0,U=D.find(function(z){return Yn(z)}),X=D.slice().reverse().find(function(z){return Yn(z)}),Q=!!T.find(function(z){return An(z)>0});return{container:b,tabbableNodes:T,focusableNodes:D,posTabIndexesFound:Q,firstTabbableNode:W,lastTabbableNode:L,firstDomTabbableNode:U,lastDomTabbableNode:X,nextTabbableNode:function(ne){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ae=T.indexOf(ne);return Ae<0?oe?D.slice(D.indexOf(ne)+1).find(function(ce){return Yn(ce)}):D.slice(0,D.indexOf(ne)).reverse().find(function(ce){return Yn(ce)}):T[Ae+(oe?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(b){return b.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(b){return b.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},m=function C(b){var T=b.activeElement;if(T)return T.shadowRoot&&T.shadowRoot.activeElement!==null?C(T.shadowRoot):T},h=function C(b){if(b!==!1&&b!==m(document)){if(!b||!b.focus){C(c());return}b.focus({preventScroll:!!r.preventScroll}),l.mostRecentlyFocusedNode=b,yh(b)&&b.select()}},g=function(b){var T=f("setReturnFocus",b);return T||(T===!1?!1:b)},p=function(b){var T=b.target,D=b.event,W=b.isBackward,L=W===void 0?!1:W;T=T||ri(D),d();var U=null;if(l.tabbableGroups.length>0){var X=u(T,D),Q=X>=0?l.containerGroups[X]:void 0;if(X<0)L?U=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:U=l.tabbableGroups[0].firstTabbableNode;else if(L){var z=ss(l.tabbableGroups,function(Pe){var Ne=Pe.firstTabbableNode;return T===Ne});if(z<0&&(Q.container===T||_r(T,r.tabbableOptions)&&!Yn(T,r.tabbableOptions)&&!Q.nextTabbableNode(T,!1))&&(z=X),z>=0){var ne=z===0?l.tabbableGroups.length-1:z-1,oe=l.tabbableGroups[ne];U=An(T)>=0?oe.lastTabbableNode:oe.lastDomTabbableNode}else Go(D)||(U=Q.nextTabbableNode(T,!1))}else{var Ae=ss(l.tabbableGroups,function(Pe){var Ne=Pe.lastTabbableNode;return T===Ne});if(Ae<0&&(Q.container===T||_r(T,r.tabbableOptions)&&!Yn(T,r.tabbableOptions)&&!Q.nextTabbableNode(T))&&(Ae=X),Ae>=0){var ce=Ae===l.tabbableGroups.length-1?0:Ae+1,ee=l.tabbableGroups[ce];U=An(T)>=0?ee.firstTabbableNode:ee.firstDomTabbableNode}else Go(D)||(U=Q.nextTabbableNode(T))}}else U=f("fallbackFocus");return U},w=function(b){var T=ri(b);if(!(u(T,b)>=0)){if(Oo(r.clickOutsideDeactivates,b)){a.deactivate({returnFocus:r.returnFocusOnDeactivate});return}Oo(r.allowOutsideClick,b)||b.preventDefault()}},v=function(b){var T=ri(b),D=u(T,b)>=0;if(D||T instanceof Document)D&&(l.mostRecentlyFocusedNode=T);else{b.stopImmediatePropagation();var W,L=!0;if(l.mostRecentlyFocusedNode)if(An(l.mostRecentlyFocusedNode)>0){var U=u(l.mostRecentlyFocusedNode),X=l.containerGroups[U].tabbableNodes;if(X.length>0){var Q=X.findIndex(function(z){return z===l.mostRecentlyFocusedNode});Q>=0&&(r.isKeyForward(l.recentNavEvent)?Q+1<X.length&&(W=X[Q+1],L=!1):Q-1>=0&&(W=X[Q-1],L=!1))}}else l.containerGroups.some(function(z){return z.tabbableNodes.some(function(ne){return An(ne)>0})})||(L=!1);else L=!1;L&&(W=p({target:l.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(l.recentNavEvent)})),h(W||l.mostRecentlyFocusedNode||c())}l.recentNavEvent=void 0},A=function(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=b;var D=p({event:b,isBackward:T});D&&(Go(b)&&b.preventDefault(),h(D))},R=function(b){if(vh(b)&&Oo(r.escapeDeactivates,b)!==!1){b.preventDefault(),a.deactivate();return}(r.isKeyForward(b)||r.isKeyBackward(b))&&A(b,r.isKeyBackward(b))},q=function(b){var T=ri(b);u(T,b)>=0||Oo(r.clickOutsideDeactivates,b)||Oo(r.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},F=function(){if(l.active)return rs.activateTrap(i,a),l.delayInitialFocusTimer=r.delayInitialFocus?ls(function(){h(c())}):h(c()),o.addEventListener("focusin",v,!0),o.addEventListener("mousedown",w,{capture:!0,passive:!1}),o.addEventListener("touchstart",w,{capture:!0,passive:!1}),o.addEventListener("click",q,{capture:!0,passive:!1}),o.addEventListener("keydown",R,{capture:!0,passive:!1}),a},E=function(){if(l.active)return o.removeEventListener("focusin",v,!0),o.removeEventListener("mousedown",w,!0),o.removeEventListener("touchstart",w,!0),o.removeEventListener("click",q,!0),o.removeEventListener("keydown",R,!0),a},I=function(b){var T=b.some(function(D){var W=Array.from(D.removedNodes);return W.some(function(L){return L===l.mostRecentlyFocusedNode})});T&&h(c())},N=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(I):void 0,j=function(){N&&(N.disconnect(),l.active&&!l.paused&&l.containers.map(function(b){N.observe(b,{subtree:!0,childList:!0})}))};return a={get active(){return l.active},get paused(){return l.paused},activate:function(b){if(l.active)return this;var T=s(b,"onActivate"),D=s(b,"onPostActivate"),W=s(b,"checkCanFocusTrap");W||d(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=o.activeElement,T==null||T();var L=function(){W&&d(),F(),j(),D==null||D()};return W?(W(l.containers.concat()).then(L,L),this):(L(),this)},deactivate:function(b){if(!l.active)return this;var T=is({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},b);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,E(),l.active=!1,l.paused=!1,j(),rs.deactivateTrap(i,a);var D=s(T,"onDeactivate"),W=s(T,"onPostDeactivate"),L=s(T,"checkCanReturnFocus"),U=s(T,"returnFocus","returnFocusOnDeactivate");D==null||D();var X=function(){ls(function(){U&&h(g(l.nodeFocusedBeforeActivation)),W==null||W()})};return U&&L?(L(g(l.nodeFocusedBeforeActivation)).then(X,X),this):(X(),this)},pause:function(b){if(l.paused||!l.active)return this;var T=s(b,"onPause"),D=s(b,"onPostPause");return l.paused=!0,T==null||T(),E(),j(),D==null||D(),this},unpause:function(b){if(!l.paused||!l.active)return this;var T=s(b,"onUnpause"),D=s(b,"onPostUnpause");return l.paused=!1,T==null||T(),d(),F(),j(),D==null||D(),this},updateContainerElements:function(b){var T=[].concat(b).filter(Boolean);return l.containers=T.map(function(D){return typeof D=="string"?o.querySelector(D):D}),l.active&&d(),j(),this}},a.updateContainerElements(e),a};function Sh(t={}){let e;const{immediate:n,...o}=t,i=Xe(!1),r=Xe(!1),l=c=>e==null?void 0:e.activate(c),a=c=>{e==null||e.deactivate(c)},s=()=>{e&&(e.pause(),r.set(!0))},u=()=>{e&&(e.unpause(),r.set(!1))};return{useFocusTrap:c=>(e=Th(c,{...o,onActivate(){var d;i.set(!0),(d=t.onActivate)==null||d.call(t)},onDeactivate(){var d;i.set(!1),(d=t.onDeactivate)==null||d.call(t)}}),n&&l(),{destroy(){a(),e=void 0}}),hasFocus:Fl(i),isPaused:Fl(r),activate:l,deactivate:a,pause:s,unpause:u}}const li=[];function Ah(t,e){let n=nt;function o(){const r=li.indexOf(t);r>=0&&li.splice(r,1)}function i(r){n();const{open:l,onClose:a,shouldCloseOnInteractOutside:s,closeOnInteractOutside:u}=r;ml(100).then(()=>{l?li.push(t):o()});function f(){return Bm(li)===t}function c(){f()&&a&&(a(),o())}function d(h){const g=h.target;tr(g)&&g&&f()&&(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation())}function m(h){s!=null&&s(h)&&f()&&(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),c())}n=Ih(t,{onInteractOutsideStart:d,onInteractOutside:u?m:void 0,enabled:l}).destroy}return i(e),{update:i,destroy(){o(),n()}}}const cc=(t,e="body")=>{let n;if(!kt(e)&&typeof e!="string")return{destroy:nt};async function o(r){if(e=r,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await ul(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.dataset.portal="",n.appendChild(t),t.hidden=!1}function i(){t.remove()}return o(e),{update:o,destroy:i}};function Ih(t,e){let n=nt,o=!1,i=!1,r=!1;function l(u){n();const{onInteractOutside:f,onInteractOutsideStart:c,enabled:d}=u;if(!d)return;function m(p){f&&as(p,t)&&(c==null||c(p));const w=p.target;tr(w)&&dc(t,w)&&(i=!0),o=!0}function h(p){f==null||f(p)}const g=Mh(t);if(typeof PointerEvent<"u"){const p=w=>{a(w)&&h(w),s()};n=Gt(ht(g,"pointerdown",m,!0),ht(g,"pointerup",p,!0))}else{const p=v=>{r?r=!1:a(v)&&h(v),s()},w=v=>{r=!0,a(v)&&h(v),s()};n=Gt(ht(g,"mousedown",m,!0),ht(g,"mouseup",p,!0),ht(g,"touchstart",m,!0),ht(g,"touchend",w,!0))}}function a(u){return!!(o&&!i&&as(u,t))}function s(){o=!1,i=!1}return l(e),{update:l,destroy:n}}function as(t,e){if("button"in t&&t.button>0)return!1;const n=t.target;if(!tr(n))return!1;const o=n.ownerDocument;return!o||!o.documentElement.contains(n)?!1:e&&!dc(e,n)}function dc(t,e){return t===e||t.contains(e)}function Mh(t){return(t==null?void 0:t.ownerDocument)??document}Pn(!1),Pn(!1),Pn(void 0);function Oh(){return{elements:{root:mt("label",{action:e=>({destroy:yt(e,"mousedown",o=>{!o.defaultPrevented&&o.detail>1&&o.preventDefault()})})})}}}const{name:Tn}=er("dialog"),Ph={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Nh=["content","title","description"];function mc(t){const e={...Ph,...t},n=$n(nr(e,"ids")),{preventScroll:o,closeOnEscape:i,closeOnOutsideClick:r,role:l,portal:a,forceVisible:s,openFocus:u,closeFocus:f,onOutsideClick:c}=n,d=en.writable(null),m=$n({...pl(Nh),...e.ids}),h=e.open??Xe(e.defaultOpen),g=or(h,e==null?void 0:e.onOpenChange),p=rn([g,s],([C,b])=>C||b);let w=nt;function v(C){const b=C.currentTarget,T=C.currentTarget;!kt(b)||!kt(T)||(g.set(!0),d.set(T))}function A(){g.set(!1),Jl({prop:f.get(),defaultEl:d.get()})}const R=mt(Tn("trigger"),{stores:[g],returned:([C])=>({"aria-haspopup":"dialog","aria-expanded":C,type:"button"}),action:C=>({destroy:Gt(yt(C,"click",T=>{v(T)}),yt(C,"keydown",T=>{T.key!==ut.ENTER&&T.key!==ut.SPACE||(T.preventDefault(),v(T))}))})}),q=mt(Tn("overlay"),{stores:[p,g],returned:([C,b])=>({hidden:C?void 0:!0,tabindex:-1,style:gn({display:C?void 0:"none"}),"aria-hidden":!0,"data-state":b?"open":"closed"}),action:C=>{let b=nt;if(i.get()){const T=Zl(C,{handler:()=>{A()}});T&&T.destroy&&(b=T.destroy)}return{destroy(){b()}}}}),F=mt(Tn("content"),{stores:[p,m.content,m.description,m.title,g],returned:([C,b,T,D,W])=>({id:b,role:l.get(),"aria-describedby":T,"aria-labelledby":D,"aria-modal":C?"true":void 0,"data-state":W?"open":"closed",tabindex:-1,hidden:C?void 0:!0,style:gn({display:C?void 0:"none"})}),action:C=>{let b=nt,T=nt;const D=Gt(Nt([g],([W])=>{if(!W)return;const L=Sh({immediate:!1,escapeDeactivates:!0,clickOutsideDeactivates:!0,returnFocusOnDeactivate:!1,fallbackFocus:C});b=L.activate,T=L.deactivate;const U=L.useFocusTrap(C);return U&&U.destroy?U.destroy:L.deactivate}),Nt([r,g],([W,L])=>Ah(C,{open:L,closeOnInteractOutside:W,onClose(){A()},shouldCloseOnInteractOutside(U){var X;return(X=c.get())==null||X(U),!U.defaultPrevented}}).destroy),Nt([i],([W])=>{if(!W)return nt;const L=Zl(C,{handler:()=>{A()}});return L&&L.destroy?L.destroy:nt}),Nt([p],([W])=>{ul().then(()=>{W?b():T()})}));return{destroy:()=>{w(),D()}}}}),E=mt(Tn("portalled"),{stores:a,returned:C=>({"data-portal":Vf(C)}),action:C=>{const b=Nt([a],([T])=>{if(T===null)return nt;const D=Kf(C,T);if(D===null)return nt;const W=cc(C,D);return W&&W.destroy?W.destroy:nt});return{destroy(){b()}}}}),I=mt(Tn("title"),{stores:[m.title],returned:([C])=>({id:C})}),N=mt(Tn("description"),{stores:[m.description],returned:([C])=>({id:C})}),j=mt(Tn("close"),{returned:()=>({type:"button"}),action:C=>({destroy:Gt(yt(C,"click",()=>{A()}),yt(C,"keydown",T=>{T.key!==ut.SPACE&&T.key!==ut.ENTER||(T.preventDefault(),A())}))})});return Nt([g,o],([C,b])=>{if(Vo){if(b&&C&&(w=ap()),C){const T=document.getElementById(m.content.get());Jl({prop:u.get(),defaultEl:T})}return()=>{s.get()||w()}}}),{ids:m,elements:{content:F,trigger:R,title:I,description:N,overlay:q,close:j,portalled:E},states:{open:g},options:n}}const Eh={defaultValue:0,max:100},{name:$h}=er("progress"),Rh=t=>{const e={...Eh,...t},n=$n(nr(e,"value")),{max:o}=n,i=e.value??Xe(e.defaultValue),r=or(i,e==null?void 0:e.onValueChange);return{elements:{root:mt($h(),{stores:[r,o],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:r},options:n}},Lh={orientation:"horizontal",decorative:!1},Dh=t=>{const e={...Lh,...t},n=$n(e),{orientation:o,decorative:i}=n;return{elements:{root:mt("separator",{stores:[o,i],returned:([l,a])=>({role:a?"none":"separator","aria-orientation":l==="vertical"?l:void 0,"aria-hidden":a,"data-orientation":l})})},options:n}},Fh={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:si}=er("slider"),jh=t=>{const e={...Fh,...t},n=$n(nr(e,"value","onValueChange","defaultValue")),{min:o,max:i,step:r,orientation:l,dir:a,disabled:s}=n,u=e.value??Xe(e.defaultValue),f=or(u,e==null?void 0:e.onValueChange),c=en(Xe(!1)),d=en(Xe(0)),m=en(Xe(null)),h=pl(["root"]),g=(E,I)=>{f.update(N=>{if(!N)return[E];if(N[I]===E)return N;const j=[...N],C=j[I]>E?-1:1;function b(){j[I]=j[I+C],j[I+C]=E;const L=p();L&&(L[I+C].focus(),m.set({thumb:L[I+C],index:I+C}))}if(C===-1&&E<j[I-1])return b(),j;if(C===1&&E>j[I+1])return b(),j;const T=o.get(),D=i.get(),W=r.get();return j[I]=hr(E,T,D,W),j})},p=()=>{const E=mr(h.root);return E?Array.from(E.querySelectorAll('[data-melt-part="thumb"]')).filter(I=>kt(I)):null},w=rn([o,i],([E,I])=>N=>(N-E)/(I-E)*100),v=en.derived([l,a],([E,I])=>E==="horizontal"?I==="rtl"?"rl":"lr":I==="rtl"?"tb":"bt"),A=mt(si(),{stores:[s,l,a],returned:([E,I,N])=>({dir:N,disabled:dr(E),"data-disabled":dr(E),"data-orientation":I,style:E?void 0:`touch-action: ${I==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":h.root})}),R=mt(si("range"),{stores:[f,v,w],returned:([E,I,N])=>{const j=E.length>1?N(Math.min(...E)??0):0,C=100-N(Math.max(...E)??0),b={position:"absolute"};switch(I){case"lr":{b.left=`${j}%`,b.right=`${C}%`;break}case"rl":{b.right=`${j}%`,b.left=`${C}%`;break}case"bt":{b.bottom=`${j}%`,b.top=`${C}%`;break}case"tb":{b.top=`${j}%`,b.bottom=`${C}%`;break}}return{style:gn(b)}}}),q=Ul(si("thumb"),{stores:[f,w,o,i,s,l,v],returned:([E,I,N,j,C,b,T])=>Array.from({length:E.length||1},(W,L)=>{d.get()<E.length&&d.update(ne=>ne+1);const X=E[L],Q=`${I(X)}%`,z={position:"absolute"};switch(T){case"lr":{z.left=Q,z.translate="-50% 0";break}case"rl":{z.right=Q,z.translate="50% 0";break}case"bt":{z.bottom=Q,z.translate="0 50%";break}case"tb":{z.top=Q,z.translate="0 -50%";break}}return{role:"slider","aria-valuemin":N,"aria-valuemax":j,"aria-valuenow":X,"aria-disabled":dr(C),"aria-orientation":b,"data-melt-part":"thumb","data-value":X,style:gn(z),tabindex:C?-1:0}}),action:E=>({destroy:yt(E,"keydown",N=>{if(s.get())return;const j=N.currentTarget;if(!kt(j))return;const C=p();if(!(C!=null&&C.length))return;const b=C.indexOf(j);if(d.set(b),![ut.ARROW_LEFT,ut.ARROW_RIGHT,ut.ARROW_UP,ut.ARROW_DOWN,ut.HOME,ut.END].includes(N.key))return;N.preventDefault();const T=o.get(),D=i.get(),W=r.get(),L=f.get(),U=l.get(),X=v.get(),Q=L[b];switch(N.key){case ut.HOME:{g(T,b);break}case ut.END:{g(D,b);break}case ut.ARROW_LEFT:{if(U!=="horizontal")break;N.metaKey?g(X==="rl"?D:T,b):X==="rl"&&Q<D?g(Q+W,b):X==="lr"&&Q>T&&g(Q-W,b);break}case ut.ARROW_RIGHT:{if(U!=="horizontal")break;N.metaKey?g(X==="rl"?T:D,b):X==="rl"&&Q>T?g(Q-W,b):X==="lr"&&Q<D&&g(Q+W,b);break}case ut.ARROW_UP:{N.metaKey?g(X==="tb"?T:D,b):X==="tb"&&Q>T?g(Q-W,b):X!=="tb"&&Q<D&&g(Q+W,b);break}case ut.ARROW_DOWN:{N.metaKey?g(X==="tb"?D:T,b):X==="tb"&&Q<D?g(Q+W,b):X!=="tb"&&Q>T&&g(Q-W,b);break}}})})}),F=Ul(si("tick"),{stores:[f,o,i,r,v],returned:([E,I,N,j,C])=>{const b=N-I;let T=Math.ceil(b/j);return b%j==0&&T++,Array.from({length:T},(D,W)=>{const L=`${W*(j/(N-I))*100}%`,U=W===0,X=W===T-1,Q=U?0:X?-100:-50,z={position:"absolute"};switch(C){case"lr":{z.left=L,z.translate=`${Q}% 0`;break}case"rl":{z.right=L,z.translate=`${-Q}% 0`;break}case"bt":{z.bottom=L,z.translate=`0 ${-Q}%`;break}case"tb":{z.top=L,z.translate=`0 ${Q}%`;break}}const ne=I+W*j;return{"data-bounded":(E.length===1?ne<=E[0]:E[0]<=ne&&ne<=E[E.length-1])?!0:void 0,"data-value":ne,style:gn(z)}})}});return Nt([A,o,i,s,l,v,r],([E,I,N,j,C,b,T])=>{if(!Vo||j)return;const D=(z,ne,oe,Ae)=>{const ee=(z-oe)/(Ae-oe)*(N-I)+I;if(ee<I)g(I,ne);else if(ee>N)g(N,ne);else{const Pe=T,Ne=I,_=Math.floor((ee-Ne)/Pe),K=Ne+_*Pe+Pe/2,J=Ne+(_+1)*Pe+Pe/2,se=ee>=K&&ee<J?(_+1)*Pe+Ne:_*Pe+Ne;se<=N&&g(se,ne)}},W=z=>{const ne=p();if(!ne)return;ne.forEach(ee=>ee.blur());const oe=ne.map(ee=>{if(C==="horizontal"){const{left:Pe,right:Ne}=ee.getBoundingClientRect();return Math.abs(z.clientX-(Pe+Ne)/2)}else{const{top:Pe,bottom:Ne}=ee.getBoundingClientRect();return Math.abs(z.clientY-(Pe+Ne)/2)}}),Ae=ne[oe.indexOf(Math.min(...oe))],ce=ne.indexOf(Ae);return{thumb:Ae,index:ce}},L=z=>{if(!c.get())return;z.preventDefault(),z.stopPropagation();const ne=mr(E["data-melt-id"]),oe=m.get();if(!ne||!oe)return;oe.thumb.focus();const{left:Ae,right:ce,top:ee,bottom:Pe}=ne.getBoundingClientRect();switch(b){case"lr":{D(z.clientX,oe.index,Ae,ce);break}case"rl":{D(z.clientX,oe.index,ce,Ae);break}case"bt":{D(z.clientY,oe.index,Pe,ee);break}case"tb":{D(z.clientY,oe.index,ee,Pe);break}}},U=z=>{if(z.button!==0)return;const ne=mr(E["data-melt-id"]),oe=W(z);if(!oe||!ne)return;const Ae=z.target;!kt(Ae)||!ne.contains(Ae)||(z.preventDefault(),m.set(oe),oe.thumb.focus(),c.set(!0),L(z))},X=()=>{c.set(!1)},Q=Gt(ht(document,"pointerdown",U),ht(document,"pointerup",X),ht(document,"pointerleave",X),ht(document,"pointermove",L));return()=>{Q()}}),Nt([r,o,i,f],function([I,N,j,C]){const b=D=>hr(D,N,j,I)===D,T=D=>hr(D,N,j,I);C.some(D=>!b(D))&&f.update(D=>D.map(T))}),{elements:{root:A,thumbs:q,range:R,ticks:F},states:{value:f},options:n}},qh={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,closeOnPointerDown:!0,openDelay:1e3,closeDelay:0,forceVisible:!1,portal:void 0,closeOnEscape:!0,disableHoverableContent:!1,group:void 0},{name:gr}=er("tooltip"),ai=new Map,Bh=["trigger","content"];function Hh(t){const e={...qh,...t},n=$n(nr(e,"open","ids")),{positioning:o,arrowSize:i,closeOnPointerDown:r,openDelay:l,closeDelay:a,forceVisible:s,portal:u,closeOnEscape:f,disableHoverableContent:c,group:d}=n,m=e.open??Xe(e.defaultOpen),h=or(m,e==null?void 0:e.onOpenChange),g=Xe(null),p=$n({...pl(Bh),...e.ids});let w=!1;const v=b=>Vo?document.getElementById(p[b].get()):null;let A=null,R=null;function q(b){R&&(window.clearTimeout(R),R=null),A||(A=window.setTimeout(()=>{h.set(!0),g.update(T=>T??b),A=null},l.get()))}function F(b){if(A&&(window.clearTimeout(A),A=null),b&&C){g.set("pointer");return}R||(R=window.setTimeout(()=>{h.set(!1),g.set(null),b&&(w=!1),R=null},a.get()))}const E=rn([h,s],([b,T])=>b||T),I=mt(gr("trigger"),{stores:[p.content,p.trigger,h],returned:([b,T,D])=>({"aria-describedby":b,id:T,"data-state":D?"open":"closed"}),action:b=>{const T=W=>{f.get()&&W.key===ut.ESCAPE&&(A&&(window.clearTimeout(A),A=null),h.set(!1))};return{destroy:Gt(yt(b,"pointerdown",()=>{r.get()&&(h.set(!1),w=!0,A&&(window.clearTimeout(A),A=null))}),yt(b,"pointerenter",W=>{Kl(W)||q("pointer")}),yt(b,"pointerleave",W=>{Kl(W)||A&&(window.clearTimeout(A),A=null)}),yt(b,"focus",()=>{w||q("focus")}),yt(b,"blur",async()=>{await ml(0),F(!0)}),yt(b,"keydown",T),ht(document,"keydown",T))}}}),N=mt(gr("content"),{stores:[E,h,u,p.content],returned:([b,T,D,W])=>({role:"tooltip",hidden:b?void 0:!0,tabindex:-1,style:gn({display:b?void 0:"none"}),id:W,"data-portal":Vf(D),"data-state":T?"open":"closed"}),action:b=>{let T=nt,D=nt;const W=Nt([E,o,u],([X,Q,z])=>{const ne=v("trigger");if(!X||!ne){D(),T();return}if(T=Qp(ne,b,Q).destroy,z===null){D();return}const Ae=Kf(b,z);if(Ae){const ce=cc(b,Ae);ce&&ce.destroy&&(D=ce.destroy)}});function L(X){if(!h.get())return;const Q=X.target;if(!tr(Q)&&!Hm(Q))return;const z=v("trigger");z&&Q.contains(z)&&F()}const U=Gt(yt(b,"pointerenter",()=>q("pointer")),yt(b,"pointerdown",()=>q("pointer")),ht(window,"scroll",L,{capture:!0}));return{destroy(){U(),D(),T(),W()}}}}),j=mt(gr("arrow"),{stores:i,returned:b=>({"data-arrow":!0,style:gn({position:"absolute",width:`var(--arrow-size, ${b}px)`,height:`var(--arrow-size, ${b}px)`})})});let C=!1;return Nt(h,b=>{const T=d.get();if(T===void 0||T===!1)return;if(!b){ai.get(T)===h&&ai.delete(T);return}const D=ai.get(T);D==null||D.set(!1),ai.set(T,h)}),Nt([h,g],([b,T])=>{if(!(!b||!Vo))return Gt(ht(document,"mousemove",D=>{const W=v("content"),L=v("trigger");if(!W||!L)return;const U=c.get()?[L]:[L,W],X=ip(U);C=rp({x:D.clientX,y:D.clientY},X),T==="pointer"&&(C||F())}))}),{ids:p,elements:{trigger:I,content:N,arrow:j},states:{open:h},options:n}}function qn(t,e){const n={};return e.forEach(o=>{n[o]={[`data-${t}-${o}`]:""}}),o=>n[o]}function Bn(){const t=Md();return e=>{const{originalEvent:n}=e.detail,{cancelable:o}=e,i=n.type;t(i,{originalEvent:n,currentTarget:n.currentTarget},{cancelable:o})||e.preventDefault()}}function yo(t){const e={};for(const n in t){const o=t[n];o!==void 0&&(e[n]=o)}return e}function Dn(t){return function(e,n){if(n===void 0)return;const o=t[e];o&&o.set(n)}}function pc(){return{NAME:"alert-dialog",PARTS:["action","cancel","content","description","overlay","portal","title","trigger"]}}function Gh(t){const{NAME:e,PARTS:n}=pc(),o=qn(e,n),i=mc({...yo(t),role:"alertdialog",forceVisible:!0}),r={...i,getAttrs:o,updateOption:Dn(i.options)};return Qi(e,r),{...r,updateOption:Dn(r.options),getAttrs:o}}function Hn(){const{NAME:t}=pc();return zi(t)}const Wh=t=>({ids:t&1}),us=t=>({ids:t[0]});function Vh(t){let e;const n=t[12].default,o=he(n,t,t[11],us);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,[r]){o&&o.p&&(!e||r&2049)&&ge(o,n,i,i[11],e?_e(n,i[11],r,Wh):be(i[11]),us)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function xh(t,e,n){let o,{$$slots:i={},$$scope:r}=e,{preventScroll:l=void 0}=e,{closeOnEscape:a=void 0}=e,{closeOnOutsideClick:s=!1}=e,{portal:u=void 0}=e,{open:f=void 0}=e,{onOpenChange:c=void 0}=e,{openFocus:d=void 0}=e,{closeFocus:m=void 0}=e,{onOutsideClick:h=void 0}=e;const{states:{open:g},updateOption:p,ids:w}=Gh({closeOnEscape:a,preventScroll:l,closeOnOutsideClick:s,portal:u,forceVisible:!0,defaultOpen:f,openFocus:d,closeFocus:m,onOutsideClick:h,onOpenChange:({next:A})=>(f!==A&&(c==null||c(A),n(2,f=A)),A)}),v=rn([w.content,w.description,w.title],([A,R,q])=>({content:A,description:R,title:q}));return le(t,v,A=>n(0,o=A)),t.$$set=A=>{"preventScroll"in A&&n(3,l=A.preventScroll),"closeOnEscape"in A&&n(4,a=A.closeOnEscape),"closeOnOutsideClick"in A&&n(5,s=A.closeOnOutsideClick),"portal"in A&&n(6,u=A.portal),"open"in A&&n(2,f=A.open),"onOpenChange"in A&&n(7,c=A.onOpenChange),"openFocus"in A&&n(8,d=A.openFocus),"closeFocus"in A&&n(9,m=A.closeFocus),"onOutsideClick"in A&&n(10,h=A.onOutsideClick),"$$scope"in A&&n(11,r=A.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&f!==void 0&&g.set(f),t.$$.dirty&8&&p("preventScroll",l),t.$$.dirty&16&&p("closeOnEscape",a),t.$$.dirty&32&&p("closeOnOutsideClick",s),t.$$.dirty&64&&p("portal",u),t.$$.dirty&256&&p("openFocus",d),t.$$.dirty&512&&p("closeFocus",m),t.$$.dirty&1024&&p("onOutsideClick",h)},[o,v,f,l,a,s,u,c,d,m,h,r,i]}class Yh extends pe{constructor(e){super(),me(this,e,xh,Vh,de,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const Uh=t=>({builder:t&8}),fs=t=>({builder:t[3]}),Kh=t=>({builder:t&8}),cs=t=>({builder:t[3]});function Xh(t){let e=t[1],n,o,i=t[1]&&br(t);return{c(){i&&i.c(),n=Fe()},m(r,l){i&&i.m(r,l),O(r,n,l),o=!0},p(r,l){r[1]?e?de(e,r[1])?(i.d(1),i=br(r),e=r[1],i.c(),i.m(n.parentNode,n)):i.p(r,l):(i=br(r),e=r[1],i.c(),i.m(n.parentNode,n)):e&&(i.d(1),i=null,e=r[1])},i(r){o||(k(i,r),o=!0)},o(r){S(i,r),o=!1},d(r){r&&M(n),i&&i.d(r)}}}function Jh(t){let e;const n=t[9].default,o=he(n,t,t[8],cs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&264)&&ge(o,n,i,i[8],e?_e(n,i[8],r,Kh):be(i[8]),cs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function br(t){let e,n,o,i;const r=t[9].default,l=he(r,t,t[8],fs);let a=[t[3],t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P(t[1]),l&&l.c(),bn(t[1])(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[10](e),n=!0,o||(i=Ve(t[3].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&264)&&ge(l,r,u,u[8],n?_e(r,u[8],f,Uh):be(u[8]),fs),bn(u[1])(e,s=ve(a,[f&8&&u[3],f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[10](null),o=!1,i()}}}function Zh(t){let e,n,o,i;const r=[Jh,Xh],l=[];function a(s,u){return s[2]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Qh(t,e,n){let o;const i=["level","asChild","id","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{level:u="h2"}=e,{asChild:f=!1}=e,{id:c=void 0}=e,{el:d=void 0}=e;const{elements:{title:m},ids:h,getAttrs:g}=Hn();le(t,m,v=>n(7,l=v));const p=g("title");function w(v){Re[v?"unshift":"push"](()=>{d=v,n(0,d)})}return t.$$set=v=>{e=Z(Z({},e),je(v)),n(5,r=ue(e,i)),"level"in v&&n(1,u=v.level),"asChild"in v&&n(2,f=v.asChild),"id"in v&&n(6,c=v.id),"el"in v&&n(0,d=v.el),"$$scope"in v&&n(8,s=v.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&c&&h.title.set(c),t.$$.dirty&128&&n(3,o=l),t.$$.dirty&8&&Object.assign(o,p)},[d,u,f,o,m,r,c,l,s,a,w]}let zh=class extends pe{constructor(e){super(),me(this,e,Qh,Zh,de,{level:1,asChild:2,id:6,el:0})}};const e_=t=>({builder:t&4}),ds=t=>({builder:t[2]}),t_=t=>({builder:t&4}),ms=t=>({builder:t[2]});function n_(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],ds);let a=[t[2],{type:"button"},t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("button"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),e.autofocus&&e.focus(),t[9](e),n=!0,o||(i=[Ve(t[2].action(e)),te(e,"m-click",t[4]),te(e,"m-keydown",t[4])],o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,e_):be(u[7]),ds),fe(e,s=ve(a,[f&4&&u[2],{type:"button"},f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,Ye(i)}}}function o_(t){let e;const n=t[8].default,o=he(n,t,t[7],ms);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,t_):be(i[7]),ms)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function i_(t){let e,n,o,i;const r=[o_,n_],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function r_(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{close:c},getAttrs:d}=Hn();le(t,c,p=>n(6,l=p));const m=Bn(),h=d("action");function g(p){Re[p?"unshift":"push"](()=>{f=p,n(0,f)})}return t.$$set=p=>{e=Z(Z({},e),je(p)),n(5,r=ue(e,i)),"asChild"in p&&n(1,u=p.asChild),"el"in p&&n(0,f=p.el),"$$scope"in p&&n(7,s=p.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,h)},[f,u,o,c,m,r,l,s,a,g]}let l_=class extends pe{constructor(e){super(),me(this,e,r_,i_,de,{asChild:1,el:0})}};const s_=t=>({builder:t&4}),ps=t=>({builder:t[2]}),a_=t=>({builder:t&4}),hs=t=>({builder:t[2]});function u_(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],ps);let a=[t[2],{type:"button"},t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("button"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),e.autofocus&&e.focus(),t[9](e),n=!0,o||(i=[Ve(t[2].action(e)),te(e,"m-click",t[4]),te(e,"m-keydown",t[4])],o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,s_):be(u[7]),ps),fe(e,s=ve(a,[f&4&&u[2],{type:"button"},f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,Ye(i)}}}function f_(t){let e;const n=t[8].default,o=he(n,t,t[7],hs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,a_):be(i[7]),hs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function c_(t){let e,n,o,i;const r=[f_,u_],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function d_(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{close:c},getAttrs:d}=Hn();le(t,c,p=>n(6,l=p));const m=Bn(),h=d("cancel");function g(p){Re[p?"unshift":"push"](()=>{f=p,n(0,f)})}return t.$$set=p=>{e=Z(Z({},e),je(p)),n(5,r=ue(e,i)),"asChild"in p&&n(1,u=p.asChild),"el"in p&&n(0,f=p.el),"$$scope"in p&&n(7,s=p.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,h)},[f,u,o,c,m,r,l,s,a,g]}let m_=class extends pe{constructor(e){super(),me(this,e,d_,c_,de,{asChild:1,el:0})}};const p_=t=>({builder:t&4}),_s=t=>({builder:t[2]}),h_=t=>({builder:t&4}),gs=t=>({builder:t[2]});function __(t){let e,n,o,i;const r=t[7].default,l=he(r,t,t[6],_s);let a=[t[2],t[4]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[8](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&68)&&ge(l,r,u,u[6],n?_e(r,u[6],f,p_):be(u[6]),_s),fe(e,s=ve(a,[f&4&&u[2],f&16&&u[4]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[8](null),o=!1,i()}}}function g_(t){let e;const n=t[7].default,o=he(n,t,t[6],gs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&68)&&ge(o,n,i,i[6],e?_e(n,i[6],r,h_):be(i[6]),gs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function b_(t){let e,n,o,i;const r=[g_,__],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function y_(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{portalled:c},getAttrs:d}=Hn();le(t,c,g=>n(5,l=g));const m=d("portal");function h(g){Re[g?"unshift":"push"](()=>{f=g,n(0,f)})}return t.$$set=g=>{e=Z(Z({},e),je(g)),n(4,r=ue(e,i)),"asChild"in g&&n(1,u=g.asChild),"el"in g&&n(0,f=g.el),"$$scope"in g&&n(6,s=g.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,m)},[f,u,o,c,r,l,s,a,h]}let v_=class extends pe{constructor(e){super(),me(this,e,y_,b_,de,{asChild:1,el:0})}};const w_=t=>({builder:t[0]&256}),bs=t=>({builder:t[8]}),k_=t=>({builder:t[0]&256}),ys=t=>({builder:t[8]}),C_=t=>({builder:t[0]&256}),vs=t=>({builder:t[8]}),T_=t=>({builder:t[0]&256}),ws=t=>({builder:t[8]}),S_=t=>({builder:t[0]&256}),ks=t=>({builder:t[8]}),A_=t=>({builder:t[0]&256}),Cs=t=>({builder:t[8]});function I_(t){let e,n,o,i;const r=t[16].default,l=he(r,t,t[15],bs);let a=[t[8],t[12]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[56](e),n=!0,o||(i=[Ve(t[8].action(e)),te(e,"pointerdown",t[45]),te(e,"pointermove",t[46]),te(e,"pointerup",t[47]),te(e,"touchend",t[48]),te(e,"touchstart",t[49]),te(e,"touchcancel",t[50]),te(e,"touchmove",t[51])],o=!0)},p(u,f){l&&l.p&&(!n||f[0]&33024)&&ge(l,r,u,u[15],n?_e(r,u[15],f,w_):be(u[15]),bs),fe(e,s=ve(a,[f[0]&256&&u[8],f[0]&4096&&u[12]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[56](null),o=!1,Ye(i)}}}function M_(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],ys);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[55](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[38]),te(e,"pointermove",t[39]),te(e,"pointerup",t[40]),te(e,"touchend",t[41]),te(e,"touchstart",t[42]),te(e,"touchcancel",t[43]),te(e,"touchmove",t[44])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,k_):be(t[15]),ys),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),n&&n.end(1),o=!0)},o(f){S(a,f),f&&(n=Ut(e,t[5],t[6])),o=!1},d(f){f&&M(e),a&&a.d(f),t[55](null),f&&n&&n.end(),i=!1,Ye(r)}}}function O_(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],vs);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[54](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[31]),te(e,"pointermove",t[32]),te(e,"pointerup",t[33]),te(e,"touchend",t[34]),te(e,"touchstart",t[35]),te(e,"touchcancel",t[36]),te(e,"touchmove",t[37])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,C_):be(t[15]),vs),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),f&&(n||it(()=>{n=Yt(e,t[3],t[4]),n.start()})),o=!0)},o(f){S(a,f),o=!1},d(f){f&&M(e),a&&a.d(f),t[54](null),i=!1,Ye(r)}}}function P_(t){let e,n,o,i,r,l;const a=t[16].default,s=he(a,t,t[15],ws);let u=[t[8],t[12]],f={};for(let c=0;c<u.length;c+=1)f=Z(f,u[c]);return{c(){e=P("div"),s&&s.c(),fe(e,f)},m(c,d){O(c,e,d),s&&s.m(e,null),t[53](e),i=!0,r||(l=[Ve(t[8].action(e)),te(e,"pointerdown",t[24]),te(e,"pointermove",t[25]),te(e,"pointerup",t[26]),te(e,"touchend",t[27]),te(e,"touchstart",t[28]),te(e,"touchcancel",t[29]),te(e,"touchmove",t[30])],r=!0)},p(c,d){t=c,s&&s.p&&(!i||d[0]&33024)&&ge(s,a,t,t[15],i?_e(a,t[15],d,T_):be(t[15]),ws),fe(e,f=ve(u,[d[0]&256&&t[8],d[0]&4096&&t[12]]))},i(c){i||(k(s,c),c&&it(()=>{i&&(o&&o.end(1),n=Yt(e,t[3],t[4]),n.start())}),i=!0)},o(c){S(s,c),n&&n.invalidate(),c&&(o=Ut(e,t[5],t[6])),i=!1},d(c){c&&M(e),s&&s.d(c),t[53](null),c&&o&&o.end(),r=!1,Ye(l)}}}function N_(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],ks);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[52](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[17]),te(e,"pointermove",t[18]),te(e,"pointerup",t[19]),te(e,"touchend",t[20]),te(e,"touchstart",t[21]),te(e,"touchcancel",t[22]),te(e,"touchmove",t[23])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,S_):be(t[15]),ks),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),f&&it(()=>{o&&(n||(n=vt(e,t[1],t[2],!0)),n.run(1))}),o=!0)},o(f){S(a,f),f&&(n||(n=vt(e,t[1],t[2],!1)),n.run(0)),o=!1},d(f){f&&M(e),a&&a.d(f),t[52](null),f&&n&&n.end(),i=!1,Ye(r)}}}function E_(t){let e;const n=t[16].default,o=he(n,t,t[15],Cs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r[0]&33024)&&ge(o,n,i,i[15],e?_e(n,i[15],r,A_):be(i[15]),Cs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function $_(t){let e,n,o,i;const r=[E_,N_,P_,O_,M_,I_],l=[];function a(s,u){return s[7]&&s[9]?0:s[1]&&s[9]?1:s[3]&&s[5]&&s[9]?2:s[3]&&s[9]?3:s[5]&&s[9]?4:s[9]?5:-1}return~(e=a(t))&&(n=l[e]=r[e](t)),{c(){n&&n.c(),o=Fe()},m(s,u){~e&&l[e].m(s,u),O(s,o,u),i=!0},p(s,u){let f=e;e=a(s),e===f?~e&&l[e].p(s,u):(n&&(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o)):n=null)},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),~e&&l[e].d(s)}}}function R_(t,e,n){let o;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","id","asChild","el"];let r=ue(e,i),l,a,{$$slots:s={},$$scope:u}=e,{transition:f=void 0}=e,{transitionConfig:c=void 0}=e,{inTransition:d=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:h=void 0}=e,{outTransitionConfig:g=void 0}=e,{id:p=void 0}=e,{asChild:w=!1}=e,{el:v=void 0}=e;const{elements:{content:A},states:{open:R},ids:q,getAttrs:F}=Hn();le(t,A,H=>n(14,l=H)),le(t,R,H=>n(9,a=H));const E=F("content");function I(H){re.call(this,t,H)}function N(H){re.call(this,t,H)}function j(H){re.call(this,t,H)}function C(H){re.call(this,t,H)}function b(H){re.call(this,t,H)}function T(H){re.call(this,t,H)}function D(H){re.call(this,t,H)}function W(H){re.call(this,t,H)}function L(H){re.call(this,t,H)}function U(H){re.call(this,t,H)}function X(H){re.call(this,t,H)}function Q(H){re.call(this,t,H)}function z(H){re.call(this,t,H)}function ne(H){re.call(this,t,H)}function oe(H){re.call(this,t,H)}function Ae(H){re.call(this,t,H)}function ce(H){re.call(this,t,H)}function ee(H){re.call(this,t,H)}function Pe(H){re.call(this,t,H)}function Ne(H){re.call(this,t,H)}function _(H){re.call(this,t,H)}function K(H){re.call(this,t,H)}function J(H){re.call(this,t,H)}function se(H){re.call(this,t,H)}function we(H){re.call(this,t,H)}function Oe(H){re.call(this,t,H)}function De(H){re.call(this,t,H)}function qe(H){re.call(this,t,H)}function He(H){re.call(this,t,H)}function Be(H){re.call(this,t,H)}function Je(H){re.call(this,t,H)}function Ue(H){re.call(this,t,H)}function Se(H){re.call(this,t,H)}function Ee(H){re.call(this,t,H)}function Le(H){re.call(this,t,H)}function ze(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function lt(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function rt(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function ye(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function Ze(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}return t.$$set=H=>{e=Z(Z({},e),je(H)),n(12,r=ue(e,i)),"transition"in H&&n(1,f=H.transition),"transitionConfig"in H&&n(2,c=H.transitionConfig),"inTransition"in H&&n(3,d=H.inTransition),"inTransitionConfig"in H&&n(4,m=H.inTransitionConfig),"outTransition"in H&&n(5,h=H.outTransition),"outTransitionConfig"in H&&n(6,g=H.outTransitionConfig),"id"in H&&n(13,p=H.id),"asChild"in H&&n(7,w=H.asChild),"el"in H&&n(0,v=H.el),"$$scope"in H&&n(15,u=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&8192&&p&&q.content.set(p),t.$$.dirty[0]&16384&&n(8,o=l),t.$$.dirty[0]&256&&Object.assign(o,E)},[v,f,c,d,m,h,g,w,o,a,A,R,r,p,l,u,s,I,N,j,C,b,T,D,W,L,U,X,Q,z,ne,oe,Ae,ce,ee,Pe,Ne,_,K,J,se,we,Oe,De,qe,He,Be,Je,Ue,Se,Ee,Le,ze,lt,rt,ye,Ze]}let L_=class extends pe{constructor(e){super(),me(this,e,R_,$_,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,id:13,asChild:7,el:0},null,[-1,-1])}};const D_=t=>({builder:t&256}),Ts=t=>({builder:t[8]});function F_(t){let e,n,o,i=[t[8],t[12]],r={};for(let l=0;l<i.length;l+=1)r=Z(r,i[l]);return{c(){e=P("div"),fe(e,r)},m(l,a){O(l,e,a),t[20](e),n||(o=Ve(t[8].action(e)),n=!0)},p(l,a){fe(e,r=ve(i,[a&256&&l[8],a&4096&&l[12]]))},i:Ce,o:Ce,d(l){l&&M(e),t[20](null),n=!1,o()}}}function j_(t){let e,n,o,i,r,l=[t[8],t[12]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),fe(e,a)},m(s,u){O(s,e,u),t[19](e),o=!0,i||(r=Ve(t[8].action(e)),i=!0)},p(s,u){t=s,fe(e,a=ve(l,[u&256&&t[8],u&4096&&t[12]]))},i(s){o||(n&&n.end(1),o=!0)},o(s){s&&(n=Ut(e,t[5],t[6])),o=!1},d(s){s&&M(e),t[19](null),s&&n&&n.end(),i=!1,r()}}}function q_(t){let e,n,o,i,r=[t[8],t[12]],l={};for(let a=0;a<r.length;a+=1)l=Z(l,r[a]);return{c(){e=P("div"),fe(e,l)},m(a,s){O(a,e,s),t[18](e),o||(i=Ve(t[8].action(e)),o=!0)},p(a,s){t=a,fe(e,l=ve(r,[s&256&&t[8],s&4096&&t[12]]))},i(a){a&&(n||it(()=>{n=Yt(e,t[3],t[4]),n.start()}))},o:Ce,d(a){a&&M(e),t[18](null),o=!1,i()}}}function B_(t){let e,n,o,i,r,l,a=[t[8],t[12]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),fe(e,s)},m(u,f){O(u,e,f),t[17](e),i=!0,r||(l=Ve(t[8].action(e)),r=!0)},p(u,f){t=u,fe(e,s=ve(a,[f&256&&t[8],f&4096&&t[12]]))},i(u){i||(u&&it(()=>{i&&(o&&o.end(1),n=Yt(e,t[3],t[4]),n.start())}),i=!0)},o(u){n&&n.invalidate(),u&&(o=Ut(e,t[5],t[6])),i=!1},d(u){u&&M(e),t[17](null),u&&o&&o.end(),r=!1,l()}}}function H_(t){let e,n,o,i,r,l=[t[8],t[12]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),fe(e,a)},m(s,u){O(s,e,u),t[16](e),o=!0,i||(r=Ve(t[8].action(e)),i=!0)},p(s,u){t=s,fe(e,a=ve(l,[u&256&&t[8],u&4096&&t[12]]))},i(s){o||(s&&it(()=>{o&&(n||(n=vt(e,t[1],t[2],!0)),n.run(1))}),o=!0)},o(s){s&&(n||(n=vt(e,t[1],t[2],!1)),n.run(0)),o=!1},d(s){s&&M(e),t[16](null),s&&n&&n.end(),i=!1,r()}}}function G_(t){let e;const n=t[15].default,o=he(n,t,t[14],Ts);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&16640)&&ge(o,n,i,i[14],e?_e(n,i[14],r,D_):be(i[14]),Ts)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function W_(t){let e,n,o,i;const r=[G_,H_,B_,q_,j_,F_],l=[];function a(s,u){return s[7]&&s[9]?0:s[1]&&s[9]?1:s[3]&&s[5]&&s[9]?2:s[3]&&s[9]?3:s[5]&&s[9]?4:s[9]?5:-1}return~(e=a(t))&&(n=l[e]=r[e](t)),{c(){n&&n.c(),o=Fe()},m(s,u){~e&&l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?~e&&l[e].p(s,u):(n&&(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o)):n=null)},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),~e&&l[e].d(s)}}}function V_(t,e,n){let o;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let r=ue(e,i),l,a,{$$slots:s={},$$scope:u}=e,{transition:f=void 0}=e,{transitionConfig:c=void 0}=e,{inTransition:d=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:h=void 0}=e,{outTransitionConfig:g=void 0}=e,{asChild:p=!1}=e,{el:w=void 0}=e;const{elements:{overlay:v},states:{open:A},getAttrs:R}=Hn();le(t,v,C=>n(13,l=C)),le(t,A,C=>n(9,a=C));const q=R("overlay");function F(C){Re[C?"unshift":"push"](()=>{w=C,n(0,w)})}function E(C){Re[C?"unshift":"push"](()=>{w=C,n(0,w)})}function I(C){Re[C?"unshift":"push"](()=>{w=C,n(0,w)})}function N(C){Re[C?"unshift":"push"](()=>{w=C,n(0,w)})}function j(C){Re[C?"unshift":"push"](()=>{w=C,n(0,w)})}return t.$$set=C=>{e=Z(Z({},e),je(C)),n(12,r=ue(e,i)),"transition"in C&&n(1,f=C.transition),"transitionConfig"in C&&n(2,c=C.transitionConfig),"inTransition"in C&&n(3,d=C.inTransition),"inTransitionConfig"in C&&n(4,m=C.inTransitionConfig),"outTransition"in C&&n(5,h=C.outTransition),"outTransitionConfig"in C&&n(6,g=C.outTransitionConfig),"asChild"in C&&n(7,p=C.asChild),"el"in C&&n(0,w=C.el),"$$scope"in C&&n(14,u=C.$$scope)},t.$$.update=()=>{t.$$.dirty&8192&&n(8,o=l),t.$$.dirty&256&&Object.assign(o,q)},[w,f,c,d,m,h,g,p,o,a,v,A,r,l,u,s,F,E,I,N,j]}let x_=class extends pe{constructor(e){super(),me(this,e,V_,W_,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const Y_=t=>({builder:t&4}),Ss=t=>({builder:t[2]}),U_=t=>({builder:t&4}),As=t=>({builder:t[2]});function K_(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],Ss);let a=[t[2],t[4]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[9](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,Y_):be(u[7]),Ss),fe(e,s=ve(a,[f&4&&u[2],f&16&&u[4]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,i()}}}function X_(t){let e;const n=t[8].default,o=he(n,t,t[7],As);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,U_):be(i[7]),As)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function J_(t){let e,n,o,i;const r=[X_,K_],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Z_(t,e,n){let o;const i=["asChild","id","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{id:f=void 0}=e,{el:c=void 0}=e;const{elements:{description:d},ids:m,getAttrs:h}=Hn();le(t,d,w=>n(6,l=w));const g=h("description");function p(w){Re[w?"unshift":"push"](()=>{c=w,n(0,c)})}return t.$$set=w=>{e=Z(Z({},e),je(w)),n(4,r=ue(e,i)),"asChild"in w&&n(1,u=w.asChild),"id"in w&&n(5,f=w.id),"el"in w&&n(0,c=w.el),"$$scope"in w&&n(7,s=w.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&f&&m.description.set(f),t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,g)},[c,u,o,d,r,f,l,s,a,p]}let Q_=class extends pe{constructor(e){super(),me(this,e,Z_,J_,de,{asChild:1,id:5,el:0})}};function z_(t,e){const n=[];return e.builders.forEach(o=>{const i=o.action(t);i&&n.push(i)}),{destroy:()=>{n.forEach(o=>{o.destroy&&o.destroy()})}}}function Is(t){const e={};return t.forEach(n=>{Object.keys(n).forEach(o=>{o!=="action"&&(e[o]=n[o])})}),e}function e0(t){let e=t[1]?"a":"button",n,o,i=(t[1]?"a":"button")&&yr(t);return{c(){i&&i.c(),n=Fe()},m(r,l){i&&i.m(r,l),O(r,n,l),o=!0},p(r,l){r[1],e?de(e,r[1]?"a":"button")?(i.d(1),i=yr(r),e=r[1]?"a":"button",i.c(),i.m(n.parentNode,n)):i.p(r,l):(i=yr(r),e=r[1]?"a":"button",i.c(),i.m(n.parentNode,n))},i(r){o||(k(i,r),o=!0)},o(r){S(i,r),o=!1},d(r){r&&M(n),i&&i.d(r)}}}function t0(t){let e=t[1]?"a":"button",n,o,i=(t[1]?"a":"button")&&vr(t);return{c(){i&&i.c(),n=Fe()},m(r,l){i&&i.m(r,l),O(r,n,l),o=!0},p(r,l){r[1],e?de(e,r[1]?"a":"button")?(i.d(1),i=vr(r),e=r[1]?"a":"button",i.c(),i.m(n.parentNode,n)):i.p(r,l):(i=vr(r),e=r[1]?"a":"button",i.c(),i.m(n.parentNode,n))},i(r){o||(k(i,r),o=!0)},o(r){S(i,r),o=!1},d(r){r&&M(n),i&&i.d(r)}}}function yr(t){let e,n,o,i,r;const l=t[7].default,a=he(l,t,t[6],null);let s=[{type:n=t[1]?void 0:t[2]},{href:t[1]},{tabindex:"0"},t[5],t[4]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P(t[1]?"a":"button"),a&&a.c(),bn(t[1]?"a":"button")(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),o=!0,i||(r=[te(e,"click",t[14]),te(e,"change",t[15]),te(e,"keydown",t[16]),te(e,"keyup",t[17]),te(e,"mouseenter",t[18]),te(e,"mouseleave",t[19])],i=!0)},p(f,c){a&&a.p&&(!o||c&64)&&ge(a,l,f,f[6],o?_e(l,f[6],c,null):be(f[6]),null),bn(f[1]?"a":"button")(e,u=ve(s,[(!o||c&6&&n!==(n=f[1]?void 0:f[2]))&&{type:n},(!o||c&2)&&{href:f[1]},{tabindex:"0"},c&32&&f[5],f[4]]))},i(f){o||(k(a,f),o=!0)},o(f){S(a,f),o=!1},d(f){f&&M(e),a&&a.d(f),i=!1,Ye(r)}}}function vr(t){let e,n,o,i,r,l;const a=t[7].default,s=he(a,t,t[6],null);let u=[{type:n=t[1]?void 0:t[2]},{href:t[1]},{tabindex:"0"},Is(t[3]),t[5],t[4]],f={};for(let c=0;c<u.length;c+=1)f=Z(f,u[c]);return{c(){e=P(t[1]?"a":"button"),s&&s.c(),bn(t[1]?"a":"button")(e,f)},m(c,d){O(c,e,d),s&&s.m(e,null),t[20](e),i=!0,r||(l=[te(e,"click",t[8]),te(e,"change",t[9]),te(e,"keydown",t[10]),te(e,"keyup",t[11]),te(e,"mouseenter",t[12]),te(e,"mouseleave",t[13]),Ve(o=z_.call(null,e,{builders:t[3]}))],r=!0)},p(c,d){s&&s.p&&(!i||d&64)&&ge(s,a,c,c[6],i?_e(a,c[6],d,null):be(c[6]),null),bn(c[1]?"a":"button")(e,f=ve(u,[(!i||d&6&&n!==(n=c[1]?void 0:c[2]))&&{type:n},(!i||d&2)&&{href:c[1]},{tabindex:"0"},d&8&&Is(c[3]),d&32&&c[5],c[4]])),o&&Ft(o.update)&&d&8&&o.update.call(null,{builders:c[3]})},i(c){i||(k(s,c),i=!0)},o(c){S(s,c),i=!1},d(c){c&&M(e),s&&s.d(c),t[20](null),r=!1,Ye(l)}}}function n0(t){let e,n,o,i;const r=[t0,e0],l=[];function a(s,u){return s[3]&&s[3].length?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function o0(t,e,n){const o=["href","type","builders","el"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{href:a=void 0}=e,{type:s=void 0}=e,{builders:u=[]}=e,{el:f=void 0}=e;const c={"data-button-root":""};function d(N){re.call(this,t,N)}function m(N){re.call(this,t,N)}function h(N){re.call(this,t,N)}function g(N){re.call(this,t,N)}function p(N){re.call(this,t,N)}function w(N){re.call(this,t,N)}function v(N){re.call(this,t,N)}function A(N){re.call(this,t,N)}function R(N){re.call(this,t,N)}function q(N){re.call(this,t,N)}function F(N){re.call(this,t,N)}function E(N){re.call(this,t,N)}function I(N){Re[N?"unshift":"push"](()=>{f=N,n(0,f)})}return t.$$set=N=>{e=Z(Z({},e),je(N)),n(5,i=ue(e,o)),"href"in N&&n(1,a=N.href),"type"in N&&n(2,s=N.type),"builders"in N&&n(3,u=N.builders),"el"in N&&n(0,f=N.el),"$$scope"in N&&n(6,l=N.$$scope)},[f,a,s,u,c,i,l,r,d,m,h,g,p,w,v,A,R,q,F,E,I]}let i0=class extends pe{constructor(e){super(),me(this,e,o0,n0,de,{href:1,type:2,builders:3,el:0})}};function r0(t){return(e={})=>l0(t,e)}function l0(t,e){const o={...{side:"bottom",align:"center",sideOffset:0,alignOffset:0,sameWidth:!1,avoidCollisions:!0,collisionPadding:8,fitViewport:!1,strategy:"absolute",overlap:!1},...e};t.update(i=>({...i,placement:s0(o.side,o.align),offset:{...i.offset,mainAxis:o.sideOffset,crossAxis:o.alignOffset},gutter:0,sameWidth:o.sameWidth,flip:o.avoidCollisions,overflowPadding:o.collisionPadding,boundary:o.collisionBoundary,fitViewport:o.fitViewport,strategy:o.strategy,overlap:o.overlap}))}function s0(t,e){return e==="center"?t:`${t}-${e}`}function a0(){return{NAME:"separator",PARTS:["root"]}}function u0(t){const{NAME:e,PARTS:n}=a0(),o=qn(e,n),i={...Dh(yo(t)),getAttrs:o};return{...i,updateOption:Dn(i.options)}}const f0=t=>({builder:t&4}),Ms=t=>({builder:t[2]});function c0(t){let e,n,o,i=[t[2],t[4]],r={};for(let l=0;l<i.length;l+=1)r=Z(r,i[l]);return{c(){e=P("div"),fe(e,r)},m(l,a){O(l,e,a),t[10](e),n||(o=Ve(t[2].action(e)),n=!0)},p(l,a){fe(e,r=ve(i,[a&4&&l[2],a&16&&l[4]]))},i:Ce,o:Ce,d(l){l&&M(e),t[10](null),n=!1,o()}}}function d0(t){let e;const n=t[9].default,o=he(n,t,t[8],Ms);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&260)&&ge(o,n,i,i[8],e?_e(n,i[8],r,f0):be(i[8]),Ms)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function m0(t){let e,n,o,i;const r=[d0,c0],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function p0(t,e,n){let o;const i=["orientation","decorative","asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{orientation:u="horizontal"}=e,{decorative:f=!0}=e,{asChild:c=!1}=e,{el:d=void 0}=e;const{elements:{root:m},updateOption:h,getAttrs:g}=u0({orientation:u,decorative:f});le(t,m,v=>n(7,l=v));const p=g("root");function w(v){Re[v?"unshift":"push"](()=>{d=v,n(0,d)})}return t.$$set=v=>{e=Z(Z({},e),je(v)),n(4,r=ue(e,i)),"orientation"in v&&n(5,u=v.orientation),"decorative"in v&&n(6,f=v.decorative),"asChild"in v&&n(1,c=v.asChild),"el"in v&&n(0,d=v.el),"$$scope"in v&&n(8,s=v.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&h("orientation",u),t.$$.dirty&64&&h("decorative",f),t.$$.dirty&128&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,p)},[d,c,o,m,r,u,f,l,s,a,w]}let h0=class extends pe{constructor(e){super(),me(this,e,p0,m0,de,{orientation:5,decorative:6,asChild:1,el:0})}};function hc(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function _0(t){const{NAME:e,PARTS:n}=hc(),o=qn(e,n),i={...mc({...yo(t),role:"dialog",forceVisible:!0}),getAttrs:o};return Qi(e,i),{...i,updateOption:Dn(i.options)}}function vo(){const{NAME:t}=hc();return zi(t)}const g0=t=>({ids:t&1}),Os=t=>({ids:t[0]});function b0(t){let e;const n=t[12].default,o=he(n,t,t[11],Os);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,[r]){o&&o.p&&(!e||r&2049)&&ge(o,n,i,i[11],e?_e(n,i[11],r,g0):be(i[11]),Os)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function y0(t,e,n){let o,{$$slots:i={},$$scope:r}=e,{preventScroll:l=void 0}=e,{closeOnEscape:a=void 0}=e,{closeOnOutsideClick:s=void 0}=e,{portal:u=void 0}=e,{open:f=void 0}=e,{onOpenChange:c=void 0}=e,{openFocus:d=void 0}=e,{closeFocus:m=void 0}=e,{onOutsideClick:h=void 0}=e;const{states:{open:g},updateOption:p,ids:w}=_0({closeOnEscape:a,preventScroll:l,closeOnOutsideClick:s,portal:u,forceVisible:!0,defaultOpen:f,openFocus:d,closeFocus:m,onOutsideClick:h,onOpenChange:({next:A})=>(f!==A&&(c==null||c(A),n(2,f=A)),A)}),v=rn([w.content,w.description,w.title],([A,R,q])=>({content:A,description:R,title:q}));return le(t,v,A=>n(0,o=A)),t.$$set=A=>{"preventScroll"in A&&n(3,l=A.preventScroll),"closeOnEscape"in A&&n(4,a=A.closeOnEscape),"closeOnOutsideClick"in A&&n(5,s=A.closeOnOutsideClick),"portal"in A&&n(6,u=A.portal),"open"in A&&n(2,f=A.open),"onOpenChange"in A&&n(7,c=A.onOpenChange),"openFocus"in A&&n(8,d=A.openFocus),"closeFocus"in A&&n(9,m=A.closeFocus),"onOutsideClick"in A&&n(10,h=A.onOutsideClick),"$$scope"in A&&n(11,r=A.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&f!==void 0&&g.set(f),t.$$.dirty&8&&p("preventScroll",l),t.$$.dirty&16&&p("closeOnEscape",a),t.$$.dirty&32&&p("closeOnOutsideClick",s),t.$$.dirty&64&&p("portal",u),t.$$.dirty&256&&p("openFocus",d),t.$$.dirty&512&&p("closeFocus",m),t.$$.dirty&1024&&p("onOutsideClick",h)},[o,v,f,l,a,s,u,c,d,m,h,r,i]}class v0 extends pe{constructor(e){super(),me(this,e,y0,b0,de,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const w0=t=>({builder:t&8}),Ps=t=>({builder:t[3]}),k0=t=>({builder:t&8}),Ns=t=>({builder:t[3]});function C0(t){let e=t[1],n,o,i=t[1]&&wr(t);return{c(){i&&i.c(),n=Fe()},m(r,l){i&&i.m(r,l),O(r,n,l),o=!0},p(r,l){r[1]?e?de(e,r[1])?(i.d(1),i=wr(r),e=r[1],i.c(),i.m(n.parentNode,n)):i.p(r,l):(i=wr(r),e=r[1],i.c(),i.m(n.parentNode,n)):e&&(i.d(1),i=null,e=r[1])},i(r){o||(k(i,r),o=!0)},o(r){S(i,r),o=!1},d(r){r&&M(n),i&&i.d(r)}}}function T0(t){let e;const n=t[9].default,o=he(n,t,t[8],Ns);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&264)&&ge(o,n,i,i[8],e?_e(n,i[8],r,k0):be(i[8]),Ns)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function wr(t){let e,n,o,i;const r=t[9].default,l=he(r,t,t[8],Ps);let a=[t[3],t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P(t[1]),l&&l.c(),bn(t[1])(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[10](e),n=!0,o||(i=Ve(t[3].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&264)&&ge(l,r,u,u[8],n?_e(r,u[8],f,w0):be(u[8]),Ps),bn(u[1])(e,s=ve(a,[f&8&&u[3],f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[10](null),o=!1,i()}}}function S0(t){let e,n,o,i;const r=[T0,C0],l=[];function a(s,u){return s[2]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function A0(t,e,n){let o;const i=["level","asChild","id","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{level:u="h2"}=e,{asChild:f=!1}=e,{id:c=void 0}=e,{el:d=void 0}=e;const{elements:{title:m},ids:h,getAttrs:g}=vo();le(t,m,v=>n(7,l=v));const p=g("title");function w(v){Re[v?"unshift":"push"](()=>{d=v,n(0,d)})}return t.$$set=v=>{e=Z(Z({},e),je(v)),n(5,r=ue(e,i)),"level"in v&&n(1,u=v.level),"asChild"in v&&n(2,f=v.asChild),"id"in v&&n(6,c=v.id),"el"in v&&n(0,d=v.el),"$$scope"in v&&n(8,s=v.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&c&&h.title.set(c),t.$$.dirty&128&&n(3,o=l),t.$$.dirty&8&&Object.assign(o,p)},[d,u,f,o,m,r,c,l,s,a,w]}let I0=class extends pe{constructor(e){super(),me(this,e,A0,S0,de,{level:1,asChild:2,id:6,el:0})}};const M0=t=>({builder:t&4}),Es=t=>({builder:t[2]}),O0=t=>({builder:t&4}),$s=t=>({builder:t[2]});function P0(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],Es);let a=[t[2],{type:"button"},t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("button"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),e.autofocus&&e.focus(),t[9](e),n=!0,o||(i=[Ve(t[2].action(e)),te(e,"m-click",t[4]),te(e,"m-keydown",t[4])],o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,M0):be(u[7]),Es),fe(e,s=ve(a,[f&4&&u[2],{type:"button"},f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,Ye(i)}}}function N0(t){let e;const n=t[8].default,o=he(n,t,t[7],$s);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,O0):be(i[7]),$s)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function E0(t){let e,n,o,i;const r=[N0,P0],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function $0(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{close:c},getAttrs:d}=vo();le(t,c,p=>n(6,l=p));const m=Bn(),h=d("close");function g(p){Re[p?"unshift":"push"](()=>{f=p,n(0,f)})}return t.$$set=p=>{e=Z(Z({},e),je(p)),n(5,r=ue(e,i)),"asChild"in p&&n(1,u=p.asChild),"el"in p&&n(0,f=p.el),"$$scope"in p&&n(7,s=p.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,h)},[f,u,o,c,m,r,l,s,a,g]}class R0 extends pe{constructor(e){super(),me(this,e,$0,E0,de,{asChild:1,el:0})}}const L0=t=>({builder:t&4}),Rs=t=>({builder:t[2]}),D0=t=>({builder:t&4}),Ls=t=>({builder:t[2]});function F0(t){let e,n,o,i;const r=t[7].default,l=he(r,t,t[6],Rs);let a=[t[2],t[4]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[8](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&68)&&ge(l,r,u,u[6],n?_e(r,u[6],f,L0):be(u[6]),Rs),fe(e,s=ve(a,[f&4&&u[2],f&16&&u[4]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[8](null),o=!1,i()}}}function j0(t){let e;const n=t[7].default,o=he(n,t,t[6],Ls);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&68)&&ge(o,n,i,i[6],e?_e(n,i[6],r,D0):be(i[6]),Ls)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function q0(t){let e,n,o,i;const r=[j0,F0],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function B0(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{portalled:c},getAttrs:d}=vo();le(t,c,g=>n(5,l=g));const m=d("portal");function h(g){Re[g?"unshift":"push"](()=>{f=g,n(0,f)})}return t.$$set=g=>{e=Z(Z({},e),je(g)),n(4,r=ue(e,i)),"asChild"in g&&n(1,u=g.asChild),"el"in g&&n(0,f=g.el),"$$scope"in g&&n(6,s=g.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,m)},[f,u,o,c,r,l,s,a,h]}let H0=class extends pe{constructor(e){super(),me(this,e,B0,q0,de,{asChild:1,el:0})}};const G0=t=>({builder:t[0]&256}),Ds=t=>({builder:t[8]}),W0=t=>({builder:t[0]&256}),Fs=t=>({builder:t[8]}),V0=t=>({builder:t[0]&256}),js=t=>({builder:t[8]}),x0=t=>({builder:t[0]&256}),qs=t=>({builder:t[8]}),Y0=t=>({builder:t[0]&256}),Bs=t=>({builder:t[8]}),U0=t=>({builder:t[0]&256}),Hs=t=>({builder:t[8]});function K0(t){let e,n,o,i;const r=t[16].default,l=he(r,t,t[15],Ds);let a=[t[8],t[12]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[56](e),n=!0,o||(i=[Ve(t[8].action(e)),te(e,"pointerdown",t[45]),te(e,"pointermove",t[46]),te(e,"pointerup",t[47]),te(e,"touchend",t[48]),te(e,"touchstart",t[49]),te(e,"touchcancel",t[50]),te(e,"touchmove",t[51])],o=!0)},p(u,f){l&&l.p&&(!n||f[0]&33024)&&ge(l,r,u,u[15],n?_e(r,u[15],f,G0):be(u[15]),Ds),fe(e,s=ve(a,[f[0]&256&&u[8],f[0]&4096&&u[12]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[56](null),o=!1,Ye(i)}}}function X0(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],Fs);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[55](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[38]),te(e,"pointermove",t[39]),te(e,"pointerup",t[40]),te(e,"touchend",t[41]),te(e,"touchstart",t[42]),te(e,"touchcancel",t[43]),te(e,"touchmove",t[44])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,W0):be(t[15]),Fs),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),n&&n.end(1),o=!0)},o(f){S(a,f),f&&(n=Ut(e,t[5],t[6])),o=!1},d(f){f&&M(e),a&&a.d(f),t[55](null),f&&n&&n.end(),i=!1,Ye(r)}}}function J0(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],js);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[54](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[31]),te(e,"pointermove",t[32]),te(e,"pointerup",t[33]),te(e,"touchend",t[34]),te(e,"touchstart",t[35]),te(e,"touchcancel",t[36]),te(e,"touchmove",t[37])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,V0):be(t[15]),js),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),f&&(n||it(()=>{n=Yt(e,t[3],t[4]),n.start()})),o=!0)},o(f){S(a,f),o=!1},d(f){f&&M(e),a&&a.d(f),t[54](null),i=!1,Ye(r)}}}function Z0(t){let e,n,o,i,r,l;const a=t[16].default,s=he(a,t,t[15],qs);let u=[t[8],t[12]],f={};for(let c=0;c<u.length;c+=1)f=Z(f,u[c]);return{c(){e=P("div"),s&&s.c(),fe(e,f)},m(c,d){O(c,e,d),s&&s.m(e,null),t[53](e),i=!0,r||(l=[Ve(t[8].action(e)),te(e,"pointerdown",t[24]),te(e,"pointermove",t[25]),te(e,"pointerup",t[26]),te(e,"touchend",t[27]),te(e,"touchstart",t[28]),te(e,"touchcancel",t[29]),te(e,"touchmove",t[30])],r=!0)},p(c,d){t=c,s&&s.p&&(!i||d[0]&33024)&&ge(s,a,t,t[15],i?_e(a,t[15],d,x0):be(t[15]),qs),fe(e,f=ve(u,[d[0]&256&&t[8],d[0]&4096&&t[12]]))},i(c){i||(k(s,c),c&&it(()=>{i&&(o&&o.end(1),n=Yt(e,t[3],t[4]),n.start())}),i=!0)},o(c){S(s,c),n&&n.invalidate(),c&&(o=Ut(e,t[5],t[6])),i=!1},d(c){c&&M(e),s&&s.d(c),t[53](null),c&&o&&o.end(),r=!1,Ye(l)}}}function Q0(t){let e,n,o,i,r;const l=t[16].default,a=he(l,t,t[15],Bs);let s=[t[8],t[12]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[52](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"pointerdown",t[17]),te(e,"pointermove",t[18]),te(e,"pointerup",t[19]),te(e,"touchend",t[20]),te(e,"touchstart",t[21]),te(e,"touchcancel",t[22]),te(e,"touchmove",t[23])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&33024)&&ge(a,l,t,t[15],o?_e(l,t[15],c,Y0):be(t[15]),Bs),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&4096&&t[12]]))},i(f){o||(k(a,f),f&&it(()=>{o&&(n||(n=vt(e,t[1],t[2],!0)),n.run(1))}),o=!0)},o(f){S(a,f),f&&(n||(n=vt(e,t[1],t[2],!1)),n.run(0)),o=!1},d(f){f&&M(e),a&&a.d(f),t[52](null),f&&n&&n.end(),i=!1,Ye(r)}}}function z0(t){let e;const n=t[16].default,o=he(n,t,t[15],Hs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r[0]&33024)&&ge(o,n,i,i[15],e?_e(n,i[15],r,U0):be(i[15]),Hs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function eg(t){let e,n,o,i;const r=[z0,Q0,Z0,J0,X0,K0],l=[];function a(s,u){return s[7]&&s[9]?0:s[1]&&s[9]?1:s[3]&&s[5]&&s[9]?2:s[3]&&s[9]?3:s[5]&&s[9]?4:s[9]?5:-1}return~(e=a(t))&&(n=l[e]=r[e](t)),{c(){n&&n.c(),o=Fe()},m(s,u){~e&&l[e].m(s,u),O(s,o,u),i=!0},p(s,u){let f=e;e=a(s),e===f?~e&&l[e].p(s,u):(n&&(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o)):n=null)},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),~e&&l[e].d(s)}}}function tg(t,e,n){let o;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","el"];let r=ue(e,i),l,a,{$$slots:s={},$$scope:u}=e,{transition:f=void 0}=e,{transitionConfig:c=void 0}=e,{inTransition:d=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:h=void 0}=e,{outTransitionConfig:g=void 0}=e,{asChild:p=!1}=e,{id:w=void 0}=e,{el:v=void 0}=e;const{elements:{content:A},states:{open:R},ids:q,getAttrs:F}=vo();le(t,A,H=>n(14,l=H)),le(t,R,H=>n(9,a=H));const E=F("content");function I(H){re.call(this,t,H)}function N(H){re.call(this,t,H)}function j(H){re.call(this,t,H)}function C(H){re.call(this,t,H)}function b(H){re.call(this,t,H)}function T(H){re.call(this,t,H)}function D(H){re.call(this,t,H)}function W(H){re.call(this,t,H)}function L(H){re.call(this,t,H)}function U(H){re.call(this,t,H)}function X(H){re.call(this,t,H)}function Q(H){re.call(this,t,H)}function z(H){re.call(this,t,H)}function ne(H){re.call(this,t,H)}function oe(H){re.call(this,t,H)}function Ae(H){re.call(this,t,H)}function ce(H){re.call(this,t,H)}function ee(H){re.call(this,t,H)}function Pe(H){re.call(this,t,H)}function Ne(H){re.call(this,t,H)}function _(H){re.call(this,t,H)}function K(H){re.call(this,t,H)}function J(H){re.call(this,t,H)}function se(H){re.call(this,t,H)}function we(H){re.call(this,t,H)}function Oe(H){re.call(this,t,H)}function De(H){re.call(this,t,H)}function qe(H){re.call(this,t,H)}function He(H){re.call(this,t,H)}function Be(H){re.call(this,t,H)}function Je(H){re.call(this,t,H)}function Ue(H){re.call(this,t,H)}function Se(H){re.call(this,t,H)}function Ee(H){re.call(this,t,H)}function Le(H){re.call(this,t,H)}function ze(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function lt(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function rt(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function ye(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}function Ze(H){Re[H?"unshift":"push"](()=>{v=H,n(0,v)})}return t.$$set=H=>{e=Z(Z({},e),je(H)),n(12,r=ue(e,i)),"transition"in H&&n(1,f=H.transition),"transitionConfig"in H&&n(2,c=H.transitionConfig),"inTransition"in H&&n(3,d=H.inTransition),"inTransitionConfig"in H&&n(4,m=H.inTransitionConfig),"outTransition"in H&&n(5,h=H.outTransition),"outTransitionConfig"in H&&n(6,g=H.outTransitionConfig),"asChild"in H&&n(7,p=H.asChild),"id"in H&&n(13,w=H.id),"el"in H&&n(0,v=H.el),"$$scope"in H&&n(15,u=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&8192&&w&&q.content.set(w),t.$$.dirty[0]&16384&&n(8,o=l),t.$$.dirty[0]&256&&Object.assign(o,E)},[v,f,c,d,m,h,g,p,o,a,A,R,r,w,l,u,s,I,N,j,C,b,T,D,W,L,U,X,Q,z,ne,oe,Ae,ce,ee,Pe,Ne,_,K,J,se,we,Oe,De,qe,He,Be,Je,Ue,Se,Ee,Le,ze,lt,rt,ye,Ze]}let ng=class extends pe{constructor(e){super(),me(this,e,tg,eg,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,el:0},null,[-1,-1])}};const og=t=>({builder:t&256}),Gs=t=>({builder:t[8]});function ig(t){let e,n,o,i=[t[8],t[12]],r={};for(let l=0;l<i.length;l+=1)r=Z(r,i[l]);return{c(){e=P("div"),fe(e,r)},m(l,a){O(l,e,a),t[25](e),n||(o=[Ve(t[8].action(e)),te(e,"mouseup",t[20])],n=!0)},p(l,a){fe(e,r=ve(i,[a&256&&l[8],a&4096&&l[12]]))},i:Ce,o:Ce,d(l){l&&M(e),t[25](null),n=!1,Ye(o)}}}function rg(t){let e,n,o,i,r,l=[t[8],t[12]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),fe(e,a)},m(s,u){O(s,e,u),t[24](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"mouseup",t[19])],i=!0)},p(s,u){t=s,fe(e,a=ve(l,[u&256&&t[8],u&4096&&t[12]]))},i(s){o||(n&&n.end(1),o=!0)},o(s){s&&(n=Ut(e,t[5],t[6])),o=!1},d(s){s&&M(e),t[24](null),s&&n&&n.end(),i=!1,Ye(r)}}}function lg(t){let e,n,o,i,r=[t[8],t[12]],l={};for(let a=0;a<r.length;a+=1)l=Z(l,r[a]);return{c(){e=P("div"),fe(e,l)},m(a,s){O(a,e,s),t[23](e),o||(i=[Ve(t[8].action(e)),te(e,"mouseup",t[18])],o=!0)},p(a,s){t=a,fe(e,l=ve(r,[s&256&&t[8],s&4096&&t[12]]))},i(a){a&&(n||it(()=>{n=Yt(e,t[3],t[4]),n.start()}))},o:Ce,d(a){a&&M(e),t[23](null),o=!1,Ye(i)}}}function sg(t){let e,n,o,i,r,l,a=[t[8],t[12]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),fe(e,s)},m(u,f){O(u,e,f),t[22](e),i=!0,r||(l=[Ve(t[8].action(e)),te(e,"mouseup",t[17])],r=!0)},p(u,f){t=u,fe(e,s=ve(a,[f&256&&t[8],f&4096&&t[12]]))},i(u){i||(u&&it(()=>{i&&(o&&o.end(1),n=Yt(e,t[3],t[4]),n.start())}),i=!0)},o(u){n&&n.invalidate(),u&&(o=Ut(e,t[5],t[6])),i=!1},d(u){u&&M(e),t[22](null),u&&o&&o.end(),r=!1,Ye(l)}}}function ag(t){let e,n,o,i,r,l=[t[8],t[12]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),fe(e,a)},m(s,u){O(s,e,u),t[21](e),o=!0,i||(r=[te(e,"mouseup",t[16]),Ve(t[8].action(e))],i=!0)},p(s,u){t=s,fe(e,a=ve(l,[u&256&&t[8],u&4096&&t[12]]))},i(s){o||(s&&it(()=>{o&&(n||(n=vt(e,t[1],t[2],!0)),n.run(1))}),o=!0)},o(s){s&&(n||(n=vt(e,t[1],t[2],!1)),n.run(0)),o=!1},d(s){s&&M(e),t[21](null),s&&n&&n.end(),i=!1,Ye(r)}}}function ug(t){let e;const n=t[15].default,o=he(n,t,t[14],Gs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&16640)&&ge(o,n,i,i[14],e?_e(n,i[14],r,og):be(i[14]),Gs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function fg(t){let e,n,o,i;const r=[ug,ag,sg,lg,rg,ig],l=[];function a(s,u){return s[7]&&s[9]?0:s[1]&&s[9]?1:s[3]&&s[5]&&s[9]?2:s[3]&&s[9]?3:s[5]&&s[9]?4:s[9]?5:-1}return~(e=a(t))&&(n=l[e]=r[e](t)),{c(){n&&n.c(),o=Fe()},m(s,u){~e&&l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?~e&&l[e].p(s,u):(n&&(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o)):n=null)},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),~e&&l[e].d(s)}}}function cg(t,e,n){let o;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let r=ue(e,i),l,a,{$$slots:s={},$$scope:u}=e,{transition:f=void 0}=e,{transitionConfig:c=void 0}=e,{inTransition:d=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:h=void 0}=e,{outTransitionConfig:g=void 0}=e,{asChild:p=!1}=e,{el:w=void 0}=e;const{elements:{overlay:v},states:{open:A},getAttrs:R}=vo();le(t,v,L=>n(13,l=L)),le(t,A,L=>n(9,a=L));const q=R("overlay");function F(L){re.call(this,t,L)}function E(L){re.call(this,t,L)}function I(L){re.call(this,t,L)}function N(L){re.call(this,t,L)}function j(L){re.call(this,t,L)}function C(L){Re[L?"unshift":"push"](()=>{w=L,n(0,w)})}function b(L){Re[L?"unshift":"push"](()=>{w=L,n(0,w)})}function T(L){Re[L?"unshift":"push"](()=>{w=L,n(0,w)})}function D(L){Re[L?"unshift":"push"](()=>{w=L,n(0,w)})}function W(L){Re[L?"unshift":"push"](()=>{w=L,n(0,w)})}return t.$$set=L=>{e=Z(Z({},e),je(L)),n(12,r=ue(e,i)),"transition"in L&&n(1,f=L.transition),"transitionConfig"in L&&n(2,c=L.transitionConfig),"inTransition"in L&&n(3,d=L.inTransition),"inTransitionConfig"in L&&n(4,m=L.inTransitionConfig),"outTransition"in L&&n(5,h=L.outTransition),"outTransitionConfig"in L&&n(6,g=L.outTransitionConfig),"asChild"in L&&n(7,p=L.asChild),"el"in L&&n(0,w=L.el),"$$scope"in L&&n(14,u=L.$$scope)},t.$$.update=()=>{t.$$.dirty&8192&&n(8,o=l),t.$$.dirty&256&&Object.assign(o,q)},[w,f,c,d,m,h,g,p,o,a,v,A,r,l,u,s,F,E,I,N,j,C,b,T,D,W]}let dg=class extends pe{constructor(e){super(),me(this,e,cg,fg,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const mg=t=>({builder:t&4}),Ws=t=>({builder:t[2]}),pg=t=>({builder:t&4}),Vs=t=>({builder:t[2]});function hg(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],Ws);let a=[t[2],t[4]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[9](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,mg):be(u[7]),Ws),fe(e,s=ve(a,[f&4&&u[2],f&16&&u[4]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,i()}}}function _g(t){let e;const n=t[8].default,o=he(n,t,t[7],Vs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,pg):be(i[7]),Vs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function gg(t){let e,n,o,i;const r=[_g,hg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function bg(t,e,n){let o;const i=["asChild","id","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{id:f=void 0}=e,{el:c=void 0}=e;const{elements:{description:d},ids:m,getAttrs:h}=vo();le(t,d,w=>n(6,l=w));const g=h("description");function p(w){Re[w?"unshift":"push"](()=>{c=w,n(0,c)})}return t.$$set=w=>{e=Z(Z({},e),je(w)),n(4,r=ue(e,i)),"asChild"in w&&n(1,u=w.asChild),"id"in w&&n(5,f=w.id),"el"in w&&n(0,c=w.el),"$$scope"in w&&n(7,s=w.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&f&&m.description.set(f),t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,g)},[c,u,o,d,r,f,l,s,a,p]}let yg=class extends pe{constructor(e){super(),me(this,e,bg,gg,de,{asChild:1,id:5,el:0})}};function vg(){const t="label",n=qn(t,["root"]);return{NAME:t,getAttrs:n}}const wg=t=>({builder:t&4}),xs=t=>({builder:t[2]}),kg=t=>({builder:t&4}),Ys=t=>({builder:t[2]});function Cg(t){let e,n,o,i;const r=t[8].default,l=he(r,t,t[7],xs);let a=[t[2],t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("label"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[9](e),n=!0,o||(i=[Ve(t[2].action(e)),te(e,"m-mousedown",t[4])],o=!0)},p(u,f){l&&l.p&&(!n||f&132)&&ge(l,r,u,u[7],n?_e(r,u[7],f,wg):be(u[7]),xs),fe(e,s=ve(a,[f&4&&u[2],f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[9](null),o=!1,Ye(i)}}}function Tg(t){let e;const n=t[8].default,o=he(n,t,t[7],Ys);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&132)&&ge(o,n,i,i[7],e?_e(n,i[7],r,kg):be(i[7]),Ys)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Sg(t){let e,n,o,i;const r=[Tg,Cg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Ag(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{root:c}}=Oh();le(t,c,p=>n(6,l=p));const d=Bn(),{getAttrs:m}=vg(),h=m("root");function g(p){Re[p?"unshift":"push"](()=>{f=p,n(0,f)})}return t.$$set=p=>{e=Z(Z({},e),je(p)),n(5,r=ue(e,i)),"asChild"in p&&n(1,u=p.asChild),"el"in p&&n(0,f=p.el),"$$scope"in p&&n(7,s=p.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,h)},[f,u,o,c,d,r,l,s,a,g]}let Ig=class extends pe{constructor(e){super(),me(this,e,Ag,Sg,de,{asChild:1,el:0})}};function Mg(){return{NAME:"progress",PARTS:["root"]}}function Og(t){const{NAME:e,PARTS:n}=Mg(),o=qn(e,n),i={...Rh(yo(t)),getAttrs:o};return{...i,updateOption:Dn(i.options)}}const Pg=t=>({builder:t&4}),Us=t=>({builder:t[2]}),Ng=t=>({builder:t&4}),Ks=t=>({builder:t[2]});function Eg(t){let e,n,o,i;const r=t[10].default,l=he(r,t,t[9],Us);let a=[t[2],t[4]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[11](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&516)&&ge(l,r,u,u[9],n?_e(r,u[9],f,Pg):be(u[9]),Us),fe(e,s=ve(a,[f&4&&u[2],f&16&&u[4]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[11](null),o=!1,i()}}}function $g(t){let e;const n=t[10].default,o=he(n,t,t[9],Ks);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&516)&&ge(o,n,i,i[9],e?_e(n,i[9],r,Ng):be(i[9]),Ks)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Rg(t){let e,n,o,i;const r=[$g,Eg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Lg(t,e,n){let o;const i=["max","value","onValueChange","asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{max:u=void 0}=e,{value:f=void 0}=e,{onValueChange:c=void 0}=e,{asChild:d=!1}=e,{el:m=void 0}=e;const{elements:{root:h},states:{value:g},updateOption:p,getAttrs:w}=Og({max:u,defaultValue:f,onValueChange:({next:R})=>(c==null||c(R),n(5,f=R),R)});le(t,h,R=>n(8,l=R));const v=w("root");function A(R){Re[R?"unshift":"push"](()=>{m=R,n(0,m)})}return t.$$set=R=>{e=Z(Z({},e),je(R)),n(4,r=ue(e,i)),"max"in R&&n(6,u=R.max),"value"in R&&n(5,f=R.value),"onValueChange"in R&&n(7,c=R.onValueChange),"asChild"in R&&n(1,d=R.asChild),"el"in R&&n(0,m=R.el),"$$scope"in R&&n(9,s=R.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&f!==void 0&&g.set(f),t.$$.dirty&64&&p("max",u),t.$$.dirty&256&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,v)},[m,d,o,h,r,f,u,c,l,s,a,A]}let Dg=class extends pe{constructor(e){super(),me(this,e,Lg,Rg,de,{max:6,value:5,onValueChange:7,asChild:1,el:0})}};function _c(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function Fg(t){const{NAME:e,PARTS:n}=_c(),o=qn(e,n),i={...jh(yo(t)),getAttrs:o};return Qi(e,i),{...i,updateOption:Dn(i.options)}}function gc(){const{NAME:t}=_c();return zi(t)}const jg=t=>({builder:t&4,ticks:t&8,thumbs:t&16}),Xs=t=>({builder:t[2],ticks:t[3],thumbs:t[4]}),qg=t=>({builder:t&4,ticks:t&8,thumbs:t&16}),Js=t=>({builder:t[2],ticks:t[3],thumbs:t[4]});function Bg(t){let e,n,o,i;const r=t[18].default,l=he(r,t,t[17],Xs);let a=[t[2],t[8]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("span"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[19](e),n=!0,o||(i=Ve(t[2].action(e)),o=!0)},p(u,f){l&&l.p&&(!n||f&131100)&&ge(l,r,u,u[17],n?_e(r,u[17],f,jg):be(u[17]),Xs),fe(e,s=ve(a,[f&4&&u[2],f&256&&u[8]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[19](null),o=!1,i()}}}function Hg(t){let e;const n=t[18].default,o=he(n,t,t[17],Js);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&131100)&&ge(o,n,i,i[17],e?_e(n,i[17],r,qg):be(i[17]),Js)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Gg(t){let e,n,o,i;const r=[Hg,Bg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Wg(t,e,n){let o;const i=["disabled","min","max","step","orientation","value","onValueChange","asChild","el"];let r=ue(e,i),l,a,s,{$$slots:u={},$$scope:f}=e,{disabled:c=void 0}=e,{min:d=void 0}=e,{max:m=void 0}=e,{step:h=void 0}=e,{orientation:g=void 0}=e,{value:p=void 0}=e,{onValueChange:w=void 0}=e,{asChild:v=!1}=e,{el:A=void 0}=e;const{elements:{root:R,ticks:q,thumbs:F},states:{value:E},updateOption:I,getAttrs:N}=Fg({disabled:c,min:d,max:m,step:h,orientation:g,defaultValue:p,onValueChange:({next:b})=>(p!==b&&(w==null||w(b),n(9,p=b)),b)});le(t,R,b=>n(16,l=b)),le(t,q,b=>n(3,a=b)),le(t,F,b=>n(4,s=b));const j=N("root");function C(b){Re[b?"unshift":"push"](()=>{A=b,n(0,A)})}return t.$$set=b=>{e=Z(Z({},e),je(b)),n(8,r=ue(e,i)),"disabled"in b&&n(10,c=b.disabled),"min"in b&&n(11,d=b.min),"max"in b&&n(12,m=b.max),"step"in b&&n(13,h=b.step),"orientation"in b&&n(14,g=b.orientation),"value"in b&&n(9,p=b.value),"onValueChange"in b&&n(15,w=b.onValueChange),"asChild"in b&&n(1,v=b.asChild),"el"in b&&n(0,A=b.el),"$$scope"in b&&n(17,f=b.$$scope)},t.$$.update=()=>{t.$$.dirty&512&&p!==void 0&&E.set(p),t.$$.dirty&1024&&I("disabled",c),t.$$.dirty&2048&&I("min",d),t.$$.dirty&4096&&I("max",m),t.$$.dirty&8192&&I("step",h),t.$$.dirty&16384&&I("orientation",g),t.$$.dirty&65536&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,j)},[A,v,o,a,s,R,q,F,r,p,c,d,m,h,g,w,l,f,u,C]}let Vg=class extends pe{constructor(e){super(),me(this,e,Wg,Gg,de,{disabled:10,min:11,max:12,step:13,orientation:14,value:9,onValueChange:15,asChild:1,el:0})}};const xg=t=>({builder:t&4}),Zs=t=>({builder:t[2]});function Yg(t){let e,n,o,i=[t[2],t[4]],r={};for(let l=0;l<i.length;l+=1)r=Z(r,i[l]);return{c(){e=P("span"),fe(e,r)},m(l,a){O(l,e,a),t[8](e),n||(o=Ve(t[2].action(e)),n=!0)},p(l,a){fe(e,r=ve(i,[a&4&&l[2],a&16&&l[4]]))},i:Ce,o:Ce,d(l){l&&M(e),t[8](null),n=!1,o()}}}function Ug(t){let e;const n=t[7].default,o=he(n,t,t[6],Zs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&68)&&ge(o,n,i,i[6],e?_e(n,i[6],r,xg):be(i[6]),Zs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Kg(t){let e,n,o,i;const r=[Ug,Yg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function Xg(t,e,n){let o;const i=["asChild","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{el:f=void 0}=e;const{elements:{range:c},getAttrs:d}=gc();le(t,c,g=>n(5,l=g));const m=d("range");function h(g){Re[g?"unshift":"push"](()=>{f=g,n(0,f)})}return t.$$set=g=>{e=Z(Z({},e),je(g)),n(4,r=ue(e,i)),"asChild"in g&&n(1,u=g.asChild),"el"in g&&n(0,f=g.el),"$$scope"in g&&n(6,s=g.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,m)},[f,u,o,c,r,l,s,a,h]}class Jg extends pe{constructor(e){super(),me(this,e,Xg,Kg,de,{asChild:1,el:0})}}const Zg=t=>({builder:t&4}),Qs=t=>({builder:t[2]});function Qg(t){let e,n,o,i=[t[2],t[4]],r={};for(let l=0;l<i.length;l+=1)r=Z(r,i[l]);return{c(){e=P("span"),fe(e,r)},m(l,a){O(l,e,a),t[8](e),n||(o=[Ve(t[2].action(e)),te(e,"m-keydown",t[3])],n=!0)},p(l,a){fe(e,r=ve(i,[a&4&&l[2],a&16&&l[4]]))},i:Ce,o:Ce,d(l){l&&M(e),t[8](null),n=!1,Ye(o)}}}function zg(t){let e;const n=t[7].default,o=he(n,t,t[6],Qs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&68)&&ge(o,n,i,i[6],e?_e(n,i[6],r,Zg):be(i[6]),Qs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function e1(t){let e,n,o,i;const r=[zg,Qg],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function t1(t,e,n){let o;const i=["asChild","el","thumb"];let r=ue(e,i),{$$slots:l={},$$scope:a}=e,{asChild:s=!1}=e,{el:u=void 0}=e,{thumb:f}=e;const{getAttrs:c}=gc(),d=Bn(),m=c("thumb");function h(g){Re[g?"unshift":"push"](()=>{u=g,n(0,u)})}return t.$$set=g=>{e=Z(Z({},e),je(g)),n(4,r=ue(e,i)),"asChild"in g&&n(1,s=g.asChild),"el"in g&&n(0,u=g.el),"thumb"in g&&n(5,f=g.thumb),"$$scope"in g&&n(6,a=g.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&n(2,o=f),t.$$.dirty&4&&Object.assign(o,m)},[u,s,o,d,r,f,a,l,h]}class n1 extends pe{constructor(e){super(),me(this,e,t1,e1,de,{asChild:1,el:0,thumb:5})}}function bc(){return{NAME:"tooltip",PARTS:["arrow","content","trigger"]}}function o1(t){const{NAME:e,PARTS:n}=bc(),o=qn(e,n),i={...Hh({positioning:{placement:"top",gutter:0},openDelay:700,...yo(t),forceVisible:!0}),getAttrs:o};return Qi(e,i),{...i,updateOption:Dn(i.options)}}function wl(){const{NAME:t}=bc();return zi(t)}function i1(t){const n={...{side:"top",align:"center",sideOffset:1},...t},{options:{positioning:o}}=wl();r0(o)({...n})}const r1=t=>({ids:t&1}),zs=t=>({ids:t[0]});function l1(t){let e;const n=t[12].default,o=he(n,t,t[11],zs);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,[r]){o&&o.p&&(!e||r&2049)&&ge(o,n,i,i[11],e?_e(n,i[11],r,r1):be(i[11]),zs)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function s1(t,e,n){let o,{$$slots:i={},$$scope:r}=e,{closeOnEscape:l=void 0}=e,{portal:a=void 0}=e,{closeOnPointerDown:s=void 0}=e,{openDelay:u=void 0}=e,{closeDelay:f=void 0}=e,{open:c=void 0}=e,{onOpenChange:d=void 0}=e,{disableHoverableContent:m=void 0}=e,{group:h=void 0}=e;const{states:{open:g},updateOption:p,ids:w}=o1({closeOnEscape:l,portal:a,closeOnPointerDown:s,openDelay:u,closeDelay:f,forceVisible:!0,defaultOpen:c,disableHoverableContent:m,group:h,onOpenChange:({next:A})=>(c!==A&&(d==null||d(A),n(2,c=A)),A),positioning:{gutter:0,offset:{mainAxis:1}}}),v=rn([w.content,w.trigger],([A,R])=>({content:A,trigger:R}));return le(t,v,A=>n(0,o=A)),t.$$set=A=>{"closeOnEscape"in A&&n(3,l=A.closeOnEscape),"portal"in A&&n(4,a=A.portal),"closeOnPointerDown"in A&&n(5,s=A.closeOnPointerDown),"openDelay"in A&&n(6,u=A.openDelay),"closeDelay"in A&&n(7,f=A.closeDelay),"open"in A&&n(2,c=A.open),"onOpenChange"in A&&n(8,d=A.onOpenChange),"disableHoverableContent"in A&&n(9,m=A.disableHoverableContent),"group"in A&&n(10,h=A.group),"$$scope"in A&&n(11,r=A.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&c!==void 0&&g.set(c),t.$$.dirty&8&&p("closeOnEscape",l),t.$$.dirty&16&&p("portal",a),t.$$.dirty&32&&p("closeOnPointerDown",s),t.$$.dirty&64&&p("openDelay",u),t.$$.dirty&128&&p("closeDelay",f),t.$$.dirty&1024&&p("group",h),t.$$.dirty&512&&p("disableHoverableContent",m)},[o,v,c,l,a,s,u,f,d,m,h,r,i]}class a1 extends pe{constructor(e){super(),me(this,e,s1,l1,de,{closeOnEscape:3,portal:4,closeOnPointerDown:5,openDelay:6,closeDelay:7,open:2,onOpenChange:8,disableHoverableContent:9,group:10})}}const u1=t=>({builder:t[0]&256}),ea=t=>({builder:t[8]}),f1=t=>({builder:t[0]&256}),ta=t=>({builder:t[8]}),c1=t=>({builder:t[0]&256}),na=t=>({builder:t[8]}),d1=t=>({builder:t[0]&256}),oa=t=>({builder:t[8]}),m1=t=>({builder:t[0]&256}),ia=t=>({builder:t[8]}),p1=t=>({builder:t[0]&256}),ra=t=>({builder:t[8]});function h1(t){let e,n,o,i;const r=t[28].default,l=he(r,t,t[27],ea);let a=[t[8],t[13]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("div"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),t[33](e),n=!0,o||(i=[Ve(t[8].action(e)),te(e,"m-pointerdown",t[12]),te(e,"m-pointerenter",t[12])],o=!0)},p(u,f){l&&l.p&&(!n||f[0]&134217984)&&ge(l,r,u,u[27],n?_e(r,u[27],f,u1):be(u[27]),ea),fe(e,s=ve(a,[f[0]&256&&u[8],f[0]&8192&&u[13]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[33](null),o=!1,Ye(i)}}}function _1(t){let e,n,o,i,r;const l=t[28].default,a=he(l,t,t[27],ta);let s=[t[8],t[13]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[32](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"m-pointerdown",t[12]),te(e,"m-pointerenter",t[12])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&134217984)&&ge(a,l,t,t[27],o?_e(l,t[27],c,f1):be(t[27]),ta),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&8192&&t[13]]))},i(f){o||(k(a,f),n&&n.end(1),o=!0)},o(f){S(a,f),f&&(n=Ut(e,t[5],t[6])),o=!1},d(f){f&&M(e),a&&a.d(f),t[32](null),f&&n&&n.end(),i=!1,Ye(r)}}}function g1(t){let e,n,o,i,r;const l=t[28].default,a=he(l,t,t[27],na);let s=[t[8],t[13]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[31](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"m-pointerdown",t[12]),te(e,"m-pointerenter",t[12])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&134217984)&&ge(a,l,t,t[27],o?_e(l,t[27],c,c1):be(t[27]),na),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&8192&&t[13]]))},i(f){o||(k(a,f),f&&(n||it(()=>{n=Yt(e,t[3],t[4]),n.start()})),o=!0)},o(f){S(a,f),o=!1},d(f){f&&M(e),a&&a.d(f),t[31](null),i=!1,Ye(r)}}}function b1(t){let e,n,o,i,r,l;const a=t[28].default,s=he(a,t,t[27],oa);let u=[t[8],t[13]],f={};for(let c=0;c<u.length;c+=1)f=Z(f,u[c]);return{c(){e=P("div"),s&&s.c(),fe(e,f)},m(c,d){O(c,e,d),s&&s.m(e,null),t[30](e),i=!0,r||(l=[Ve(t[8].action(e)),te(e,"m-pointerdown",t[12]),te(e,"m-pointerenter",t[12])],r=!0)},p(c,d){t=c,s&&s.p&&(!i||d[0]&134217984)&&ge(s,a,t,t[27],i?_e(a,t[27],d,d1):be(t[27]),oa),fe(e,f=ve(u,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(c){i||(k(s,c),c&&it(()=>{i&&(o&&o.end(1),n=Yt(e,t[3],t[4]),n.start())}),i=!0)},o(c){S(s,c),n&&n.invalidate(),c&&(o=Ut(e,t[5],t[6])),i=!1},d(c){c&&M(e),s&&s.d(c),t[30](null),c&&o&&o.end(),r=!1,Ye(l)}}}function y1(t){let e,n,o,i,r;const l=t[28].default,a=he(l,t,t[27],ia);let s=[t[8],t[13]],u={};for(let f=0;f<s.length;f+=1)u=Z(u,s[f]);return{c(){e=P("div"),a&&a.c(),fe(e,u)},m(f,c){O(f,e,c),a&&a.m(e,null),t[29](e),o=!0,i||(r=[Ve(t[8].action(e)),te(e,"m-pointerdown",t[12]),te(e,"m-pointerenter",t[12])],i=!0)},p(f,c){t=f,a&&a.p&&(!o||c[0]&134217984)&&ge(a,l,t,t[27],o?_e(l,t[27],c,m1):be(t[27]),ia),fe(e,u=ve(s,[c[0]&256&&t[8],c[0]&8192&&t[13]]))},i(f){o||(k(a,f),f&&it(()=>{o&&(n||(n=vt(e,t[1],t[2],!0)),n.run(1))}),o=!0)},o(f){S(a,f),f&&(n||(n=vt(e,t[1],t[2],!1)),n.run(0)),o=!1},d(f){f&&M(e),a&&a.d(f),t[29](null),f&&n&&n.end(),i=!1,Ye(r)}}}function v1(t){let e;const n=t[28].default,o=he(n,t,t[27],ra);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r[0]&134217984)&&ge(o,n,i,i[27],e?_e(n,i[27],r,p1):be(i[27]),ra)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function w1(t){let e,n,o,i;const r=[v1,y1,b1,g1,_1,h1],l=[];function a(s,u){return s[7]&&s[9]?0:s[1]&&s[9]?1:s[3]&&s[5]&&s[9]?2:s[3]&&s[9]?3:s[5]&&s[9]?4:s[9]?5:-1}return~(e=a(t))&&(n=l[e]=r[e](t)),{c(){n&&n.c(),o=Fe()},m(s,u){~e&&l[e].m(s,u),O(s,o,u),i=!0},p(s,u){let f=e;e=a(s),e===f?~e&&l[e].p(s,u):(n&&(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o)):n=null)},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),~e&&l[e].d(s)}}}function k1(t,e,n){let o;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let r=ue(e,i),l,a,{$$slots:s={},$$scope:u}=e,{transition:f=void 0}=e,{transitionConfig:c=void 0}=e,{inTransition:d=void 0}=e,{inTransitionConfig:m=void 0}=e,{outTransition:h=void 0}=e,{outTransitionConfig:g=void 0}=e,{asChild:p=!1}=e,{id:w=void 0}=e,{side:v="top"}=e,{align:A="center"}=e,{sideOffset:R=0}=e,{alignOffset:q=0}=e,{collisionPadding:F=8}=e,{avoidCollisions:E=!0}=e,{collisionBoundary:I=void 0}=e,{sameWidth:N=!1}=e,{fitViewport:j=!1}=e,{strategy:C="absolute"}=e,{overlap:b=!1}=e,{el:T=void 0}=e;const{elements:{content:D},states:{open:W},ids:L,getAttrs:U}=wl();le(t,D,ee=>n(26,a=ee)),le(t,W,ee=>n(9,l=ee));const X=Bn(),Q=U("content");function z(ee){Re[ee?"unshift":"push"](()=>{T=ee,n(0,T)})}function ne(ee){Re[ee?"unshift":"push"](()=>{T=ee,n(0,T)})}function oe(ee){Re[ee?"unshift":"push"](()=>{T=ee,n(0,T)})}function Ae(ee){Re[ee?"unshift":"push"](()=>{T=ee,n(0,T)})}function ce(ee){Re[ee?"unshift":"push"](()=>{T=ee,n(0,T)})}return t.$$set=ee=>{e=Z(Z({},e),je(ee)),n(13,r=ue(e,i)),"transition"in ee&&n(1,f=ee.transition),"transitionConfig"in ee&&n(2,c=ee.transitionConfig),"inTransition"in ee&&n(3,d=ee.inTransition),"inTransitionConfig"in ee&&n(4,m=ee.inTransitionConfig),"outTransition"in ee&&n(5,h=ee.outTransition),"outTransitionConfig"in ee&&n(6,g=ee.outTransitionConfig),"asChild"in ee&&n(7,p=ee.asChild),"id"in ee&&n(14,w=ee.id),"side"in ee&&n(15,v=ee.side),"align"in ee&&n(16,A=ee.align),"sideOffset"in ee&&n(17,R=ee.sideOffset),"alignOffset"in ee&&n(18,q=ee.alignOffset),"collisionPadding"in ee&&n(19,F=ee.collisionPadding),"avoidCollisions"in ee&&n(20,E=ee.avoidCollisions),"collisionBoundary"in ee&&n(21,I=ee.collisionBoundary),"sameWidth"in ee&&n(22,N=ee.sameWidth),"fitViewport"in ee&&n(23,j=ee.fitViewport),"strategy"in ee&&n(24,C=ee.strategy),"overlap"in ee&&n(25,b=ee.overlap),"el"in ee&&n(0,T=ee.el),"$$scope"in ee&&n(27,u=ee.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&w&&L.content.set(w),t.$$.dirty[0]&67108864&&n(8,o=a),t.$$.dirty[0]&256&&Object.assign(o,Q),t.$$.dirty[0]&67076608&&l&&i1({side:v,align:A,sideOffset:R,alignOffset:q,collisionPadding:F,avoidCollisions:E,collisionBoundary:I,sameWidth:N,fitViewport:j,strategy:C,overlap:b})},[T,f,c,d,m,h,g,p,o,l,D,W,X,r,w,v,A,R,q,F,E,I,N,j,C,b,a,u,s,z,ne,oe,Ae,ce]}let C1=class extends pe{constructor(e){super(),me(this,e,k1,w1,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}};const T1=t=>({builder:t&4}),la=t=>({builder:t[2]}),S1=t=>({builder:t&4}),sa=t=>({builder:t[2]});function A1(t){let e,n,o,i;const r=t[9].default,l=he(r,t,t[8],la);let a=[t[2],{type:"button"},t[5]],s={};for(let u=0;u<a.length;u+=1)s=Z(s,a[u]);return{c(){e=P("button"),l&&l.c(),fe(e,s)},m(u,f){O(u,e,f),l&&l.m(e,null),e.autofocus&&e.focus(),t[10](e),n=!0,o||(i=[Ve(t[2].action(e)),te(e,"m-blur",t[4]),te(e,"m-focus",t[4]),te(e,"m-keydown",t[4]),te(e,"m-pointerdown",t[4]),te(e,"m-pointerenter",t[4]),te(e,"m-pointerleave",t[4])],o=!0)},p(u,f){l&&l.p&&(!n||f&260)&&ge(l,r,u,u[8],n?_e(r,u[8],f,T1):be(u[8]),la),fe(e,s=ve(a,[f&4&&u[2],{type:"button"},f&32&&u[5]]))},i(u){n||(k(l,u),n=!0)},o(u){S(l,u),n=!1},d(u){u&&M(e),l&&l.d(u),t[10](null),o=!1,Ye(i)}}}function I1(t){let e;const n=t[9].default,o=he(n,t,t[8],sa);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&260)&&ge(o,n,i,i[8],e?_e(n,i[8],r,S1):be(i[8]),sa)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function M1(t){let e,n,o,i;const r=[I1,A1],l=[];function a(s,u){return s[1]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,[u]){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function O1(t,e,n){let o;const i=["asChild","id","el"];let r=ue(e,i),l,{$$slots:a={},$$scope:s}=e,{asChild:u=!1}=e,{id:f=void 0}=e,{el:c=void 0}=e;const{elements:{trigger:d},ids:m,getAttrs:h}=wl();le(t,d,v=>n(7,l=v));const g=Bn(),p=h("trigger");function w(v){Re[v?"unshift":"push"](()=>{c=v,n(0,c)})}return t.$$set=v=>{e=Z(Z({},e),je(v)),n(5,r=ue(e,i)),"asChild"in v&&n(1,u=v.asChild),"id"in v&&n(6,f=v.id),"el"in v&&n(0,c=v.el),"$$scope"in v&&n(8,s=v.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&f&&m.trigger.set(f),t.$$.dirty&128&&n(2,o=l),t.$$.dirty&4&&Object.assign(o,p)},[c,u,o,d,g,r,f,l,s,a,w]}class P1 extends pe{constructor(e){super(),me(this,e,O1,M1,de,{asChild:1,id:6,el:0})}}function N1(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&8)&&ge(o,n,i,i[3],e?_e(n,i[3],r,null):be(i[3]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function E1(t){let e,n;const o=[{class:We("text-lg font-semibold leading-none tracking-tight",t[0])},t[1]];let i={$$slots:{default:[N1]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new I0({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We("text-lg font-semibold leading-none tracking-tight",r[0])},l&2&&at(r[1])]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function $1(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(3,l=s.$$scope)},[a,i,r,l]}class sn extends pe{constructor(e){super(),me(this,e,$1,E1,de,{class:0})}}function R1(t){let e;const n=t[1].default,o=he(n,t,t[2],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&4)&&ge(o,n,i,i[2],e?_e(n,i[2],r,null):be(i[2]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function L1(t){let e,n;const o=[t[0]];let i={$$slots:{default:[R1]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new H0({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&1?ve(o,[at(r[0])]):{};l&4&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function D1(t,e,n){const o=[];let i=ue(e,o),{$$slots:r={},$$scope:l}=e;return t.$$set=a=>{e=Z(Z({},e),je(a)),n(0,i=ue(e,o)),"$$scope"in a&&n(2,l=a.$$scope)},[i,r,l]}class F1 extends pe{constructor(e){super(),me(this,e,D1,L1,de,{})}}function j1(t){let e,n,o;const i=t[3].default,r=he(i,t,t[2],null);let l=[{class:n=We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t[0])},t[1]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),r&&r.c(),fe(e,a)},m(s,u){O(s,e,u),r&&r.m(e,null),o=!0},p(s,[u]){r&&r.p&&(!o||u&4)&&ge(r,i,s,s[2],o?_e(i,s[2],u,null):be(s[2]),null),fe(e,a=ve(l,[(!o||u&1&&n!==(n=We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s[0])))&&{class:n},u&2&&s[1]]))},i(s){o||(k(r,s),o=!0)},o(s){S(r,s),o=!1},d(s){s&&M(e),r&&r.d(s)}}}function q1(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(2,l=s.$$scope)},[a,i,l,r]}class Cn extends pe{constructor(e){super(),me(this,e,q1,j1,de,{class:0})}}function B1(t){let e,n,o;const i=t[3].default,r=he(i,t,t[2],null);let l=[{class:n=We("flex flex-col space-y-1.5 text-center sm:text-left",t[0])},t[1]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),r&&r.c(),fe(e,a)},m(s,u){O(s,e,u),r&&r.m(e,null),o=!0},p(s,[u]){r&&r.p&&(!o||u&4)&&ge(r,i,s,s[2],o?_e(i,s[2],u,null):be(s[2]),null),fe(e,a=ve(l,[(!o||u&1&&n!==(n=We("flex flex-col space-y-1.5 text-center sm:text-left",s[0])))&&{class:n},u&2&&s[1]]))},i(s){o||(k(r,s),o=!0)},o(s){S(r,s),o=!1},d(s){s&&M(e),r&&r.d(s)}}}function H1(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(2,l=s.$$scope)},[a,i,l,r]}class an extends pe{constructor(e){super(),me(this,e,H1,B1,de,{class:0})}}function ji(t,{delay:e=0,duration:n=400,easing:o=Ji}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:r=>`opacity: ${r*i}`}}function aa(t,{delay:e=0,duration:n=400,easing:o=Wf,axis:i="y"}={}){const r=getComputedStyle(t),l=+r.opacity,a=i==="y"?"height":"width",s=parseFloat(r[a]),u=i==="y"?["top","bottom"]:["left","right"],f=u.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),c=parseFloat(r[`padding${f[0]}`]),d=parseFloat(r[`padding${f[1]}`]),m=parseFloat(r[`margin${f[0]}`]),h=parseFloat(r[`margin${f[1]}`]),g=parseFloat(r[`border${f[0]}Width`]),p=parseFloat(r[`border${f[1]}Width`]);return{delay:e,duration:n,easing:o,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*l};${a}: ${w*s}px;padding-${u[0]}: ${w*c}px;padding-${u[1]}: ${w*d}px;margin-${u[0]}: ${w*m}px;margin-${u[1]}: ${w*h}px;border-${u[0]}-width: ${w*g}px;border-${u[1]}-width: ${w*p}px;`}}function G1(t){let e,n;const o=[{transition:t[1]},{transitionConfig:t[2]},{class:We("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",t[0])},t[3]];let i={};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new dg({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&15?ve(o,[l&2&&{transition:r[1]},l&4&&{transitionConfig:r[2]},l&1&&{class:We("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r[0])},l&8&&at(r[3])]):{};e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function W1(t,e,n){const o=["class","transition","transitionConfig"];let i=ue(e,o),{class:r=void 0}=e,{transition:l=ji}=e,{transitionConfig:a={duration:150}}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(3,i=ue(e,o)),"class"in s&&n(0,r=s.class),"transition"in s&&n(1,l=s.transition),"transitionConfig"in s&&n(2,a=s.transitionConfig)},[r,l,a,i]}class V1 extends pe{constructor(e){super(),me(this,e,W1,G1,de,{class:0,transition:1,transitionConfig:2})}}/**
 * @license lucide-svelte v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function fa(t,e,n){const o=t.slice();return o[11]=e[n][0],o[12]=e[n][1],o}function kr(t){let e,n=[t[12]],o={};for(let i=0;i<n.length;i+=1)o=Z(o,n[i]);return{c(){e=Zi(t[11]),wi(e,o)},m(i,r){O(i,e,r)},p(i,r){wi(e,o=ve(n,[r&32&&i[12]]))},d(i){i&&M(e)}}}function ca(t){let e=t[11],n,o=t[11]&&kr(t);return{c(){o&&o.c(),n=Fe()},m(i,r){o&&o.m(i,r),O(i,n,r)},p(i,r){i[11]?e?de(e,i[11])?(o.d(1),o=kr(i),e=i[11],o.c(),o.m(n.parentNode,n)):o.p(i,r):(o=kr(i),e=i[11],o.c(),o.m(n.parentNode,n)):e&&(o.d(1),o=null,e=i[11])},d(i){i&&M(n),o&&o.d(i)}}}function x1(t){let e,n,o,i,r,l=Ke(t[5]),a=[];for(let d=0;d<l.length;d+=1)a[d]=ca(fa(t,l,d));const s=t[10].default,u=he(s,t,t[9],null);let f=[ua,t[7],{width:t[2]},{height:t[2]},{stroke:t[1]},{"stroke-width":o=t[4]?Number(t[3])*24/Number(t[2]):t[3]},{class:i=t[6]("lucide-icon","lucide",t[0]?`lucide-${t[0]}`:"",t[8].class)}],c={};for(let d=0;d<f.length;d+=1)c=Z(c,f[d]);return{c(){e=Zi("svg");for(let d=0;d<a.length;d+=1)a[d].c();n=Fe(),u&&u.c(),wi(e,c)},m(d,m){O(d,e,m);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);y(e,n),u&&u.m(e,null),r=!0},p(d,[m]){if(m&32){l=Ke(d[5]);let h;for(h=0;h<l.length;h+=1){const g=fa(d,l,h);a[h]?a[h].p(g,m):(a[h]=ca(g),a[h].c(),a[h].m(e,n))}for(;h<a.length;h+=1)a[h].d(1);a.length=l.length}u&&u.p&&(!r||m&512)&&ge(u,s,d,d[9],r?_e(s,d[9],m,null):be(d[9]),null),wi(e,c=ve(f,[ua,m&128&&d[7],(!r||m&4)&&{width:d[2]},(!r||m&4)&&{height:d[2]},(!r||m&2)&&{stroke:d[1]},(!r||m&28&&o!==(o=d[4]?Number(d[3])*24/Number(d[2]):d[3]))&&{"stroke-width":o},(!r||m&257&&i!==(i=d[6]("lucide-icon","lucide",d[0]?`lucide-${d[0]}`:"",d[8].class)))&&{class:i}]))},i(d){r||(k(u,d),r=!0)},o(d){S(u,d),r=!1},d(d){d&&M(e),ft(a,d),u&&u.d(d)}}}function Y1(t,e,n){const o=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","mergeClasses"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{name:a=void 0}=e,{color:s="currentColor"}=e,{size:u=24}=e,{strokeWidth:f=2}=e,{absoluteStrokeWidth:c=!1}=e,{iconNode:d}=e;const m=(...h)=>h.filter((g,p,w)=>!!g&&w.indexOf(g)===p).join(" ");return t.$$set=h=>{n(8,e=Z(Z({},e),je(h))),n(7,i=ue(e,o)),"name"in h&&n(0,a=h.name),"color"in h&&n(1,s=h.color),"size"in h&&n(2,u=h.size),"strokeWidth"in h&&n(3,f=h.strokeWidth),"absoluteStrokeWidth"in h&&n(4,c=h.absoluteStrokeWidth),"iconNode"in h&&n(5,d=h.iconNode),"$$scope"in h&&n(9,l=h.$$scope)},e=je(e),[a,s,u,f,c,d,m,i,e,l,r]}class U1 extends pe{constructor(e){super(),me(this,e,Y1,x1,de,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5,mergeClasses:6})}get mergeClasses(){return this.$$.ctx[6]}}function K1(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&8)&&ge(o,n,i,i[3],e?_e(n,i[3],r,null):be(i[3]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function X1(t){let e,n;const o=[{name:"x"},t[1],{iconNode:t[0]}];let i={$$slots:{default:[K1]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new U1({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[o[0],l&2&&at(r[1]),l&1&&{iconNode:r[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function J1(t,e,n){let{$$slots:o={},$$scope:i}=e;const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return t.$$set=l=>{n(1,e=Z(Z({},e),je(l))),"$$scope"in l&&n(3,i=l.$$scope)},e=je(e),[r,e,o,i]}class Z1 extends pe{constructor(e){super(),me(this,e,J1,X1,de,{})}}function Q1(t){let e,n,o,i;return e=new Z1({props:{class:"h-4 w-4"}}),{c(){Y(e.$$.fragment),n=B(),o=P("span"),o.textContent="Close",$(o,"class","sr-only")},m(r,l){V(e,r,l),O(r,n,l),O(r,o,l),i=!0},p:Ce,i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),i=!1},d(r){r&&(M(n),M(o)),x(e,r)}}}function z1(t){let e,n,o;const i=t[4].default,r=he(i,t,t[5],null);return n=new R0({props:{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",$$slots:{default:[Q1]},$$scope:{ctx:t}}}),{c(){r&&r.c(),e=B(),Y(n.$$.fragment)},m(l,a){r&&r.m(l,a),O(l,e,a),V(n,l,a),o=!0},p(l,a){r&&r.p&&(!o||a&32)&&ge(r,i,l,l[5],o?_e(i,l[5],a,null):be(l[5]),null);const s={};a&32&&(s.$$scope={dirty:a,ctx:l}),n.$set(s)},i(l){o||(k(r,l),k(n.$$.fragment,l),o=!0)},o(l){S(r,l),S(n.$$.fragment,l),o=!1},d(l){l&&M(e),r&&r.d(l),x(n,l)}}}function eb(t){let e,n,o,i;e=new V1({});const r=[{transition:t[1]},{transitionConfig:t[2]},{class:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg rounded-3xl md:w-full",t[0])},t[3]];let l={$$slots:{default:[z1]},$$scope:{ctx:t}};for(let a=0;a<r.length;a+=1)l=Z(l,r[a]);return o=new ng({props:l}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(a,s){V(e,a,s),O(a,n,s),V(o,a,s),i=!0},p(a,s){const u=s&15?ve(r,[s&2&&{transition:a[1]},s&4&&{transitionConfig:a[2]},s&1&&{class:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg rounded-3xl md:w-full",a[0])},s&8&&at(a[3])]):{};s&32&&(u.$$scope={dirty:s,ctx:a}),o.$set(u)},i(a){i||(k(e.$$.fragment,a),k(o.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(o.$$.fragment,a),i=!1},d(a){a&&M(n),x(e,a),x(o,a)}}}function tb(t){let e,n;return e=new F1({props:{$$slots:{default:[eb]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&47&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function nb(t,e,n){const o=["class","transition","transitionConfig"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e,{transition:s=_o}=e,{transitionConfig:u={duration:400}}=e;return t.$$set=f=>{e=Z(Z({},e),je(f)),n(3,i=ue(e,o)),"class"in f&&n(0,a=f.class),"transition"in f&&n(1,s=f.transition),"transitionConfig"in f&&n(2,u=f.transitionConfig),"$$scope"in f&&n(5,l=f.$$scope)},[a,s,u,i,r,l]}class un extends pe{constructor(e){super(),me(this,e,nb,tb,de,{class:0,transition:1,transitionConfig:2})}}function ob(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&8)&&ge(o,n,i,i[3],e?_e(n,i[3],r,null):be(i[3]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function ib(t){let e,n;const o=[{class:We("text-sm text-muted-foreground",t[0])},t[1]];let i={$$slots:{default:[ob]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new yg({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We("text-sm text-muted-foreground",r[0])},l&2&&at(r[1])]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function rb(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(3,l=s.$$scope)},[a,i,r,l]}class Gn extends pe{constructor(e){super(),me(this,e,rb,ib,de,{class:0})}}const fn=v0,pn={land:{short_title:"Fill the grid",description_title:"You win by filling up all possible plots in the grid, and by meeting some requirements.",win:"You have filled the grid with buildings and met the requirements. Your citizens are happy, fulfilled, hard-working, and healthy. ",requirements:{0:{population_count:200,happiness:100,health:100,employment:1,knowledge:50,required_plots:["pub","small_school","community_center"]},1:{population_count:1e3,happiness:120,health:120,employment:1,knowledge:100,required_plots:["bank"]},2:{population_count:1e3,happiness:200,health:200,employment:1,knowledge:1e3,required_plots:["bank","city_hall"]}}},free_play:{short_title:"Quests",description_title:"Play for as long as you can and build the best city you can while completing quests."}};function lb(t){let e,n;const o=[{class:We("shrink-0 bg-border",t[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t[0])},{orientation:t[1]},{decorative:t[2]},t[3]];let i={};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new h0({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&15?ve(o,[l&3&&{class:We("shrink-0 bg-border",r[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r[0])},l&2&&{orientation:r[1]},l&4&&{decorative:r[2]},l&8&&at(r[3])]):{};e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function sb(t,e,n){const o=["class","orientation","decorative"];let i=ue(e,o),{class:r=void 0}=e,{orientation:l="horizontal"}=e,{decorative:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(3,i=ue(e,o)),"class"in s&&n(0,r=s.class),"orientation"in s&&n(1,l=s.orientation),"decorative"in s&&n(2,a=s.decorative)},[r,l,a,i]}class It extends pe{constructor(e){super(),me(this,e,sb,lb,de,{class:0,orientation:1,decorative:2})}}function ab(t){let e;const n=t[3].default,o=he(n,t,t[4],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&16)&&ge(o,n,i,i[4],e?_e(n,i[4],r,null):be(i[4]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function ub(t){let e,n;const o=[{class:We("text-lg font-semibold",t[0])},{level:t[1]},t[2]];let i={$$slots:{default:[ab]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new zh({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&7?ve(o,[l&1&&{class:We("text-lg font-semibold",r[0])},l&2&&{level:r[1]},l&4&&at(r[2])]):{};l&16&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function fb(t,e,n){const o=["class","level"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e,{level:s="h3"}=e;return t.$$set=u=>{e=Z(Z({},e),je(u)),n(2,i=ue(e,o)),"class"in u&&n(0,a=u.class),"level"in u&&n(1,s=u.level),"$$scope"in u&&n(4,l=u.$$scope)},[a,s,i,r,l]}class yc extends pe{constructor(e){super(),me(this,e,fb,ub,de,{class:0,level:1})}}function cb(t){let e;const n=t[5].default,o=he(n,t,t[8],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&256)&&ge(o,n,i,i[8],e?_e(n,i[8],r,null):be(i[8]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function db(t){let e,n;const o=[{builders:t[3]},{class:We(fo({variant:t[1],size:t[2]}),t[0])},{type:"button"},t[4]];let i={$$slots:{default:[cb]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new i0({props:i}),e.$on("click",t[6]),e.$on("keydown",t[7]),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&31?ve(o,[l&8&&{builders:r[3]},l&7&&{class:We(fo({variant:r[1],size:r[2]}),r[0])},o[2],l&16&&at(r[4])]):{};l&256&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function mb(t,e,n){const o=["class","variant","size","builders"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e,{variant:s="default"}=e,{size:u="default"}=e,{builders:f=[]}=e;function c(m){re.call(this,t,m)}function d(m){re.call(this,t,m)}return t.$$set=m=>{e=Z(Z({},e),je(m)),n(4,i=ue(e,o)),"class"in m&&n(0,a=m.class),"variant"in m&&n(1,s=m.variant),"size"in m&&n(2,u=m.size),"builders"in m&&n(3,f=m.builders),"$$scope"in m&&n(8,l=m.$$scope)},[a,s,u,f,i,r,c,d,l]}class Mt extends pe{constructor(e){super(),me(this,e,mb,db,de,{class:0,variant:1,size:2,builders:3})}}var da=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ct=t=>!t||typeof t!="object"||Object.keys(t).length===0,pb=(t,e)=>JSON.stringify(t)===JSON.stringify(e);function vc(t,e){t.forEach(function(n){Array.isArray(n)?vc(n,e):e.push(n)})}function wc(t){let e=[];return vc(t,e),e}var kc=(...t)=>wc(t).filter(Boolean),Cc=(t,e)=>{let n={},o=Object.keys(t),i=Object.keys(e);for(let r of o)if(i.includes(r)){let l=t[r],a=e[r];typeof l=="object"&&typeof a=="object"?n[r]=Cc(l,a):Array.isArray(l)||Array.isArray(a)?n[r]=kc(a,l):n[r]=a+" "+l}else n[r]=t[r];for(let r of i)o.includes(r)||(n[r]=e[r]);return n},ma=t=>!t||typeof t!="string"?t:t.replace(/\s+/g," ").trim(),hb={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},Tc=t=>t||void 0,Yo=(...t)=>Tc(wc(t).filter(Boolean).join(" ")),Cr=null,zt={},xr=!1,Po=(...t)=>e=>e.twMerge?((!Cr||xr)&&(xr=!1,Cr=Ct(zt)?Gf:bm({...zt,extend:{theme:zt.theme,classGroups:zt.classGroups,conflictingClassGroupModifiers:zt.conflictingClassGroupModifiers,conflictingClassGroups:zt.conflictingClassGroups,...zt.extend}})),Tc(Cr(Yo(t)))):Yo(t),pa=(t,e)=>{for(let n in e)t.hasOwnProperty(n)?t[n]=Yo(t[n],e[n]):t[n]=e[n];return t},_b=(t,e)=>{let{extend:n=null,slots:o={},variants:i={},compoundVariants:r=[],compoundSlots:l=[],defaultVariants:a={}}=t,s={...hb,...e},u=n!=null&&n.base?Yo(n.base,t==null?void 0:t.base):t==null?void 0:t.base,f=n!=null&&n.variants&&!Ct(n.variants)?Cc(i,n.variants):i,c=n!=null&&n.defaultVariants&&!Ct(n.defaultVariants)?{...n.defaultVariants,...a}:a;!Ct(s.twMergeConfig)&&!pb(s.twMergeConfig,zt)&&(xr=!0,zt=s.twMergeConfig);let d=Ct(n==null?void 0:n.slots),m=Ct(o)?{}:{base:Yo(t==null?void 0:t.base,d&&(n==null?void 0:n.base)),...o},h=d?m:pa({...n==null?void 0:n.slots},Ct(m)?{base:t==null?void 0:t.base}:m),g=w=>{if(Ct(f)&&Ct(o)&&d)return Po(u,w==null?void 0:w.class,w==null?void 0:w.className)(s);if(r&&!Array.isArray(r))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof r}`);if(l&&!Array.isArray(l))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof l}`);let v=(b,T,D=[],W)=>{let L=D;if(typeof T=="string")L=L.concat(ma(T).split(" ").map(U=>`${b}:${U}`));else if(Array.isArray(T))L=L.concat(T.reduce((U,X)=>U.concat(`${b}:${X}`),[]));else if(typeof T=="object"&&typeof W=="string"){for(let U in T)if(T.hasOwnProperty(U)&&U===W){let X=T[U];if(X&&typeof X=="string"){let Q=ma(X);L[W]?L[W]=L[W].concat(Q.split(" ").map(z=>`${b}:${z}`)):L[W]=Q.split(" ").map(z=>`${b}:${z}`)}else Array.isArray(X)&&X.length>0&&(L[W]=X.reduce((Q,z)=>Q.concat(`${b}:${z}`),[]))}}return L},A=(b,T=f,D=null,W=null)=>{var L;let U=T[b];if(!U||Ct(U))return null;let X=(L=W==null?void 0:W[b])!=null?L:w==null?void 0:w[b];if(X===null)return null;let Q=da(X),z=Array.isArray(s.responsiveVariants)&&s.responsiveVariants.length>0||s.responsiveVariants===!0,ne=c==null?void 0:c[b],oe=[];if(typeof Q=="object"&&z)for(let[ee,Pe]of Object.entries(Q)){let Ne=U[Pe];if(ee==="initial"){ne=Pe;continue}Array.isArray(s.responsiveVariants)&&!s.responsiveVariants.includes(ee)||(oe=v(ee,Ne,oe,D))}let Ae=Q!=null&&typeof Q!="object"?Q:da(ne),ce=U[Ae]||U.false;return typeof oe=="object"&&typeof D=="string"&&oe[D]?pa(oe,ce):oe.length>0?(oe.push(ce),oe):ce},R=()=>f?Object.keys(f).map(b=>A(b,f)):null,q=(b,T)=>{if(!f||typeof f!="object")return null;let D=new Array;for(let W in f){let L=A(W,f,b,T),U=b==="base"&&typeof L=="string"?L:L&&L[b];U&&(D[D.length]=U)}return D},F={};for(let b in w)w[b]!==void 0&&(F[b]=w[b]);let E=(b,T)=>{var D;let W=typeof(w==null?void 0:w[b])=="object"?{[b]:(D=w[b])==null?void 0:D.initial}:{};return{...c,...F,...W,...T}},I=(b=[],T)=>{let D=[];for(let{class:W,className:L,...U}of b){let X=!0;for(let[Q,z]of Object.entries(U)){let ne=E(Q,T);if(Array.isArray(z)){if(!z.includes(ne[Q])){X=!1;break}}else if(ne[Q]!==z){X=!1;break}}X&&(W&&D.push(W),L&&D.push(L))}return D},N=b=>{let T=I(r,b),D=I(n==null?void 0:n.compoundVariants,b);return kc(D,T)},j=b=>{let T=N(b);if(!Array.isArray(T))return T;let D={};for(let W of T)if(typeof W=="string"&&(D.base=Po(D.base,W)(s)),typeof W=="object")for(let[L,U]of Object.entries(W))D[L]=Po(D[L],U)(s);return D},C=b=>{if(l.length<1)return null;let T={};for(let{slots:D=[],class:W,className:L,...U}of l){if(!Ct(U)){let X=!0;for(let Q of Object.keys(U)){let z=E(Q,b)[Q];if(z===void 0||(Array.isArray(U[Q])?!U[Q].includes(z):U[Q]!==z)){X=!1;break}}if(!X)continue}for(let X of D)T[X]=T[X]||[],T[X].push([W,L])}return T};if(!Ct(o)||!d){let b={};if(typeof h=="object"&&!Ct(h))for(let T of Object.keys(h))b[T]=D=>{var W,L;return Po(h[T],q(T,D),((W=j(D))!=null?W:[])[T],((L=C(D))!=null?L:[])[T],D==null?void 0:D.class,D==null?void 0:D.className)(s)};return b}return Po(u,R(),N(),w==null?void 0:w.class,w==null?void 0:w.className)(s)},p=()=>{if(!(!f||typeof f!="object"))return Object.keys(f)};return g.variantKeys=p(),g.extend=n,g.base=u,g.slots=h,g.variants=f,g.defaultVariants=c,g.compoundSlots=l,g.compoundVariants=r,g};const fo=_b({base:"inline-flex items-center justify-center rounded-md text-sm font-medium whitespace-nowrap transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg- hover:bg-accent hover:text-accent-foreground",secondary:"bg-accent text-accent-foreground hover:bg-accent/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),gb=t=>({builder:t&64}),ha=t=>({builder:t[6]});function bb(t){let e;const n=t[2].default,o=he(n,t,t[5],ha);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&96)&&ge(o,n,i,i[5],e?_e(n,i[5],r,gb):be(i[5]),ha)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function yb(t){let e,n;const o=[{class:We(fo(),t[0])},t[1]];let i={$$slots:{default:[bb,({builder:r})=>({6:r}),({builder:r})=>r?64:0]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new l_({props:i}),e.$on("click",t[3]),e.$on("keydown",t[4]),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We(fo(),r[0])},l&2&&at(r[1])]):{};l&96&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function vb(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;function s(f){re.call(this,t,f)}function u(f){re.call(this,t,f)}return t.$$set=f=>{e=Z(Z({},e),je(f)),n(1,i=ue(e,o)),"class"in f&&n(0,a=f.class),"$$scope"in f&&n(5,l=f.$$scope)},[a,i,r,s,u,l]}class Sc extends pe{constructor(e){super(),me(this,e,vb,yb,de,{class:0})}}const wb=t=>({builder:t&64}),_a=t=>({builder:t[6]});function kb(t){let e;const n=t[2].default,o=he(n,t,t[5],_a);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&96)&&ge(o,n,i,i[5],e?_e(n,i[5],r,wb):be(i[5]),_a)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Cb(t){let e,n;const o=[{class:We(fo({variant:"default"}),"mt-2 sm:mt-0",t[0])},t[1]];let i={$$slots:{default:[kb,({builder:r})=>({6:r}),({builder:r})=>r?64:0]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new m_({props:i}),e.$on("click",t[3]),e.$on("keydown",t[4]),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We(fo({variant:"default"}),"mt-2 sm:mt-0",r[0])},l&2&&at(r[1])]):{};l&96&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Tb(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;function s(f){re.call(this,t,f)}function u(f){re.call(this,t,f)}return t.$$set=f=>{e=Z(Z({},e),je(f)),n(1,i=ue(e,o)),"class"in f&&n(0,a=f.class),"$$scope"in f&&n(5,l=f.$$scope)},[a,i,r,s,u,l]}class Sb extends pe{constructor(e){super(),me(this,e,Tb,Cb,de,{class:0})}}function Ab(t){let e;const n=t[1].default,o=he(n,t,t[2],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&4)&&ge(o,n,i,i[2],e?_e(n,i[2],r,null):be(i[2]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Ib(t){let e,n;const o=[t[0]];let i={$$slots:{default:[Ab]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new v_({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&1?ve(o,[at(r[0])]):{};l&4&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Mb(t,e,n){const o=[];let i=ue(e,o),{$$slots:r={},$$scope:l}=e;return t.$$set=a=>{e=Z(Z({},e),je(a)),n(0,i=ue(e,o)),"$$scope"in a&&n(2,l=a.$$scope)},[i,r,l]}class Ob extends pe{constructor(e){super(),me(this,e,Mb,Ib,de,{})}}function Pb(t){let e,n,o;const i=t[3].default,r=he(i,t,t[2],null);let l=[{class:n=We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t[0])},t[1]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),r&&r.c(),fe(e,a)},m(s,u){O(s,e,u),r&&r.m(e,null),o=!0},p(s,[u]){r&&r.p&&(!o||u&4)&&ge(r,i,s,s[2],o?_e(i,s[2],u,null):be(s[2]),null),fe(e,a=ve(l,[(!o||u&1&&n!==(n=We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s[0])))&&{class:n},u&2&&s[1]]))},i(s){o||(k(r,s),o=!0)},o(s){S(r,s),o=!1},d(s){s&&M(e),r&&r.d(s)}}}function Nb(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(2,l=s.$$scope)},[a,i,l,r]}class kl extends pe{constructor(e){super(),me(this,e,Nb,Pb,de,{class:0})}}function Eb(t){let e,n,o;const i=t[3].default,r=he(i,t,t[2],null);let l=[{class:n=We("flex flex-col space-y-2 text-center sm:text-left",t[0])},t[1]],a={};for(let s=0;s<l.length;s+=1)a=Z(a,l[s]);return{c(){e=P("div"),r&&r.c(),fe(e,a)},m(s,u){O(s,e,u),r&&r.m(e,null),o=!0},p(s,[u]){r&&r.p&&(!o||u&4)&&ge(r,i,s,s[2],o?_e(i,s[2],u,null):be(s[2]),null),fe(e,a=ve(l,[(!o||u&1&&n!==(n=We("flex flex-col space-y-2 text-center sm:text-left",s[0])))&&{class:n},u&2&&s[1]]))},i(s){o||(k(r,s),o=!0)},o(s){S(r,s),o=!1},d(s){s&&M(e),r&&r.d(s)}}}function $b(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(2,l=s.$$scope)},[a,i,l,r]}class Ac extends pe{constructor(e){super(),me(this,e,$b,Eb,de,{class:0})}}function Rb(t){let e,n;const o=[{transition:t[1]},{transitionConfig:t[2]},{class:We("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm ",t[0])},t[3]];let i={};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new x_({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&15?ve(o,[l&2&&{transition:r[1]},l&4&&{transitionConfig:r[2]},l&1&&{class:We("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm ",r[0])},l&8&&at(r[3])]):{};e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Lb(t,e,n){const o=["class","transition","transitionConfig"];let i=ue(e,o),{class:r=void 0}=e,{transition:l=ji}=e,{transitionConfig:a={duration:150}}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(3,i=ue(e,o)),"class"in s&&n(0,r=s.class),"transition"in s&&n(1,l=s.transition),"transitionConfig"in s&&n(2,a=s.transitionConfig)},[r,l,a,i]}class Db extends pe{constructor(e){super(),me(this,e,Lb,Rb,de,{class:0,transition:1,transitionConfig:2})}}function Fb(t){let e;const n=t[4].default,o=he(n,t,t[5],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&32)&&ge(o,n,i,i[5],e?_e(n,i[5],r,null):be(i[5]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function jb(t){let e,n,o,i;e=new Db({});const r=[{transition:t[0]},{transitionConfig:t[1]},{class:We("fixed rounded-2xl left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-sidebarBackground text-sidebarText p-6 shadow-lg md:w-full",t[2])},t[3]];let l={$$slots:{default:[Fb]},$$scope:{ctx:t}};for(let a=0;a<r.length;a+=1)l=Z(l,r[a]);return o=new L_({props:l}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(a,s){V(e,a,s),O(a,n,s),V(o,a,s),i=!0},p(a,s){const u=s&15?ve(r,[s&1&&{transition:a[0]},s&2&&{transitionConfig:a[1]},s&4&&{class:We("fixed rounded-2xl left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-sidebarBackground text-sidebarText p-6 shadow-lg md:w-full",a[2])},s&8&&at(a[3])]):{};s&32&&(u.$$scope={dirty:s,ctx:a}),o.$set(u)},i(a){i||(k(e.$$.fragment,a),k(o.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(o.$$.fragment,a),i=!1},d(a){a&&M(n),x(e,a),x(o,a)}}}function qb(t){let e,n;return e=new Ob({props:{$$slots:{default:[jb]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&47&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Bb(t,e,n){const o=["transition","transitionConfig","class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{transition:a=_o}=e,{transitionConfig:s=void 0}=e,{class:u=void 0}=e;return t.$$set=f=>{e=Z(Z({},e),je(f)),n(3,i=ue(e,o)),"transition"in f&&n(0,a=f.transition),"transitionConfig"in f&&n(1,s=f.transitionConfig),"class"in f&&n(2,u=f.class),"$$scope"in f&&n(5,l=f.$$scope)},[a,s,u,i,r,l]}class Cl extends pe{constructor(e){super(),me(this,e,Bb,qb,de,{transition:0,transitionConfig:1,class:2})}}function Hb(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&8)&&ge(o,n,i,i[3],e?_e(n,i[3],r,null):be(i[3]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Gb(t){let e,n;const o=[{class:We("text-sm text-muted-foreground",t[0])},t[1]];let i={$$slots:{default:[Hb]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new Q_({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We("text-sm text-muted-foreground",r[0])},l&2&&at(r[1])]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Wb(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;return t.$$set=s=>{e=Z(Z({},e),je(s)),n(1,i=ue(e,o)),"class"in s&&n(0,a=s.class),"$$scope"in s&&n(3,l=s.$$scope)},[a,i,r,l]}class Ic extends pe{constructor(e){super(),me(this,e,Wb,Gb,de,{class:0})}}const Tl=Yh;function Vb(t){let e;const n=t[5].default,o=he(n,t,t[6],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&64)&&ge(o,n,i,i[6],e?_e(n,i[6],r,null):be(i[6]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function xb(t){let e,n;const o=[{transition:t[2]},{transitionConfig:t[3]},{sideOffset:t[1]},{class:We("z-[1000] overflow-hidden border bg-sidebarBackground px-3 py-1.5 text-sm text-black shadow-md rounded-2xl",t[0])},t[4]];let i={$$slots:{default:[Vb]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new C1({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&31?ve(o,[l&4&&{transition:r[2]},l&8&&{transitionConfig:r[3]},l&2&&{sideOffset:r[1]},l&1&&{class:We("z-[1000] overflow-hidden border bg-sidebarBackground px-3 py-1.5 text-sm text-black shadow-md rounded-2xl",r[0])},l&16&&at(r[4])]):{};l&64&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Yb(t,e,n){const o=["class","sideOffset","transition","transitionConfig"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e,{sideOffset:s=16}=e,{transition:u=_o}=e,{transitionConfig:f={y:6,duration:100}}=e;return t.$$set=c=>{e=Z(Z({},e),je(c)),n(4,i=ue(e,o)),"class"in c&&n(0,a=c.class),"sideOffset"in c&&n(1,s=c.sideOffset),"transition"in c&&n(2,u=c.transition),"transitionConfig"in c&&n(3,f=c.transitionConfig),"$$scope"in c&&n(6,l=c.$$scope)},[a,s,u,f,i,r,l]}class wo extends pe{constructor(e){super(),me(this,e,Yb,xb,de,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}const ko=a1,Co=P1;function Ub(t){let e=(t[4].length>0?t[4]:"Why are you hovering here?")+"",n;return{c(){n=G(e)},m(o,i){O(o,n,i)},p(o,i){i&16&&e!==(e=(o[4].length>0?o[4]:"Why are you hovering here?")+"")&&ae(n,e)},d(o){o&&M(n)}}}function Kb(t){let e,n;return{c(){e=P("div"),n=G(t[0])},m(o,i){O(o,e,i),y(e,n)},p(o,i){i&1&&ae(n,o[0])},d(o){o&&M(e)}}}function Xb(t){let e,n;return e=new Mt({props:{class:`text-sm flex flex-col  cursor-pointer py-1.5 rounded-xl bg-accent text-accentText
  `+t[2]+" cursor-pointer opacity-"+t[3]+" "+(t[3]<100?"hover:opacity-40":"")+` transition-all duration-150 filter hover:brightness-110
  `,$$slots:{default:[Kb]},$$scope:{ctx:t}}}),e.$on("click",function(){Ft(t[1])&&t[1].apply(this,arguments)}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){t=o;const r={};i&12&&(r.class=`text-sm flex flex-col  cursor-pointer py-1.5 rounded-xl bg-accent text-accentText
  `+t[2]+" cursor-pointer opacity-"+t[3]+" "+(t[3]<100?"hover:opacity-40":"")+` transition-all duration-150 filter hover:brightness-110
  `),i&33&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Jb(t){let e,n,o,i;return e=new wo({props:{$$slots:{default:[Ub]},$$scope:{ctx:t}}}),o=new Co({props:{class:"flex flex-col ",$$slots:{default:[Xb]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&48&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&47&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Zb(t){let e,n;return e=new ko({props:{openDelay:t[4].length>0?200:1e4,closeDelay:0,$$slots:{default:[Jb]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&16&&(r.openDelay=o[4].length>0?200:1e4),i&63&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Qb(t,e,n){let{text:o}=e,{onOpen:i}=e,{styling:r="bg-accent text-accentText"}=e,{opacity:l=100}=e,{onHoverText:a=""}=e;return t.$$set=s=>{"text"in s&&n(0,o=s.text),"onOpen"in s&&n(1,i=s.onOpen),"styling"in s&&n(2,r=s.styling),"opacity"in s&&n(3,l=s.opacity),"onHoverText"in s&&n(4,a=s.onHoverText)},[o,i,r,l,a]}class Ht extends pe{constructor(e){super(),me(this,e,Qb,Zb,de,{text:0,onOpen:1,styling:2,opacity:3,onHoverText:4})}}function ga(t,e,n){const o=t.slice();return o[25]=e[n],o}function ba(t,e,n){const o=t.slice();return o[28]=e[n],o}function zb(t){let e;return{c(){e=G("Pause Menu")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ey(t){let e,n,o,i;return e=new sn({props:{class:"text-3xl font-semibold text-accentText",$$slots:{default:[zb]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),o=P("span"),o.textContent="Unpause any time by pressing 'P'"},m(r,l){V(e,r,l),O(r,n,l),O(r,o,l),i=!0},p(r,l){const a={};l[1]&1&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),i=!1},d(r){r&&(M(n),M(o)),x(e,r)}}}function ya(t){let e,n,o,i,r,l=JSON.stringify(t[4].requirements[t[1].difficulty].population_count)+"",a,s,u=JSON.stringify(t[1].townInfo.population_count)+"",f,c,d,m,h=JSON.stringify(t[4].requirements[t[1].difficulty].happiness)+"",g,p,w=JSON.stringify(t[1].townInfo.happiness)+"",v,A,R,q,F=JSON.stringify(t[4].requirements[t[1].difficulty].employment*100)+"",E,I,N=JSON.stringify((t[1].townInfo.employees/t[1].townInfo.population_count||0)*100)+"",j,C,b,T,D,W=JSON.stringify(t[4].requirements[t[1].difficulty].health)+"",L,U,X=JSON.stringify(t[1].townInfo.health)+"",Q,z,ne,oe,Ae=JSON.stringify(t[4].requirements[t[1].difficulty].knowledge)+"",ce,ee,Pe=JSON.stringify(t[1].townInfo.knowledge_points)+"",Ne,_,K;function J(ye,Ze){return ye[1].townInfo.population_count>=ye[4].requirements[ye[1].difficulty].population_count?ny:ty}let se=J(t),we=se(t);function Oe(ye,Ze){return ye[1].townInfo.happiness>=ye[4].requirements[ye[1].difficulty].happiness?iy:oy}let De=Oe(t),qe=De(t);function He(ye,Ze){return ye[1].townInfo.employees/ye[1].townInfo.population_count>=ye[4].requirements[ye[1].difficulty].employment?ly:ry}let Be=He(t),Je=Be(t);function Ue(ye,Ze){return ye[1].townInfo.health>=ye[4].requirements[ye[1].difficulty].health?ay:sy}let Se=Ue(t),Ee=Se(t);function Le(ye,Ze){return ye[1].townInfo.knowledge_points>=ye[4].requirements[ye[1].difficulty].knowledge?fy:uy}let ze=Le(t),lt=ze(t),rt=t[4].requirements[t[1].difficulty].required_plots!=null&&t[4].requirements[t[1].difficulty].required_plots.length>0&&va(t);return{c(){e=P("div"),e.textContent=`With your difficulty (${t[5]}), you must also have:`,n=B(),o=P("ul"),i=P("li"),we.c(),r=G(`
                  Population: `),a=G(l),s=G(" - Currently at "),f=G(u),c=B(),d=P("li"),qe.c(),m=G(`
                  Happiness: `),g=G(h),p=G(" - Currently at "),v=G(w),A=B(),R=P("li"),Je.c(),q=G(`
                  Employment: `),E=G(F),I=G("% - Currently at "),j=G(N),C=G("%"),b=B(),T=P("li"),Ee.c(),D=G(`
                  Health: `),L=G(W),U=G(" - Currently at "),Q=G(X),z=B(),ne=P("li"),lt.c(),oe=G(`
                  Knowledge: `),ce=G(Ae),ee=G(" - Currently at "),Ne=G(Pe),_=B(),rt&&rt.c(),K=Fe(),$(e,"class","leading-relaxed text-sm"),$(o,"class","list-inside list-disc leading-relaxedmt-0 text-sm")},m(ye,Ze){O(ye,e,Ze),O(ye,n,Ze),O(ye,o,Ze),y(o,i),we.m(i,null),y(i,r),y(i,a),y(i,s),y(i,f),y(o,c),y(o,d),qe.m(d,null),y(d,m),y(d,g),y(d,p),y(d,v),y(o,A),y(o,R),Je.m(R,null),y(R,q),y(R,E),y(R,I),y(R,j),y(R,C),y(o,b),y(o,T),Ee.m(T,null),y(T,D),y(T,L),y(T,U),y(T,Q),y(o,z),y(o,ne),lt.m(ne,null),y(ne,oe),y(ne,ce),y(ne,ee),y(ne,Ne),O(ye,_,Ze),rt&&rt.m(ye,Ze),O(ye,K,Ze)},p(ye,Ze){se!==(se=J(ye))&&(we.d(1),we=se(ye),we&&(we.c(),we.m(i,r))),Ze[0]&2&&l!==(l=JSON.stringify(ye[4].requirements[ye[1].difficulty].population_count)+"")&&ae(a,l),Ze[0]&2&&u!==(u=JSON.stringify(ye[1].townInfo.population_count)+"")&&ae(f,u),De!==(De=Oe(ye))&&(qe.d(1),qe=De(ye),qe&&(qe.c(),qe.m(d,m))),Ze[0]&2&&h!==(h=JSON.stringify(ye[4].requirements[ye[1].difficulty].happiness)+"")&&ae(g,h),Ze[0]&2&&w!==(w=JSON.stringify(ye[1].townInfo.happiness)+"")&&ae(v,w),Be!==(Be=He(ye))&&(Je.d(1),Je=Be(ye),Je&&(Je.c(),Je.m(R,q))),Ze[0]&2&&F!==(F=JSON.stringify(ye[4].requirements[ye[1].difficulty].employment*100)+"")&&ae(E,F),Ze[0]&2&&N!==(N=JSON.stringify((ye[1].townInfo.employees/ye[1].townInfo.population_count||0)*100)+"")&&ae(j,N),Se!==(Se=Ue(ye))&&(Ee.d(1),Ee=Se(ye),Ee&&(Ee.c(),Ee.m(T,D))),Ze[0]&2&&W!==(W=JSON.stringify(ye[4].requirements[ye[1].difficulty].health)+"")&&ae(L,W),Ze[0]&2&&X!==(X=JSON.stringify(ye[1].townInfo.health)+"")&&ae(Q,X),ze!==(ze=Le(ye))&&(lt.d(1),lt=ze(ye),lt&&(lt.c(),lt.m(ne,oe))),Ze[0]&2&&Ae!==(Ae=JSON.stringify(ye[4].requirements[ye[1].difficulty].knowledge)+"")&&ae(ce,Ae),Ze[0]&2&&Pe!==(Pe=JSON.stringify(ye[1].townInfo.knowledge_points)+"")&&ae(Ne,Pe),ye[4].requirements[ye[1].difficulty].required_plots!=null&&ye[4].requirements[ye[1].difficulty].required_plots.length>0?rt?rt.p(ye,Ze):(rt=va(ye),rt.c(),rt.m(K.parentNode,K)):rt&&(rt.d(1),rt=null)},d(ye){ye&&(M(e),M(n),M(o),M(_),M(K)),we.d(),qe.d(),Je.d(),Ee.d(),lt.d(),rt&&rt.d(ye)}}}function ty(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ny(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function oy(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function iy(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ry(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ly(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function sy(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ay(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function uy(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function fy(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function va(t){let e,n,o,i=Ke(t[4].requirements[t[1].difficulty].required_plots),r=[];for(let l=0;l<i.length;l+=1)r[l]=wa(ba(t,i,l));return{c(){e=P("br"),n=G(`
                You also need to have these plots:
                `);for(let l=0;l<r.length;l+=1)r[l].c();o=Fe()},m(l,a){O(l,e,a),O(l,n,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,a);O(l,o,a)},p(l,a){if(a[0]&18){i=Ke(l[4].requirements[l[1].difficulty].required_plots);let s;for(s=0;s<i.length;s+=1){const u=ba(l,i,s);r[s]?r[s].p(u,a):(r[s]=wa(u),r[s].c(),r[s].m(o.parentNode,o))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},d(l){l&&(M(e),M(n),M(o)),ft(r,l)}}}function cy(t){let e;return{c(){e=G("❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function dy(t){let e;return{c(){e=G("✅")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function wa(t){let e,n,o,i,r=t[28]+"",l,a;function s(c,d){return d[0]&2&&(o=null),o==null&&(o=Ge(c[28],c[1]).length>0),o?dy:cy}let u=s(t,[-1,-1]),f=u(t);return{c(){e=P("div"),n=P("li"),f.c(),i=B(),l=G(r),a=B(),$(e,"class","text-sm")},m(c,d){O(c,e,d),y(e,n),f.m(n,null),y(n,i),y(n,l),y(e,a)},p(c,d){u!==(u=s(c,d))&&(f.d(1),f=u(c),f&&(f.c(),f.m(n,i))),d[0]&2&&r!==(r=c[28]+"")&&ae(l,r)},d(c){c&&M(e),f.d()}}}function ka(t){let e,n;return e=new Ht({props:{styling:"bg-black opacity-50 w-min",text:"🔄 New mock town",onOpen:t[18]}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&2&&(r.onOpen=o[18]),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Ca(t){let e,n;function o(){return t[19](t[25])}return e=new Ht({props:{text:`💰 Collect Prize: $${Sa(t[25].prize)} gold`,styling:"bg-yellow-300 text-black",onOpen:o}}),{c(){Y(e.$$.fragment)},m(i,r){V(e,i,r),n=!0},p(i,r){t=i;const l={};r[0]&1&&(l.text=`💰 Collect Prize: $${Sa(t[25].prize)} gold`),r[0]&1&&(l.onOpen=o),e.$set(l)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Ta(t){let e,n,o,i,r,l,a=t[25].title+"",s,u,f,c=t[25].requirements+"",d,m,h,g=t[25].icon+"",p,w,v,A=t[25].description+"",R,q,F,E,I=t[7](t[25].id)+"",N,j,C,b=t[12](t[25].id)&&!t[8](t[25].id),T,D,W,L=b&&Ca(t);return{c(){e=P("div"),n=P("div"),o=P("div"),i=P("span"),r=P("div"),l=P("span"),s=G(a),u=B(),f=P("div"),d=G(c),m=B(),h=P("div"),p=G(g),w=B(),v=P("div"),R=G(A),q=B(),F=P("div"),E=G("✅ Completed on Day "),N=G(I),C=B(),L&&L.c(),T=B(),$(l,"class","font-semibold text-lg"),$(f,"class","font-thin opacity-75 text-xs"),$(r,"class","flex flex-row gap-3 w-[100%] text- items-center "),$(h,"class","text-2xl pr-1 break-inside-avoid "),$(i,"class","flex flex-row justify-between w-[100%]"),$(o,"class","min-w-32 flex"),$(v,"class","opacity-85 text-xs font-light"),$(F,"class",j="pb-2"+(t[12](t[25].id)?"":"hidden")+" text-xs text-green-400"),$(n,"class","flex-col flex px-3 py-2 gap-0"),$(e,"class",D="flex flex-col gap-3 cursor-default rounded-xl "+(t[12](t[25].id)?"bg-green-700 text-accentText":"bg-gray-500 opacity-35"))},m(U,X){O(U,e,X),y(e,n),y(n,o),y(o,i),y(i,r),y(r,l),y(l,s),y(r,u),y(r,f),y(f,d),y(i,m),y(i,h),y(h,p),y(n,w),y(n,v),y(v,R),y(n,q),y(n,F),y(F,E),y(F,N),y(n,C),L&&L.m(n,null),y(e,T),W=!0},p(U,X){(!W||X[0]&1)&&a!==(a=U[25].title+"")&&ae(s,a),(!W||X[0]&1)&&c!==(c=U[25].requirements+"")&&ae(d,c),(!W||X[0]&1)&&g!==(g=U[25].icon+"")&&ae(p,g),(!W||X[0]&1)&&A!==(A=U[25].description+"")&&ae(R,A),(!W||X[0]&1)&&I!==(I=U[7](U[25].id)+"")&&ae(N,I),(!W||X[0]&1&&j!==(j="pb-2"+(U[12](U[25].id)?"":"hidden")+" text-xs text-green-400"))&&$(F,"class",j),X[0]&1&&(b=U[12](U[25].id)&&!U[8](U[25].id)),b?L?(L.p(U,X),X[0]&1&&k(L,1)):(L=Ca(U),L.c(),k(L,1),L.m(n,null)):L&&(Ie(),S(L,1,1,()=>{L=null}),Me()),(!W||X[0]&1&&D!==(D="flex flex-col gap-3 cursor-default rounded-xl "+(U[12](U[25].id)?"bg-green-700 text-accentText":"bg-gray-500 opacity-35")))&&$(e,"class",D)},i(U){W||(k(L),W=!0)},o(U){S(L),W=!1},d(U){U&&M(e),L&&L.d()}}}function my(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h,g,p,w,v,A=t[1].gameSettings.includes("devMode"),R,q,F,E,I,N,j,C,b,T,D,W,L,U,X;e=new an({props:{$$slots:{default:[ey]},$$scope:{ctx:t}}});let Q=t[1].endGoal=="land"&&ya(t);m=new Ht({props:{styling:"w-min",text:"💾 Save Game",onOpen:t[10]}}),g=new Ht({props:{styling:"w-min",text:"📤 Load Game",onOpen:t[17]}}),w=new Ht({props:{styling:"bg-black opacity-50 w-min",text:"🔄 New Game",onOpen:t[14]}});let z=A&&ka(t);q=new It({props:{orientation:"vertical"}});let ne=Ke(t[0]),oe=[];for(let ce=0;ce<ne.length;ce+=1)oe[ce]=Ta(ga(t,ne,ce));const Ae=ce=>S(oe[ce],1,1,()=>{oe[ce]=null});return{c(){Y(e.$$.fragment),n=B(),o=P("div"),i=P("div"),r=P("div"),l=P("h4"),l.textContent="This game",a=B(),s=P("span"),s.textContent=`${t[4].description_title}`,u=B(),f=P("div"),Q&&Q.c(),c=B(),d=P("div"),Y(m.$$.fragment),h=B(),Y(g.$$.fragment),p=B(),Y(w.$$.fragment),v=B(),z&&z.c(),R=B(),Y(q.$$.fragment),F=B(),E=P("div"),I=P("h4"),I.textContent=`Your achievement (${t[6].length}
          / ${pt.length})`,N=B(),j=P("span"),j.textContent="Track your progress through games & complete challenges!",C=B(),b=P("br"),T=B(),D=P("div"),W=P("div");for(let ce=0;ce<oe.length;ce+=1)oe[ce].c();L=B(),U=P("span"),U.textContent=`Prizes apply to the current game you are in. You can wait to apply
          them until the right time.`,$(l,"class","text-xl font-semibold mb-2"),$(s,"class","text-sm text-accentText opacity-75"),$(f,"class","mt-6 gap-0 py-0 text-accentText opacity-75 text-sm"),$(r,"class","flex-col h-max"),$(d,"class","flex flex-row gap-3"),$(i,"class","flex flex-col gap-6 justify-between"),$(I,"class","underline underline-offset-4"),$(j,"class","text-sm text-gray-400"),$(W,"class","flex flex-col gap-4 overflow-scroll pb-10 scroll-smooth"),$(D,"class","overflow-scroll mt-2 h-[60vh]"),$(U,"class","text-sm text-yellow-400"),$(o,"class","flex flex-row w-full gap-10")},m(ce,ee){V(e,ce,ee),O(ce,n,ee),O(ce,o,ee),y(o,i),y(i,r),y(r,l),y(r,a),y(r,s),y(r,u),y(r,f),Q&&Q.m(f,null),y(i,c),y(i,d),V(m,d,null),y(d,h),V(g,d,null),y(d,p),V(w,d,null),y(d,v),z&&z.m(d,null),y(o,R),V(q,o,null),y(o,F),y(o,E),y(E,I),y(E,N),y(E,j),y(E,C),y(E,b),y(E,T),y(E,D),y(D,W);for(let Pe=0;Pe<oe.length;Pe+=1)oe[Pe]&&oe[Pe].m(W,null);y(E,L),y(E,U),X=!0},p(ce,ee){const Pe={};if(ee[1]&1&&(Pe.$$scope={dirty:ee,ctx:ce}),e.$set(Pe),ce[1].endGoal=="land"?Q?Q.p(ce,ee):(Q=ya(ce),Q.c(),Q.m(f,null)):Q&&(Q.d(1),Q=null),ee[0]&2&&(A=ce[1].gameSettings.includes("devMode")),A?z?(z.p(ce,ee),ee[0]&2&&k(z,1)):(z=ka(ce),z.c(),k(z,1),z.m(d,null)):z&&(Ie(),S(z,1,1,()=>{z=null}),Me()),ee[0]&4993){ne=Ke(ce[0]);let Ne;for(Ne=0;Ne<ne.length;Ne+=1){const _=ga(ce,ne,Ne);oe[Ne]?(oe[Ne].p(_,ee),k(oe[Ne],1)):(oe[Ne]=Ta(_),oe[Ne].c(),k(oe[Ne],1),oe[Ne].m(W,null))}for(Ie(),Ne=ne.length;Ne<oe.length;Ne+=1)Ae(Ne);Me()}},i(ce){if(!X){k(e.$$.fragment,ce),k(m.$$.fragment,ce),k(g.$$.fragment,ce),k(w.$$.fragment,ce),k(z),k(q.$$.fragment,ce);for(let ee=0;ee<ne.length;ee+=1)k(oe[ee]);X=!0}},o(ce){S(e.$$.fragment,ce),S(m.$$.fragment,ce),S(g.$$.fragment,ce),S(w.$$.fragment,ce),S(z),S(q.$$.fragment,ce),oe=oe.filter(Boolean);for(let ee=0;ee<oe.length;ee+=1)S(oe[ee]);X=!1},d(ce){ce&&(M(n),M(o)),x(e,ce),Q&&Q.d(),x(m),x(g),x(w),z&&z.d(),x(q),ft(oe,ce)}}}function py(t){let e,n;return e=new un({props:{class:"max-w-[90vw] max-h-[90vh] bg-popupBackground text-accentText",$$slots:{default:[my]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&3|i[1]&1&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function hy(t){var o;let e=((o=t[13]())==null?void 0:o.title)+"",n;return{c(){n=G(e)},m(i,r){O(i,n,r)},p:Ce,d(i){i&&M(n)}}}function _y(t){let e,n,o,i;return{c(){var r,l;e=P("div"),n=P("div"),n.textContent=`${(r=t[13]())==null?void 0:r.icon}`,o=B(),i=P("div"),i.textContent=`${(l=t[13]())==null?void 0:l.description}`,$(n,"class","text-center w-[30%] align-middle flex flex-col text-8xl"),$(i,"class","pl-8 w-[80%] align-middle flex flex-col justify-center text-lg"),$(e,"class","flex flex-row align-middle justify-evenly px-6 py-4")},m(r,l){O(r,e,l),y(e,n),y(e,o),y(e,i)},p:Ce,d(r){r&&M(e)}}}function gy(t){let e,n,o,i;return e=new yc({props:{class:"text-center text-lg font-bold",$$slots:{default:[hy]},$$scope:{ctx:t}}}),o=new Ic({props:{$$slots:{default:[_y]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l[1]&1&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l[1]&1&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function by(t){let e;return{c(){e=G("Close to collect prize")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function yy(t){let e,n;return e=new Sb({props:{$$slots:{default:[by]},$$scope:{ctx:t}}}),e.$on("click",t[21]),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[1]&1&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function vy(t){let e,n,o,i;return e=new Ac({props:{$$slots:{default:[gy]},$$scope:{ctx:t}}}),o=new kl({props:{$$slots:{default:[yy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l[1]&1&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l[0]&8|l[1]&1&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function wy(t){let e,n;return e=new Cl({props:{$$slots:{default:[vy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&8|i[1]&1&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function ky(t){let e,n,o,i,r;function l(s){t[20](s)}let a={$$slots:{default:[py]},$$scope:{ctx:t}};return t[2]!==void 0&&(a.open=t[2]),e=new fn({props:a}),Re.push(()=>Kt(e,"open",l)),i=new Tl({props:{open:t[3],$$slots:{default:[wy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),o=B(),Y(i.$$.fragment)},m(s,u){V(e,s,u),O(s,o,u),V(i,s,u),r=!0},p(s,u){const f={};u[0]&3|u[1]&1&&(f.$$scope={dirty:u,ctx:s}),!n&&u[0]&4&&(n=!0,f.open=s[2],xt(()=>n=!1)),e.$set(f);const c={};u[0]&8&&(c.open=s[3]),u[0]&8|u[1]&1&&(c.$$scope={dirty:u,ctx:s}),i.$set(c)},i(s){r||(k(e.$$.fragment,s),k(i.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(i.$$.fragment,s),r=!1},d(s){s&&M(o),x(e,s),x(i,s)}}}function Sa(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function Cy(t){const e=JSON.parse(t);return e.townInfo!=null&&e.difficulty!=null}function Ty(t,e,n){let o,i,r,l,a;le(t,$e,C=>n(1,o=C)),le(t,Et,C=>n(2,i=C)),le(t,_n,C=>n(23,r=C)),le(t,Wl,C=>n(16,l=C)),le(t,Pi,C=>n(3,a=C));const u=pn[o.endGoal],f=Lf[o.difficulty]||0;pt.sort((C,b)=>v(C.id)&&!v(b.id)?-1:!v(C.id)&&v(b.id)?1:0);const c=pt.filter(C=>v(C.id));function d(C){const b=r.achievements.find(T=>T[0]==C);return b==null?0:`${b[1]} in ${b[2]}.`}function m(C){const b=r.achievements.find(T=>T[0]==C);return b==null?!1:b[3]}function h(C){const b=r.achievements.find(D=>D[0]==C);if(b==null)return;const T=pt.find(D=>D.id==C);T!=null&&(Te($e,o.townInfo.gold+=T.prize,o),b[3]=!0,Te(_n,r.achievements=r.achievements.map(D=>D[0]==C?b:D),r))}let g=pt;function p(){const C=JSON.stringify(o),b=new Blob([C],{type:"text/plain"}),T=URL.createObjectURL(b),D=document.createElement("a");D.href=T,D.download=`${new Date().toISOString()}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(T)}function w(C){const b=C.target.files;if(b==null)return;const T=b[0],D=new FileReader;D.onload=function(W){if(W.target==null)return;const L=W.target.result;if(typeof L=="string"){if(!Cy(L)){St.set("Invalid game file");return}Fr(JSON.parse(L))}else St.set("Invalid game file: is not String.")},D.readAsText(T)}function v(C){return r.achievements==null?!1:r.achievements.find(b=>b[0]==C)!=null}function A(){Wl.update(C=>!C),localStorage.setItem("showCompletedAchievements",localStorage.getItem("showCompletedAchievements")==="true"?"false":"true")}localStorage.getItem("pauseMenuTab")==null&&(localStorage.setItem("pauseMenuTab","game"),Nm.set("game"));function R(){const C=r.achievements[r.achievements.length-1];if(C!=null)return pt.find(b=>b.id==C[0])}function q(){Te(Et,i=!0,i),localStorage.setItem("reset","true"),Te($e,o=null,o),localStorage.removeItem(_t),Fr()}const F=()=>{const C=document.createElement("input");C.type="file",C.onchange=b=>w(b),C.click()},E=()=>{Sm(o)},I=C=>{h(C.id);const b=document.getElementById(`collectPrize-${C.id}`);b&&(b.style.display="none")};function N(C){i=C,Et.set(i)}const j=()=>{Te(Pi,a=!1,a)};return t.$$.update=()=>{if(t.$$.dirty[0]&65539&&o)if(l)n(0,g=pt);else{n(0,g=[]);for(let C=0;C<pt.length;C++)(!v(pt[C].id)||!m(pt[C].id))&&g.push(pt[C])}},[g,o,i,a,u,f,c,d,m,h,p,w,v,R,q,A,l,F,E,I,N,j]}class Sy extends pe{constructor(e){super(),me(this,e,Ty,ky,de,{toggleShowCompleted:15},null,[-1,-1])}get toggleShowCompleted(){return this.$$.ctx[15]}}function Aa(t,e,n){const o=t.slice();return o[5]=e[n],o}function Ay(t){let e;return{c(){e=G("🚨 Plot Disabled Warning")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function Iy(t){let e,n;return e=new sn({props:{class:"text-xl font-semibold",$$slots:{default:[Ay]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&256&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Ia(t){let e,n=t[5]+"",o;return{c(){e=P("li"),o=G(n)},m(i,r){O(i,e,r),y(e,o)},p(i,r){r&1&&n!==(n=i[5]+"")&&ae(o,n)},d(i){i&&M(e)}}}function My(t){let e;return{c(){e=G("Bulldoze")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function Oy(t){let e,n=t[0].plotCost+"",o,i;return{c(){e=G("Snooze ("),o=G(n),i=G(" gold)")},m(r,l){O(r,e,l),O(r,o,l),O(r,i,l)},p(r,l){l&1&&n!==(n=r[0].plotCost+"")&&ae(o,n)},d(r){r&&(M(e),M(o),M(i))}}}function Py(t){let e,n,o,i;return e=new Mt({props:{variant:"destructive",$$slots:{default:[My]},$$scope:{ctx:t}}}),e.$on("click",t[3]),o=new Mt({props:{variant:"default",disabled:t[1].townInfo.gold<t[0].plotCost,$$slots:{default:[Oy]},$$scope:{ctx:t}}}),o.$on("click",t[2]),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&256&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&3&&(s.disabled=r[1].townInfo.gold<r[0].plotCost),l&257&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Ny(t){let e,n,o,i,r,l=t[0].plotName+"",a,s,u=t[0].location+"",f,c,d,m,h,g,p,w,v,A,R,q,F,E,I,N,j=t[0].plotCost+"",C,b,T,D,W;e=new an({props:{class:"p-4 border-b border-accent/20",$$slots:{default:[Iy]},$$scope:{ctx:t}}});let L=Ke(t[0].missingResources),U=[];for(let X=0;X<L.length;X+=1)U[X]=Ia(Aa(t,L,X));return D=new Cn({props:{class:"p-4 border-t border-accent/20 flex justify-end gap-2",$$slots:{default:[Py]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),o=P("div"),i=P("p"),r=G("Your "),a=G(l),s=B(),f=G(u),c=G(" is about to be disabled!"),d=B(),m=P("div"),h=P("p"),h.textContent="Missing Resources:",g=B(),p=P("ul");for(let X=0;X<U.length;X+=1)U[X].c();w=B(),v=P("div"),A=P("p"),A.textContent="You have two options:",R=B(),q=P("ol"),F=P("li"),F.textContent="Bulldoze the plot (free)",E=B(),I=P("li"),N=G("Snooze for 30 days (costs "),C=G(j),b=G(" gold)"),T=B(),Y(D.$$.fragment),$(h,"class","font-semibold"),$(p,"class","list-disc list-inside"),$(m,"class","bg-red-500/10 p-3 rounded-md"),$(q,"class","list-decimal list-inside"),$(v,"class","bg-accent/10 p-3 rounded-md"),$(o,"class","p-4 space-y-4")},m(X,Q){V(e,X,Q),O(X,n,Q),O(X,o,Q),y(o,i),y(i,r),y(i,a),y(i,s),y(i,f),y(i,c),y(o,d),y(o,m),y(m,h),y(m,g),y(m,p);for(let z=0;z<U.length;z+=1)U[z]&&U[z].m(p,null);y(o,w),y(o,v),y(v,A),y(v,R),y(v,q),y(q,F),y(q,E),y(q,I),y(I,N),y(I,C),y(I,b),O(X,T,Q),V(D,X,Q),W=!0},p(X,Q){const z={};if(Q&256&&(z.$$scope={dirty:Q,ctx:X}),e.$set(z),(!W||Q&1)&&l!==(l=X[0].plotName+"")&&ae(a,l),(!W||Q&1)&&u!==(u=X[0].location+"")&&ae(f,u),Q&1){L=Ke(X[0].missingResources);let oe;for(oe=0;oe<L.length;oe+=1){const Ae=Aa(X,L,oe);U[oe]?U[oe].p(Ae,Q):(U[oe]=Ia(Ae),U[oe].c(),U[oe].m(p,null))}for(;oe<U.length;oe+=1)U[oe].d(1);U.length=L.length}(!W||Q&1)&&j!==(j=X[0].plotCost+"")&&ae(C,j);const ne={};Q&259&&(ne.$$scope={dirty:Q,ctx:X}),D.$set(ne)},i(X){W||(k(e.$$.fragment,X),k(D.$$.fragment,X),W=!0)},o(X){S(e.$$.fragment,X),S(D.$$.fragment,X),W=!1},d(X){X&&(M(n),M(o),M(T)),x(e,X),ft(U,X),x(D,X)}}}function Ey(t){let e,n;return e=new un({props:{transition:_o,class:"bg-sidebarBackground text-sidebarText max-w-md rounded-md shadow-xl border border-accent",$$slots:{default:[Ny]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&259&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function $y(t){let e,n,o;function i(l){t[4](l)}let r={$$slots:{default:[Ey]},$$scope:{ctx:t}};return t[0].visible!==void 0&&(r.open=t[0].visible),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&259&&(s.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,s.open=l[0].visible,xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function Ry(t,e,n){let o,i;le(t,Bt,s=>n(0,o=s)),le(t,$e,s=>n(1,i=s));function r(){i.townInfo.gold>=o.plotCost&&(Te($e,i.townInfo.gold-=o.plotCost,i),Te($e,i.plots[o.x][o.y].snoozedUntil=i.environment.day+10,i),Te($e,i.plots[o.x][o.y].disabled=!1,i)),Te(Bt,o.visible=!1,o)}function l(){console.log("x:",o.x),console.log("y:",o.y),En(o.x,o.y,i),Te(Bt,o.visible=!1,o)}function a(s){t.$$.not_equal(o.visible,s)&&(o.visible=s,Bt.set(o))}return[o,i,r,l,a]}class Ly extends pe{constructor(e){super(),me(this,e,Ry,$y,de,{})}}function Dy(){console.log("%cRUNNING STABILITY TESTS...","color: #26bfa5;");let t=0;return console.log("%cPASSED ALL STABILITY TESTS 😍","color: #26bfa5;"),t}function Fy(t){let e=t[0].endGameDetails.win==!0?"You won! 🎉":"You lost! 😭",n;return{c(){n=G(e)},m(o,i){O(o,n,i)},p(o,i){i&1&&e!==(e=o[0].endGameDetails.win==!0?"You won! 🎉":"You lost! 😭")&&ae(n,e)},d(o){o&&M(n)}}}function jy(t){let e;return{c(){e=G("Keep playin'")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function qy(t){let e,n=t[0].endGameDetails.msg+"",o,i,r,l,a,s,u,f;return u=new Mt({props:{class:"bg-accent",$$slots:{default:[jy]},$$scope:{ctx:t}}}),u.$on("click",t[2]),{c(){e=P("span"),o=G(n),i=B(),r=P("br"),l=B(),a=P("br"),s=B(),Y(u.$$.fragment),$(e,"class","text-gray-500 text-sm")},m(c,d){O(c,e,d),y(e,o),O(c,i,d),O(c,r,d),O(c,l,d),O(c,a,d),O(c,s,d),V(u,c,d),f=!0},p(c,d){(!f||d&1)&&n!==(n=c[0].endGameDetails.msg+"")&&ae(o,n);const m={};d&16&&(m.$$scope={dirty:d,ctx:c}),u.$set(m)},i(c){f||(k(u.$$.fragment,c),f=!0)},o(c){S(u.$$.fragment,c),f=!1},d(c){c&&(M(e),M(i),M(r),M(l),M(a),M(s)),x(u,c)}}}function By(t){let e,n,o,i;return e=new sn({props:{$$slots:{default:[Fy]},$$scope:{ctx:t}}}),o=new Gn({props:{$$slots:{default:[qy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&17&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&17&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Hy(t){let e;return{c(){e=P("span"),e.textContent="Reset the game by pressing SHIFT+ESC",$(e,"class","text-gray-500 text-sm")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function Gy(t){let e,n,o,i;return e=new an({props:{$$slots:{default:[By]},$$scope:{ctx:t}}}),o=new Cn({props:{$$slots:{default:[Hy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&17&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&16&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Wy(t){let e,n;return e=new un({props:{class:"bg-foregroundDark text-accentText",$$slots:{default:[Gy]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&17&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Vy(t){let e,n,o;function i(l){t[3](l)}let r={$$slots:{default:[Wy]},$$scope:{ctx:t}};return t[1]!==void 0&&(r.open=t[1]),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&17&&(s.$$scope={dirty:a,ctx:l}),!n&&a&2&&(n=!0,s.open=l[1],xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function xy(t,e,n){let o;le(t,$e,a=>n(0,o=a));let i=!1;function r(){let a=o;a.overtime=!0,$e.set(a),n(1,i=!1),Et.set(!1)}function l(a){i=a,n(1,i),n(0,o)}return t.$$.update=()=>{t.$$.dirty&1&&(o.endGameDetails.msg!=""&&o.overtime==!1?n(1,i=!0):n(1,i=!1))},[o,i,r,l]}class Yy extends pe{constructor(e){super(),me(this,e,xy,Vy,de,{})}}function Uy(t){let e,n,o,i,r=[{class:n=We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t[1])},t[2]],l={};for(let a=0;a<r.length;a+=1)l=Z(l,r[a]);return{c(){e=P("input"),fe(e,l)},m(a,s){O(a,e,s),e.autofocus&&e.focus(),ki(e,t[0]),o||(i=[te(e,"input",t[17]),te(e,"blur",t[3]),te(e,"change",t[4]),te(e,"click",t[5]),te(e,"focus",t[6]),te(e,"focusin",t[7]),te(e,"focusout",t[8]),te(e,"keydown",t[9]),te(e,"keypress",t[10]),te(e,"keyup",t[11]),te(e,"mouseover",t[12]),te(e,"mouseenter",t[13]),te(e,"mouseleave",t[14]),te(e,"paste",t[15]),te(e,"input",t[16])],o=!0)},p(a,[s]){fe(e,l=ve(r,[s&2&&n!==(n=We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a[1]))&&{class:n},s&4&&a[2]])),s&1&&e.value!==a[0]&&ki(e,a[0])},i:Ce,o:Ce,d(a){a&&M(e),o=!1,Ye(i)}}}function Ky(t,e,n){const o=["class","value"];let i=ue(e,o),{class:r=void 0}=e,{value:l=void 0}=e;function a(F){re.call(this,t,F)}function s(F){re.call(this,t,F)}function u(F){re.call(this,t,F)}function f(F){re.call(this,t,F)}function c(F){re.call(this,t,F)}function d(F){re.call(this,t,F)}function m(F){re.call(this,t,F)}function h(F){re.call(this,t,F)}function g(F){re.call(this,t,F)}function p(F){re.call(this,t,F)}function w(F){re.call(this,t,F)}function v(F){re.call(this,t,F)}function A(F){re.call(this,t,F)}function R(F){re.call(this,t,F)}function q(){l=this.value,n(0,l)}return t.$$set=F=>{e=Z(Z({},e),je(F)),n(2,i=ue(e,o)),"class"in F&&n(1,r=F.class),"value"in F&&n(0,l=F.value)},[l,r,i,a,s,u,f,c,d,m,h,g,p,w,v,A,R,q]}class Xy extends pe{constructor(e){super(),me(this,e,Ky,Uy,de,{class:1,value:0})}}function Jy(t){let e;const n=t[2].default,o=he(n,t,t[4],null);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),e=!0},p(i,r){o&&o.p&&(!e||r&16)&&ge(o,n,i,i[4],e?_e(n,i[4],r,null):be(i[4]),null)},i(i){e||(k(o,i),e=!0)},o(i){S(o,i),e=!1},d(i){o&&o.d(i)}}}function Zy(t){let e,n;const o=[{class:We("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t[0])},t[1]];let i={$$slots:{default:[Jy]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new Ig({props:i}),e.$on("mousedown",t[3]),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&3?ve(o,[l&1&&{class:We("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r[0])},l&2&&at(r[1])]):{};l&16&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Qy(t,e,n){const o=["class"];let i=ue(e,o),{$$slots:r={},$$scope:l}=e,{class:a=void 0}=e;function s(u){re.call(this,t,u)}return t.$$set=u=>{e=Z(Z({},e),je(u)),n(1,i=ue(e,o)),"class"in u&&n(0,a=u.class),"$$scope"in u&&n(4,l=u.$$scope)},[a,i,r,s,l]}class Tr extends pe{constructor(e){super(),me(this,e,Qy,Zy,de,{class:0})}}function zy(t){let e;return{c(){e=G("Welcome to Plots!")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ev(t){let e;return{c(){e=P("a"),e.textContent="GitHub / Learn how to play",$(e,"href","https://github.com/josephrcox/plots#how-to-play"),$(e,"class","text-accent hover:text-accent/80 text-sm mb-4 hover:underline inline-block"),$(e,"target","_blank")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function tv(t){let e,n,o,i;return e=new sn({props:{class:"text-2xl font-semibold",$$slots:{default:[zy]},$$scope:{ctx:t}}}),o=new Gn({props:{$$slots:{default:[ev]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&256&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&256&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function nv(t){let e;return{c(){e=G("Game Mode")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ov(t){let e;return{c(){e=G("Town Name")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function iv(t){let e;return{c(){e=G("Game Settings")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function rv(t){let e;return{c(){e=G("Reset user")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function lv(t){let e;return{c(){e=G("Start game")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function sv(t){let e,n=t[1].username+"",o,i,r,l,a,s,u,f,c;return l=new Mt({props:{variant:"outline",class:"border-accent/20 hover:bg-accent/10",$$slots:{default:[rv]},$$scope:{ctx:t}}}),l.$on("click",t[5]),s=new Mt({props:{class:"bg-accent hover:bg-accent/80 text-white",$$slots:{default:[lv]},$$scope:{ctx:t}}}),s.$on("click",t[3]),{c(){e=P("span"),o=G(n),i=B(),r=P("div"),Y(l.$$.fragment),a=B(),Y(s.$$.fragment),$(e,"class","text-xs text-sidebarText/50 hover:text-sidebarText cursor-pointer"),$(r,"class","space-x-2")},m(d,m){O(d,e,m),y(e,o),O(d,i,m),O(d,r,m),V(l,r,null),y(r,a),V(s,r,null),u=!0,f||(c=te(e,"click",t[6]),f=!0)},p(d,m){(!u||m&2)&&n!==(n=d[1].username+"")&&ae(o,n);const h={};m&256&&(h.$$scope={dirty:m,ctx:d}),l.$set(h);const g={};m&256&&(g.$$scope={dirty:m,ctx:d}),s.$set(g)},i(d){u||(k(l.$$.fragment,d),k(s.$$.fragment,d),u=!0)},o(d){S(l.$$.fragment,d),S(s.$$.fragment,d),u=!1},d(d){d&&(M(e),M(i),M(r)),x(l),x(s),f=!1,c()}}}function av(t){let e,n,o,i,r,l,a,s,u,f,c,d,m=(t[0]==="land"?pn.land.description_title:pn.free_play.description_title)+"",h,g,p,w,v,A,R,q,F,E,I,N,j,C,b,T,D,W,L,U,X,Q;e=new an({props:{class:"p-4 border-b border-accent/20",$$slots:{default:[tv]},$$scope:{ctx:t}}});let z=cv;return l=new Tr({props:{for:"endGoal",class:"text-sm font-medium",$$slots:{default:[nv]},$$scope:{ctx:t}}}),w=new Tr({props:{for:"townName",class:"text-sm font-medium",$$slots:{default:[ov]},$$scope:{ctx:t}}}),A=new Xy({props:{id:"townName",class:"w-full p-2 rounded-md border border-accent/20 bg-sidebarBackground text-sidebarText focus:ring-2 focus:ring-accent/50",placeholder:"Will be randomized if left blank"}}),F=new Tr({props:{class:"text-sm font-medium",$$slots:{default:[iv]},$$scope:{ctx:t}}}),L=new Cn({props:{class:"p-4 border-t border-accent/20 flex justify-between items-center",$$slots:{default:[sv]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),o=P("div"),i=B(),r=P("div"),Y(l.$$.fragment),a=B(),s=P("select"),u=P("option"),u.textContent=`${pn.land.short_title}`,f=P("option"),f.textContent=`${pn.free_play.short_title}`,c=B(),d=P("p"),h=G(m),g=B(),p=P("div"),Y(w.$$.fragment),v=B(),Y(A.$$.fragment),R=B(),q=P("div"),Y(F.$$.fragment),E=B(),I=P("div"),I.innerHTML='<input type="checkbox" id="devMode" class="svelte-1fiuyps"/>',N=B(),j=P("div"),j.innerHTML=`<input type="checkbox" id="tomPetty" class="mt-1 rounded border-accent/20 svelte-1fiuyps"/> <label for="tomPetty" class="text-sm">The &#39;Tom Petty&#39; mode: If your happiness or health reaches 0, you
            lose 90% of your gold and continue the game. You won&#39;t back down.</label>`,C=B(),b=P("div"),b.innerHTML=`<input type="checkbox" id="casual" class="mt-1 rounded border-accent/20 svelte-1fiuyps"/> <label for="casual" class="text-sm">Casual game: Faster and easier overall while exposing more of the
            game mechanics.</label>`,T=B(),D=P("div"),D.innerHTML='<input type="checkbox" id="bagOfHolding" class="mt-1 rounded border-accent/20 svelte-1fiuyps"/> <label for="bagOfHolding" class="text-sm">Bag of Holding: No resource cap or need to purchase stockpiles.</label>',W=B(),Y(L.$$.fragment),u.__value="land",ki(u,u.__value),f.__value="free_play",ki(f,f.__value),$(s,"id","endGoal"),$(s,"class","w-full p-2 rounded-md border border-accent/20 bg-sidebarBackground text-sidebarText focus:ring-2 focus:ring-accent/50"),$(d,"class","text-sm text-sidebarText/80 mt-1"),$(r,"class","space-y-2"),$(p,"class","space-y-2"),$(I,"class","hidden"),$(j,"class","flex items-start space-x-2"),$(b,"class","flex items-start space-x-2"),$(D,"class","flex items-start space-x-2"),$(q,"class","space-y-4"),$(o,"class","p-4 space-y-4")},m(ne,oe){V(e,ne,oe),O(ne,n,oe),O(ne,o,oe),y(o,i),y(o,r),V(l,r,null),y(r,a),y(r,s),y(s,u),y(s,f),Dl(s,t[0]),y(r,c),y(r,d),y(d,h),y(o,g),y(o,p),V(w,p,null),y(p,v),V(A,p,null),y(o,R),y(o,q),V(F,q,null),y(q,E),y(q,I),y(q,N),y(q,j),y(q,C),y(q,b),y(q,T),y(q,D),O(ne,W,oe),V(L,ne,oe),U=!0,X||(Q=te(s,"change",t[4]),X=!0)},p(ne,oe){const Ae={};oe&256&&(Ae.$$scope={dirty:oe,ctx:ne}),e.$set(Ae);const ce={};oe&256&&(ce.$$scope={dirty:oe,ctx:ne}),l.$set(ce),(!U||oe&1)&&Dl(s,ne[0]),(!U||oe&1)&&m!==(m=(ne[0]==="land"?pn.land.description_title:pn.free_play.description_title)+"")&&ae(h,m);const ee={};oe&256&&(ee.$$scope={dirty:oe,ctx:ne}),w.$set(ee);const Pe={};oe&256&&(Pe.$$scope={dirty:oe,ctx:ne}),F.$set(Pe);const Ne={};oe&258&&(Ne.$$scope={dirty:oe,ctx:ne}),L.$set(Ne)},i(ne){U||(k(e.$$.fragment,ne),k(z),k(l.$$.fragment,ne),k(w.$$.fragment,ne),k(A.$$.fragment,ne),k(F.$$.fragment,ne),k(L.$$.fragment,ne),U=!0)},o(ne){S(e.$$.fragment,ne),S(z),S(l.$$.fragment,ne),S(w.$$.fragment,ne),S(A.$$.fragment,ne),S(F.$$.fragment,ne),S(L.$$.fragment,ne),U=!1},d(ne){ne&&(M(n),M(o),M(W)),x(e,ne),x(l),x(w),x(A),x(F),x(L,ne),X=!1,Q()}}}function uv(t){let e,n;return e=new un({props:{transition:_o,class:"bg-sidebarBackground text-sidebarText max-w-xl rounded-md shadow-xl border border-accent",$$slots:{default:[av]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&259&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function fv(t){let e,n,o;function i(l){t[7](l)}let r={$$slots:{default:[uv]},$$scope:{ctx:t}};return t[2].visible!==void 0&&(r.open=t[2].visible),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&259&&(s.$$scope={dirty:a,ctx:l}),!n&&a&4&&(n=!0,s.open=l[2].visible,xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}const cv=!1;function dv(t,e,n){let o,i;le(t,_n,c=>n(1,o=c)),le(t,qo,c=>n(2,i=c)),Et.set(!1);function r(){const c="1",d=document.getElementById("endGoal").value,m=document.getElementById("townName").value,g=["devMode","tomPetty","casual","bagOfHolding"].filter(v=>document.getElementById(v).checked);Im(c,d,m,g)}let l="free_play";const a=c=>{n(0,l=c.target.value)};function s(){St.set("Deleted :)"),localStorage.clear(),window.location.href=""}function u(){const c=prompt("Enter new username");let d=o;d.username=c,Pm(d)}function f(c){t.$$.not_equal(i.visible,c)&&(i.visible=c,qo.set(i))}return[l,o,i,r,a,s,u,f]}class mv extends pe{constructor(e){super(),me(this,e,dv,fv,de,{})}}function pv(t){let e;return{c(){e=G("Scoreboard")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function hv(t){let e=t[1].description_title+"",n;return{c(){n=G(e)},m(o,i){O(o,n,i)},p:Ce,d(o){o&&M(n)}}}function _v(t){let e,n,o,i;return e=new sn({props:{$$slots:{default:[pv]},$$scope:{ctx:t}}}),o=new Gn({props:{$$slots:{default:[hv]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&128&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&128&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function gv(t){let e;return{c(){e=G("footer")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function bv(t){let e,n,o,i;return e=new an({props:{$$slots:{default:[_v]},$$scope:{ctx:t}}}),o=new Cn({props:{$$slots:{default:[gv]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=G(`
		hi
		`),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&128&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&128&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function yv(t){let e,n;return e=new un({props:{$$slots:{default:[bv]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&128&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function vv(t){let e,n,o;function i(l){t[3](l)}let r={$$slots:{default:[yv]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.open=t[0]),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&128&&(s.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,s.open=l[0],xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function wv(t,e,n){let o,i;le(t,$e,s=>n(2,o=s)),le(t,Oi,s=>n(0,i=s));const l=pn[o.endGoal];Lf[o.difficulty];function a(s){i=s,Oi.set(i)}return t.$$.update=()=>{t.$$.dirty&4},[i,l,o,a]}class kv extends pe{constructor(e){super(),me(this,e,wv,vv,de,{})}}function gi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mc(t){let e,n,o;t.length!==2?(e=gi,n=(a,s)=>gi(t(a),s),o=(a,s)=>t(a)-s):(e=t===gi||t===Cv?t:Tv,n=t,o=t);function i(a,s,u=0,f=a.length){if(u<f){if(e(s,s)!==0)return f;do{const c=u+f>>>1;n(a[c],s)<0?u=c+1:f=c}while(u<f)}return u}function r(a,s,u=0,f=a.length){if(u<f){if(e(s,s)!==0)return f;do{const c=u+f>>>1;n(a[c],s)<=0?u=c+1:f=c}while(u<f)}return u}function l(a,s,u=0,f=a.length){const c=i(a,s,u,f-1);return c>u&&o(a[c-1],s)>-o(a[c],s)?c-1:c}return{left:i,center:l,right:r}}function Tv(){return 0}function Sv(t){return t===null?NaN:+t}const Av=Mc(gi),Iv=Av.right;Mc(Sv).center;const Mv=Math.sqrt(50),Ov=Math.sqrt(10),Pv=Math.sqrt(2);function qi(t,e,n){const o=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),r=o/Math.pow(10,i),l=r>=Mv?10:r>=Ov?5:r>=Pv?2:1;let a,s,u;return i<0?(u=Math.pow(10,-i)/l,a=Math.round(t*u),s=Math.round(e*u),a/u<t&&++a,s/u>e&&--s,u=-u):(u=Math.pow(10,i)*l,a=Math.round(t/u),s=Math.round(e/u),a*u<t&&++a,s*u>e&&--s),s<a&&.5<=n&&n<2?qi(t,e,n*2):[a,s,u]}function Nv(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const o=e<t,[i,r,l]=o?qi(e,t,n):qi(t,e,n);if(!(r>=i))return[];const a=r-i+1,s=new Array(a);if(o)if(l<0)for(let u=0;u<a;++u)s[u]=(r-u)/-l;else for(let u=0;u<a;++u)s[u]=(r-u)*l;else if(l<0)for(let u=0;u<a;++u)s[u]=(i+u)/-l;else for(let u=0;u<a;++u)s[u]=(i+u)*l;return s}function Yr(t,e,n){return e=+e,t=+t,n=+n,qi(t,e,n)[2]}function Ev(t,e,n){e=+e,t=+t,n=+n;const o=e<t,i=o?Yr(e,t,n):Yr(t,e,n);return(o?-1:1)*(i<0?1/-i:i)}function $v(t){return t}var Sr=1,Ar=2,Ur=3,Ro=4,Ma=1e-6;function Rv(t){return"translate("+t+",0)"}function Lv(t){return"translate(0,"+t+")"}function Dv(t){return e=>+t(e)}function Fv(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function jv(){return!this.__axis}function Oc(t,e){var n=[],o=null,i=null,r=6,l=6,a=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Sr||t===Ro?-1:1,f=t===Ro||t===Ar?"x":"y",c=t===Sr||t===Ur?Rv:Lv;function d(m){var h=o??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):$v),p=Math.max(r,0)+a,w=e.range(),v=+w[0]+s,A=+w[w.length-1]+s,R=(e.bandwidth?Fv:Dv)(e.copy(),s),q=m.selection?m.selection():m,F=q.selectAll(".domain").data([null]),E=q.selectAll(".tick").data(h,e).order(),I=E.exit(),N=E.enter().append("g").attr("class","tick"),j=E.select("line"),C=E.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(N),j=j.merge(N.append("line").attr("stroke","currentColor").attr(f+"2",u*r)),C=C.merge(N.append("text").attr("fill","currentColor").attr(f,u*p).attr("dy",t===Sr?"0em":t===Ur?"0.71em":"0.32em")),m!==q&&(F=F.transition(m),E=E.transition(m),j=j.transition(m),C=C.transition(m),I=I.transition(m).attr("opacity",Ma).attr("transform",function(b){return isFinite(b=R(b))?c(b+s):this.getAttribute("transform")}),N.attr("opacity",Ma).attr("transform",function(b){var T=this.parentNode.__axis;return c((T&&isFinite(T=T(b))?T:R(b))+s)})),I.remove(),F.attr("d",t===Ro||t===Ar?l?"M"+u*l+","+v+"H"+s+"V"+A+"H"+u*l:"M"+s+","+v+"V"+A:l?"M"+v+","+u*l+"V"+s+"H"+A+"V"+u*l:"M"+v+","+s+"H"+A),E.attr("opacity",1).attr("transform",function(b){return c(R(b)+s)}),j.attr(f+"2",u*r),C.attr(f,u*p).text(g),q.filter(jv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ar?"start":t===Ro?"end":"middle"),q.each(function(){this.__axis=R})}return d.scale=function(m){return arguments.length?(e=m,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),d):n.slice()},d.tickValues=function(m){return arguments.length?(o=m==null?null:Array.from(m),d):o&&o.slice()},d.tickFormat=function(m){return arguments.length?(i=m,d):i},d.tickSize=function(m){return arguments.length?(r=l=+m,d):r},d.tickSizeInner=function(m){return arguments.length?(r=+m,d):r},d.tickSizeOuter=function(m){return arguments.length?(l=+m,d):l},d.tickPadding=function(m){return arguments.length?(a=+m,d):a},d.offset=function(m){return arguments.length?(s=+m,d):s},d}function qv(t){return Oc(Ur,t)}function Bv(t){return Oc(Ro,t)}var Hv={value:()=>{}};function Pc(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new bi(n)}function bi(t){this._=t}function Gv(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}bi.prototype=Pc.prototype={constructor:bi,on:function(t,e){var n=this._,o=Gv(t+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(t=o[r]).type)&&(i=Wv(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<l;)if(i=(t=o[r]).type)n[i]=Oa(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Oa(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bi(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)}};function Wv(t,e){for(var n=0,o=t.length,i;n<o;++n)if((i=t[n]).name===e)return i.value}function Oa(t,e,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===e){t[o]=Hv,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var Kr="http://www.w3.org/1999/xhtml";const Pa={svg:"http://www.w3.org/2000/svg",xhtml:Kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pa.hasOwnProperty(e)?{space:Pa[e],local:t}:t}function Vv(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Kr&&e.documentElement.namespaceURI===Kr?e.createElement(t):e.createElementNS(n,t)}}function xv(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Nc(t){var e=lr(t);return(e.local?xv:Vv)(e)}function Yv(){}function Sl(t){return t==null?Yv:function(){return this.querySelector(t)}}function Uv(t){typeof t!="function"&&(t=Sl(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r=e[i],l=r.length,a=o[i]=new Array(l),s,u,f=0;f<l;++f)(s=r[f])&&(u=t.call(s,s.__data__,f,r))&&("__data__"in s&&(u.__data__=s.__data__),a[f]=u);return new Ot(o,this._parents)}function Kv(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Xv(){return[]}function Ec(t){return t==null?Xv:function(){return this.querySelectorAll(t)}}function Jv(t){return function(){return Kv(t.apply(this,arguments))}}function Zv(t){typeof t=="function"?t=Jv(t):t=Ec(t);for(var e=this._groups,n=e.length,o=[],i=[],r=0;r<n;++r)for(var l=e[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(t.call(s,s.__data__,u,l)),i.push(s));return new Ot(o,i)}function $c(t){return function(){return this.matches(t)}}function Rc(t){return function(e){return e.matches(t)}}var Qv=Array.prototype.find;function zv(t){return function(){return Qv.call(this.children,t)}}function ew(){return this.firstElementChild}function tw(t){return this.select(t==null?ew:zv(typeof t=="function"?t:Rc(t)))}var nw=Array.prototype.filter;function ow(){return Array.from(this.children)}function iw(t){return function(){return nw.call(this.children,t)}}function rw(t){return this.selectAll(t==null?ow:iw(typeof t=="function"?t:Rc(t)))}function lw(t){typeof t!="function"&&(t=$c(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r=e[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&t.call(s,s.__data__,u,r)&&a.push(s);return new Ot(o,this._parents)}function Lc(t){return new Array(t.length)}function sw(){return new Ot(this._enter||this._groups.map(Lc),this._parents)}function Bi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bi.prototype={constructor:Bi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function aw(t){return function(){return t}}function uw(t,e,n,o,i,r){for(var l=0,a,s=e.length,u=r.length;l<u;++l)(a=e[l])?(a.__data__=r[l],o[l]=a):n[l]=new Bi(t,r[l]);for(;l<s;++l)(a=e[l])&&(i[l]=a)}function fw(t,e,n,o,i,r,l){var a,s,u=new Map,f=e.length,c=r.length,d=new Array(f),m;for(a=0;a<f;++a)(s=e[a])&&(d[a]=m=l.call(s,s.__data__,a,e)+"",u.has(m)?i[a]=s:u.set(m,s));for(a=0;a<c;++a)m=l.call(t,r[a],a,r)+"",(s=u.get(m))?(o[a]=s,s.__data__=r[a],u.delete(m)):n[a]=new Bi(t,r[a]);for(a=0;a<f;++a)(s=e[a])&&u.get(d[a])===s&&(i[a]=s)}function cw(t){return t.__data__}function dw(t,e){if(!arguments.length)return Array.from(this,cw);var n=e?fw:uw,o=this._parents,i=this._groups;typeof t!="function"&&(t=aw(t));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var f=o[u],c=i[u],d=c.length,m=mw(t.call(f,f&&f.__data__,u,o)),h=m.length,g=a[u]=new Array(h),p=l[u]=new Array(h),w=s[u]=new Array(d);n(f,c,g,p,w,m,e);for(var v=0,A=0,R,q;v<h;++v)if(R=g[v]){for(v>=A&&(A=v+1);!(q=p[A])&&++A<h;);R._next=q||null}}return l=new Ot(l,o),l._enter=a,l._exit=s,l}function mw(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pw(){return new Ot(this._exit||this._groups.map(Lc),this._parents)}function hw(t,e,n){var o=this.enter(),i=this,r=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function _w(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],f=o[s],c=u.length,d=a[s]=new Array(c),m,h=0;h<c;++h)(m=u[h]||f[h])&&(d[h]=m);for(;s<i;++s)a[s]=n[s];return new Ot(a,this._parents)}function gw(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function bw(t){t||(t=yw);function e(c,d){return c&&d?t(c.__data__,d.__data__):!c-!d}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,f=0;f<a;++f)(u=l[f])&&(s[f]=u);s.sort(e)}return new Ot(i,this._parents).order()}function yw(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function vw(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ww(){return Array.from(this)}function kw(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function Cw(){let t=0;for(const e of this)++t;return t}function Tw(){return!this.node()}function Sw(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var i=e[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&t.call(a,a.__data__,r,i);return this}function Aw(t){return function(){this.removeAttribute(t)}}function Iw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mw(t,e){return function(){this.setAttribute(t,e)}}function Ow(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Pw(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Nw(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ew(t,e){var n=lr(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?Iw:Aw:typeof e=="function"?n.local?Nw:Pw:n.local?Ow:Mw)(n,e))}function Dc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $w(t){return function(){this.style.removeProperty(t)}}function Rw(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Lw(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Dw(t,e,n){return arguments.length>1?this.each((e==null?$w:typeof e=="function"?Lw:Rw)(t,e,n??"")):co(this.node(),t)}function co(t,e){return t.style.getPropertyValue(e)||Dc(t).getComputedStyle(t,null).getPropertyValue(e)}function Fw(t){return function(){delete this[t]}}function jw(t,e){return function(){this[t]=e}}function qw(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Bw(t,e){return arguments.length>1?this.each((e==null?Fw:typeof e=="function"?qw:jw)(t,e)):this.node()[t]}function Fc(t){return t.trim().split(/^|\s+/)}function Al(t){return t.classList||new jc(t)}function jc(t){this._node=t,this._names=Fc(t.getAttribute("class")||"")}jc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qc(t,e){for(var n=Al(t),o=-1,i=e.length;++o<i;)n.add(e[o])}function Bc(t,e){for(var n=Al(t),o=-1,i=e.length;++o<i;)n.remove(e[o])}function Hw(t){return function(){qc(this,t)}}function Gw(t){return function(){Bc(this,t)}}function Ww(t,e){return function(){(e.apply(this,arguments)?qc:Bc)(this,t)}}function Vw(t,e){var n=Fc(t+"");if(arguments.length<2){for(var o=Al(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ww:e?Hw:Gw)(n,e))}function xw(){this.textContent=""}function Yw(t){return function(){this.textContent=t}}function Uw(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Kw(t){return arguments.length?this.each(t==null?xw:(typeof t=="function"?Uw:Yw)(t)):this.node().textContent}function Xw(){this.innerHTML=""}function Jw(t){return function(){this.innerHTML=t}}function Zw(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qw(t){return arguments.length?this.each(t==null?Xw:(typeof t=="function"?Zw:Jw)(t)):this.node().innerHTML}function zw(){this.nextSibling&&this.parentNode.appendChild(this)}function e2(){return this.each(zw)}function t2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n2(){return this.each(t2)}function o2(t){var e=typeof t=="function"?t:Nc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function i2(){return null}function r2(t,e){var n=typeof t=="function"?t:Nc(t),o=e==null?i2:typeof e=="function"?e:Sl(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function l2(){var t=this.parentNode;t&&t.removeChild(this)}function s2(){return this.each(l2)}function a2(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function u2(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f2(t){return this.select(t?u2:a2)}function c2(t){return arguments.length?this.property("__data__",t):this.node().__data__}function d2(t){return function(e){t.call(this,e,this.__data__)}}function m2(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function p2(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,i=e.length,r;n<i;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.options):e[++o]=r;++o?e.length=o:delete this.__on}}}function h2(t,e,n){return function(){var o=this.__on,i,r=d2(e);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=e;return}}this.addEventListener(t.type,r,n),i={type:t.type,name:t.name,value:e,listener:r,options:n},o?o.push(i):this.__on=[i]}}function _2(t,e,n){var o=m2(t+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,f;s<u;++s)for(i=0,f=a[s];i<r;++i)if((l=o[i]).type===f.type&&l.name===f.name)return f.value}return}for(a=e?h2:p2,i=0;i<r;++i)this.each(a(o[i],e,n));return this}function Hc(t,e,n){var o=Dc(t),i=o.CustomEvent;typeof i=="function"?i=new i(e,n):(i=o.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function g2(t,e){return function(){return Hc(this,t,e)}}function b2(t,e){return function(){return Hc(this,t,e.apply(this,arguments))}}function y2(t,e){return this.each((typeof e=="function"?b2:g2)(t,e))}function*v2(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var Gc=[null];function Ot(t,e){this._groups=t,this._parents=e}function ei(){return new Ot([[document.documentElement]],Gc)}function w2(){return this}Ot.prototype=ei.prototype={constructor:Ot,select:Uv,selectAll:Zv,selectChild:tw,selectChildren:rw,filter:lw,data:dw,enter:sw,exit:pw,join:hw,merge:_w,selection:w2,order:gw,sort:bw,call:vw,nodes:ww,node:kw,size:Cw,empty:Tw,each:Sw,attr:Ew,style:Dw,property:Bw,classed:Vw,text:Kw,html:Qw,raise:e2,lower:n2,append:o2,insert:r2,remove:s2,clone:f2,datum:c2,on:_2,dispatch:y2,[Symbol.iterator]:v2};function k2(t){return typeof t=="string"?new Ot([[document.querySelector(t)]],[document.documentElement]):new Ot([[t]],Gc)}function Il(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Wc(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function ti(){}var Uo=.7,Hi=1/Uo,to="\\s*([+-]?\\d+)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C2=/^#([0-9a-f]{3,8})$/,T2=new RegExp(`^rgb\\(${to},${to},${to}\\)$`),S2=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),A2=new RegExp(`^rgba\\(${to},${to},${to},${Ko}\\)$`),I2=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Ko}\\)$`),M2=new RegExp(`^hsl\\(${Ko},${Wt},${Wt}\\)$`),O2=new RegExp(`^hsla\\(${Ko},${Wt},${Wt},${Ko}\\)$`),Na={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Il(ti,Fn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ea,formatHex:Ea,formatHex8:P2,formatHsl:N2,formatRgb:$a,toString:$a});function Ea(){return this.rgb().formatHex()}function P2(){return this.rgb().formatHex8()}function N2(){return Vc(this).formatHsl()}function $a(){return this.rgb().formatRgb()}function Fn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=C2.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ra(e):n===3?new wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ui(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ui(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=T2.exec(t))?new wt(e[1],e[2],e[3],1):(e=S2.exec(t))?new wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=A2.exec(t))?ui(e[1],e[2],e[3],e[4]):(e=I2.exec(t))?ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=M2.exec(t))?Fa(e[1],e[2]/100,e[3]/100,1):(e=O2.exec(t))?Fa(e[1],e[2]/100,e[3]/100,e[4]):Na.hasOwnProperty(t)?Ra(Na[t]):t==="transparent"?new wt(NaN,NaN,NaN,0):null}function Ra(t){return new wt(t>>16&255,t>>8&255,t&255,1)}function ui(t,e,n,o){return o<=0&&(t=e=n=NaN),new wt(t,e,n,o)}function E2(t){return t instanceof ti||(t=Fn(t)),t?(t=t.rgb(),new wt(t.r,t.g,t.b,t.opacity)):new wt}function Xr(t,e,n,o){return arguments.length===1?E2(t):new wt(t,e,n,o??1)}function wt(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}Il(wt,Xr,Wc(ti,{brighter(t){return t=t==null?Hi:Math.pow(Hi,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uo:Math.pow(Uo,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new wt(Nn(this.r),Nn(this.g),Nn(this.b),Gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:La,formatHex:La,formatHex8:$2,formatRgb:Da,toString:Da}));function La(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}`}function $2(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}${Mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Da(){const t=Gi(this.opacity);return`${t===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${t===1?")":`, ${t})`}`}function Gi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mn(t){return t=Nn(t),(t<16?"0":"")+t.toString(16)}function Fa(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Dt(t,e,n,o)}function Vc(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof ti||(t=Fn(t)),!t)return new Dt;if(t instanceof Dt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,i=Math.min(e,n,o),r=Math.max(e,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(e===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-e)/a+2:l=(e-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new Dt(l,a,s,t.opacity)}function R2(t,e,n,o){return arguments.length===1?Vc(t):new Dt(t,e,n,o??1)}function Dt(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}Il(Dt,R2,Wc(ti,{brighter(t){return t=t==null?Hi:Math.pow(Hi,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uo:Math.pow(Uo,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new wt(Ir(t>=240?t-240:t+120,i,o),Ir(t,i,o),Ir(t<120?t+240:t-120,i,o),this.opacity)},clamp(){return new Dt(ja(this.h),fi(this.s),fi(this.l),Gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gi(this.opacity);return`${t===1?"hsl(":"hsla("}${ja(this.h)}, ${fi(this.s)*100}%, ${fi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ja(t){return t=(t||0)%360,t<0?t+360:t}function fi(t){return Math.max(0,Math.min(1,t||0))}function Ir(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ml=t=>()=>t;function L2(t,e){return function(n){return t+n*e}}function D2(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}function F2(t){return(t=+t)==1?xc:function(e,n){return n-e?D2(e,n,t):Ml(isNaN(e)?n:e)}}function xc(t,e){var n=e-t;return n?L2(t,n):Ml(isNaN(t)?e:t)}const Wi=function t(e){var n=F2(e);function o(i,r){var l=n((i=Xr(i)).r,(r=Xr(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=xc(i.opacity,r.opacity);return function(f){return i.r=l(f),i.g=a(f),i.b=s(f),i.opacity=u(f),i+""}}return o.gamma=t,o}(1);function j2(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,o=e.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=t[i]*(1-r)+e[i]*r;return o}}function q2(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function B2(t,e){var n=e?e.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),r=new Array(n),l;for(l=0;l<o;++l)i[l]=Ol(t[l],e[l]);for(;l<n;++l)r[l]=e[l];return function(a){for(l=0;l<o;++l)r[l]=i[l](a);return r}}function H2(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function Lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function G2(t,e){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ol(t[i],e[i]):o[i]=e[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var Jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mr=new RegExp(Jr.source,"g");function W2(t){return function(){return t}}function V2(t){return function(e){return t(e)+""}}function Yc(t,e){var n=Jr.lastIndex=Mr.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(t=t+"",e=e+"";(o=Jr.exec(t))&&(i=Mr.exec(e));)(r=i.index)>n&&(r=e.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:Lt(o,i)})),n=Mr.lastIndex;return n<e.length&&(r=e.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?V2(s[0].x):W2(e):(e=s.length,function(u){for(var f=0,c;f<e;++f)a[(c=s[f]).i]=c.x(u);return a.join("")})}function Ol(t,e){var n=typeof e,o;return e==null||n==="boolean"?Ml(e):(n==="number"?Lt:n==="string"?(o=Fn(e))?(e=o,Wi):Yc:e instanceof Fn?Wi:e instanceof Date?H2:q2(e)?j2:Array.isArray(e)?B2:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?G2:Lt)(t,e)}function x2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var qa=180/Math.PI,Zr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Uc(t,e,n,o,i,r){var l,a,s;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(s=t*n+e*o)&&(n-=t*s,o-=e*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),t*o<e*n&&(t=-t,e=-e,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(e,t)*qa,skewX:Math.atan(s)*qa,scaleX:l,scaleY:a}}var ci;function Y2(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zr:Uc(e.a,e.b,e.c,e.d,e.e,e.f)}function U2(t){return t==null||(ci||(ci=document.createElementNS("http://www.w3.org/2000/svg","g")),ci.setAttribute("transform",t),!(t=ci.transform.baseVal.consolidate()))?Zr:(t=t.matrix,Uc(t.a,t.b,t.c,t.d,t.e,t.f))}function Kc(t,e,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,f,c,d,m,h){if(u!==c||f!==d){var g=m.push("translate(",null,e,null,n);h.push({i:g-4,x:Lt(u,c)},{i:g-2,x:Lt(f,d)})}else(c||d)&&m.push("translate("+c+e+d+n)}function l(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,o)-2,x:Lt(u,f)})):f&&c.push(i(c)+"rotate("+f+o)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,o)-2,x:Lt(u,f)}):f&&c.push(i(c)+"skewX("+f+o)}function s(u,f,c,d,m,h){if(u!==c||f!==d){var g=m.push(i(m)+"scale(",null,",",null,")");h.push({i:g-4,x:Lt(u,c)},{i:g-2,x:Lt(f,d)})}else(c!==1||d!==1)&&m.push(i(m)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=t(u),f=t(f),r(u.translateX,u.translateY,f.translateX,f.translateY,c,d),l(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(m){for(var h=-1,g=d.length,p;++h<g;)c[(p=d[h]).i]=p.x(m);return c.join("")}}}var K2=Kc(Y2,"px, ","px)","deg)"),X2=Kc(U2,", ",")",")"),mo=0,Lo=0,No=0,Xc=1e3,Vi,Do,xi=0,jn=0,sr=0,Xo=typeof performance=="object"&&performance.now?performance:Date,Jc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pl(){return jn||(Jc(J2),jn=Xo.now()+sr)}function J2(){jn=0}function Yi(){this._call=this._time=this._next=null}Yi.prototype=Zc.prototype={constructor:Yi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Pl():+n)+(e==null?0:+e),!this._next&&Do!==this&&(Do?Do._next=this:Vi=this,Do=this),this._call=t,this._time=n,Qr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qr())}};function Zc(t,e,n){var o=new Yi;return o.restart(t,e,n),o}function Z2(){Pl(),++mo;for(var t=Vi,e;t;)(e=jn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mo}function Ba(){jn=(xi=Xo.now())+sr,mo=Lo=0;try{Z2()}finally{mo=0,z2(),jn=0}}function Q2(){var t=Xo.now(),e=t-xi;e>Xc&&(sr-=e,xi=t)}function z2(){for(var t,e=Vi,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Vi=n);Do=t,Qr(o)}function Qr(t){if(!mo){Lo&&(Lo=clearTimeout(Lo));var e=t-jn;e>24?(t<1/0&&(Lo=setTimeout(Ba,t-Xo.now()-sr)),No&&(No=clearInterval(No))):(No||(xi=Xo.now(),No=setInterval(Q2,Xc)),mo=1,Jc(Ba))}}function Ha(t,e,n){var o=new Yi;return e=e==null?0:+e,o.restart(i=>{o.stop(),t(i+e)},e,n),o}var ek=Pc("start","end","cancel","interrupt"),tk=[],Qc=0,Ga=1,zr=2,yi=3,Wa=4,el=5,vi=6;function ar(t,e,n,o,i,r){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;nk(t,n,{name:e,index:o,group:i,on:ek,tween:tk,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Qc})}function Nl(t,e){var n=jt(t,e);if(n.state>Qc)throw new Error("too late; already scheduled");return n}function Xt(t,e){var n=jt(t,e);if(n.state>yi)throw new Error("too late; already running");return n}function jt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function nk(t,e,n){var o=t.__transition,i;o[e]=n,n.timer=Zc(r,0,n.time);function r(u){n.state=Ga,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,c,d,m;if(n.state!==Ga)return s();for(f in o)if(m=o[f],m.name===n.name){if(m.state===yi)return Ha(l);m.state===Wa?(m.state=vi,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete o[f]):+f<e&&(m.state=vi,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete o[f])}if(Ha(function(){n.state===yi&&(n.state=Wa,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=zr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===zr){for(n.state=yi,i=new Array(d=n.tween.length),f=0,c=-1;f<d;++f)(m=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=m);i.length=c+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=el,1),c=-1,d=i.length;++c<d;)i[c].call(t,f);n.state===el&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=vi,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function ok(t,e){var n=t.__transition,o,i,r=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((o=n[l]).name!==e){r=!1;continue}i=o.state>zr&&o.state<el,o.state=vi,o.timer.stop(),o.on.call(i?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[l]}r&&delete t.__transition}}function ik(t){return this.each(function(){ok(this,t)})}function rk(t,e){var n,o;return function(){var i=Xt(this,t),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===e){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function lk(t,e,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Xt(this,t),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function sk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=jt(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===t)return l.value;return null}return this.each((e==null?rk:lk)(n,t,e))}function El(t,e,n){var o=t._id;return t.each(function(){var i=Xt(this,o);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jt(i,o).value[e]}}function zc(t,e){var n;return(typeof e=="number"?Lt:e instanceof Fn?Wi:(n=Fn(e))?(e=n,Wi):Yc)(t,e)}function ak(t){return function(){this.removeAttribute(t)}}function uk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fk(t,e,n){var o,i=n+"",r;return function(){var l=this.getAttribute(t);return l===i?null:l===o?r:r=e(o=l,n)}}function ck(t,e,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(t.space,t.local);return l===i?null:l===o?r:r=e(o=l,n)}}function dk(t,e,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(t):(l=this.getAttribute(t),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=e(o=l,a)))}}function mk(t,e,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=e(o=l,a)))}}function pk(t,e){var n=lr(t),o=n==="transform"?X2:zc;return this.attrTween(t,typeof e=="function"?(n.local?mk:dk)(n,o,El(this,"attr."+t,e)):e==null?(n.local?uk:ak)(n):(n.local?ck:fk)(n,o,e))}function hk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function _k(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function gk(t,e){var n,o;function i(){var r=e.apply(this,arguments);return r!==o&&(n=(o=r)&&_k(t,r)),n}return i._value=e,i}function bk(t,e){var n,o;function i(){var r=e.apply(this,arguments);return r!==o&&(n=(o=r)&&hk(t,r)),n}return i._value=e,i}function yk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=lr(t);return this.tween(n,(o.local?gk:bk)(o,e))}function vk(t,e){return function(){Nl(this,t).delay=+e.apply(this,arguments)}}function wk(t,e){return e=+e,function(){Nl(this,t).delay=e}}function kk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vk:wk)(e,t)):jt(this.node(),e).delay}function Ck(t,e){return function(){Xt(this,t).duration=+e.apply(this,arguments)}}function Tk(t,e){return e=+e,function(){Xt(this,t).duration=e}}function Sk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ck:Tk)(e,t)):jt(this.node(),e).duration}function Ak(t,e){if(typeof e!="function")throw new Error;return function(){Xt(this,t).ease=e}}function Ik(t){var e=this._id;return arguments.length?this.each(Ak(e,t)):jt(this.node(),e).ease}function Mk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Xt(this,t).ease=n}}function Ok(t){if(typeof t!="function")throw new Error;return this.each(Mk(this._id,t))}function Pk(t){typeof t!="function"&&(t=$c(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r=e[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&t.call(s,s.__data__,u,r)&&a.push(s);return new on(o,this._parents,this._name,this._id)}function Nk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=e[a],u=n[a],f=s.length,c=l[a]=new Array(f),d,m=0;m<f;++m)(d=s[m]||u[m])&&(c[m]=d);for(;a<o;++a)l[a]=e[a];return new on(l,this._parents,this._name,this._id)}function Ek(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $k(t,e,n){var o,i,r=Ek(e)?Nl:Xt;return function(){var l=r(this,t),a=l.on;a!==o&&(i=(o=a).copy()).on(e,n),l.on=i}}function Rk(t,e){var n=this._id;return arguments.length<2?jt(this.node(),n).on.on(t):this.each($k(n,t,e))}function Lk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Dk(){return this.on("end.remove",Lk(this._id))}function Fk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sl(t));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),f,c,d=0;d<s;++d)(f=a[d])&&(c=t.call(f,f.__data__,d,a))&&("__data__"in f&&(c.__data__=f.__data__),u[d]=c,ar(u[d],e,n,d,u,jt(f,n)));return new on(r,this._parents,e,n)}function jk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ec(t));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,f,c=0;c<u;++c)if(f=s[c]){for(var d=t.call(f,f.__data__,c,s),m,h=jt(f,n),g=0,p=d.length;g<p;++g)(m=d[g])&&ar(m,e,n,g,d,h);r.push(d),l.push(f)}return new on(r,l,e,n)}var qk=ei.prototype.constructor;function Bk(){return new qk(this._groups,this._parents)}function Hk(t,e){var n,o,i;return function(){var r=co(this,t),l=(this.style.removeProperty(t),co(this,t));return r===l?null:r===n&&l===o?i:i=e(n=r,o=l)}}function ed(t){return function(){this.style.removeProperty(t)}}function Gk(t,e,n){var o,i=n+"",r;return function(){var l=co(this,t);return l===i?null:l===o?r:r=e(o=l,n)}}function Wk(t,e,n){var o,i,r;return function(){var l=co(this,t),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(t),co(this,t))),l===s?null:l===o&&s===i?r:(i=s,r=e(o=l,a))}}function Vk(t,e){var n,o,i,r="style."+e,l="end."+r,a;return function(){var s=Xt(this,t),u=s.on,f=s.value[r]==null?a||(a=ed(e)):void 0;(u!==n||i!==f)&&(o=(n=u).copy()).on(l,i=f),s.on=o}}function xk(t,e,n){var o=(t+="")=="transform"?K2:zc;return e==null?this.styleTween(t,Hk(t,o)).on("end.style."+t,ed(t)):typeof e=="function"?this.styleTween(t,Wk(t,o,El(this,"style."+t,e))).each(Vk(this._id,t)):this.styleTween(t,Gk(t,o,e),n).on("end.style."+t,null)}function Yk(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function Uk(t,e,n){var o,i;function r(){var l=e.apply(this,arguments);return l!==i&&(o=(i=l)&&Yk(t,l,n)),o}return r._value=e,r}function Kk(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,Uk(t,e,n??""))}function Xk(t){return function(){this.textContent=t}}function Jk(t){return function(){var e=t(this);this.textContent=e??""}}function Zk(t){return this.tween("text",typeof t=="function"?Jk(El(this,"text",t)):Xk(t==null?"":t+""))}function Qk(t){return function(e){this.textContent=t.call(this,e)}}function zk(t){var e,n;function o(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Qk(i)),e}return o._value=t,o}function e5(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zk(t))}function t5(){for(var t=this._name,e=this._id,n=td(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var f=jt(s,e);ar(s,t,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new on(o,this._parents,t,n)}function n5(){var t,e,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=Xt(this,o),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(s)),u.on=e}),i===0&&r()})}var o5=0;function on(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function td(){return++o5}var Zt=ei.prototype;on.prototype={constructor:on,select:Fk,selectAll:jk,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:Pk,merge:Nk,selection:Bk,transition:t5,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:Rk,attr:pk,attrTween:yk,style:xk,styleTween:Kk,text:Zk,textTween:e5,remove:Dk,tween:sk,delay:kk,duration:Sk,ease:Ik,easeVarying:Ok,end:n5,[Symbol.iterator]:Zt[Symbol.iterator]};function i5(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var r5={time:null,delay:0,duration:250,ease:i5};function l5(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function s5(t){var e,n;t instanceof on?(e=t._id,t=t._name):(e=td(),(n=r5).time=Pl(),t=t==null?null:t+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&ar(s,t,e,u,l,n||l5(s,e));return new on(o,this._parents,t,e)}ei.prototype.interrupt=ik;ei.prototype.transition=s5;const tl=Math.PI,nl=2*tl,Sn=1e-6,a5=nl-Sn;function nd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function u5(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return nd;const n=10**e;return function(o){this._+=o[0];for(let i=1,r=o.length;i<r;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}class f5{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?nd:u5(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,o,i){this._append`Q${+e},${+n},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(e,n,o,i,r,l){this._append`C${+e},${+n},${+o},${+i},${this._x1=+r},${this._y1=+l}`}arcTo(e,n,o,i,r){if(e=+e,n=+n,o=+o,i=+i,r=+r,r<0)throw new Error(`negative radius: ${r}`);let l=this._x1,a=this._y1,s=o-e,u=i-n,f=l-e,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Sn)if(!(Math.abs(c*s-u*f)>Sn)||!r)this._append`L${this._x1=e},${this._y1=n}`;else{let m=o-l,h=i-a,g=s*s+u*u,p=m*m+h*h,w=Math.sqrt(g),v=Math.sqrt(d),A=r*Math.tan((tl-Math.acos((g+d-p)/(2*w*v)))/2),R=A/v,q=A/w;Math.abs(R-1)>Sn&&this._append`L${e+R*f},${n+R*c}`,this._append`A${r},${r},0,0,${+(c*m>f*h)},${this._x1=e+q*s},${this._y1=n+q*u}`}}arc(e,n,o,i,r,l){if(e=+e,n=+n,o=+o,l=!!l,o<0)throw new Error(`negative radius: ${o}`);let a=o*Math.cos(i),s=o*Math.sin(i),u=e+a,f=n+s,c=1^l,d=l?i-r:r-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Sn||Math.abs(this._y1-f)>Sn)&&this._append`L${u},${f}`,o&&(d<0&&(d=d%nl+nl),d>a5?this._append`A${o},${o},0,1,${c},${e-a},${n-s}A${o},${o},0,1,${c},${this._x1=u},${this._y1=f}`:d>Sn&&this._append`A${o},${o},0,${+(d>=tl)},${c},${this._x1=e+o*Math.cos(r)},${this._y1=n+o*Math.sin(r)}`)}rect(e,n,o,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}}function c5(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ui(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function po(t){return t=Ui(Math.abs(t)),t?t[1]:NaN}function d5(t,e){return function(n,o){for(var i=n.length,r=[],l=0,a=t[0],s=0;i>0&&a>0&&(s+a+1>o&&(a=Math.max(1,o-s)),r.push(n.substring(i-=a,i+a)),!((s+=a+1)>o));)a=t[l=(l+1)%t.length];return r.reverse().join(e)}}function m5(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var p5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ki(t){if(!(e=p5.exec(t)))throw new Error("invalid format: "+t);var e;return new $l({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ki.prototype=$l.prototype;function $l(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h5(t){e:for(var e=t.length,n=1,o=-1,i;n<e;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var od;function _5(t,e){var n=Ui(t,e);if(!n)return t+"";var o=n[0],i=n[1],r=i-(od=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=o.length;return r===l?o:r>l?o+new Array(r-l+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+Ui(t,Math.max(0,e+r-1))[0]}function Va(t,e){var n=Ui(t,e);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const xa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:c5,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Va(t*100,e),r:Va,s:_5,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ya(t){return t}var Ua=Array.prototype.map,Ka=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function g5(t){var e=t.grouping===void 0||t.thousands===void 0?Ya:d5(Ua.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",r=t.numerals===void 0?Ya:m5(Ua.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(c){c=Ki(c);var d=c.fill,m=c.align,h=c.sign,g=c.symbol,p=c.zero,w=c.width,v=c.comma,A=c.precision,R=c.trim,q=c.type;q==="n"?(v=!0,q="g"):xa[q]||(A===void 0&&(A=12),R=!0,q="g"),(p||d==="0"&&m==="=")&&(p=!0,d="0",m="=");var F=g==="$"?n:g==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",E=g==="$"?o:/[%p]/.test(q)?l:"",I=xa[q],N=/[defgprs%]/.test(q);A=A===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function j(C){var b=F,T=E,D,W,L;if(q==="c")T=I(C)+T,C="";else{C=+C;var U=C<0||1/C<0;if(C=isNaN(C)?s:I(Math.abs(C),A),R&&(C=h5(C)),U&&+C==0&&h!=="+"&&(U=!1),b=(U?h==="("?h:a:h==="-"||h==="("?"":h)+b,T=(q==="s"?Ka[8+od/3]:"")+T+(U&&h==="("?")":""),N){for(D=-1,W=C.length;++D<W;)if(L=C.charCodeAt(D),48>L||L>57){T=(L===46?i+C.slice(D+1):C.slice(D))+T,C=C.slice(0,D);break}}}v&&!p&&(C=e(C,1/0));var X=b.length+C.length+T.length,Q=X<w?new Array(w-X+1).join(d):"";switch(v&&p&&(C=e(Q+C,Q.length?w-T.length:1/0),Q=""),m){case"<":C=b+C+T+Q;break;case"=":C=b+Q+C+T;break;case"^":C=Q.slice(0,X=Q.length>>1)+b+C+T+Q.slice(X);break;default:C=Q+b+C+T;break}return r(C)}return j.toString=function(){return c+""},j}function f(c,d){var m=u((c=Ki(c),c.type="f",c)),h=Math.max(-8,Math.min(8,Math.floor(po(d)/3)))*3,g=Math.pow(10,-h),p=Ka[8+h/3];return function(w){return m(g*w)+p}}return{format:u,formatPrefix:f}}var di,id,rd;b5({thousands:",",grouping:[3],currency:["$",""]});function b5(t){return di=g5(t),id=di.format,rd=di.formatPrefix,di}function y5(t){return Math.max(0,-po(Math.abs(t)))}function v5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(po(e)/3)))*3-po(Math.abs(t)))}function w5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,po(e)-po(t))+1}function k5(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function C5(t){return function(){return t}}function T5(t){return+t}var Xa=[0,1];function Jn(t){return t}function ol(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:C5(isNaN(e)?NaN:.5)}function S5(t,e){var n;return t>e&&(n=t,t=e,e=n),function(o){return Math.max(t,Math.min(e,o))}}function A5(t,e,n){var o=t[0],i=t[1],r=e[0],l=e[1];return i<o?(o=ol(i,o),r=n(l,r)):(o=ol(o,i),r=n(r,l)),function(a){return r(o(a))}}function I5(t,e,n){var o=Math.min(t.length,e.length)-1,i=new Array(o),r=new Array(o),l=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<o;)i[l]=ol(t[l],t[l+1]),r[l]=n(e[l],e[l+1]);return function(a){var s=Iv(t,a,1,o)-1;return r[s](i[s](a))}}function M5(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function O5(){var t=Xa,e=Xa,n=Ol,o,i,r,l=Jn,a,s,u;function f(){var d=Math.min(t.length,e.length);return l!==Jn&&(l=S5(t[0],t[d-1])),a=d>2?I5:A5,s=u=null,c}function c(d){return d==null||isNaN(d=+d)?r:(s||(s=a(t.map(o),e,n)))(o(l(d)))}return c.invert=function(d){return l(i((u||(u=a(e,t.map(o),Lt)))(d)))},c.domain=function(d){return arguments.length?(t=Array.from(d,T5),f()):t.slice()},c.range=function(d){return arguments.length?(e=Array.from(d),f()):e.slice()},c.rangeRound=function(d){return e=Array.from(d),n=x2,f()},c.clamp=function(d){return arguments.length?(l=d?!0:Jn,f()):l!==Jn},c.interpolate=function(d){return arguments.length?(n=d,f()):n},c.unknown=function(d){return arguments.length?(r=d,c):r},function(d,m){return o=d,i=m,f()}}function P5(){return O5()(Jn,Jn)}function N5(t,e,n,o){var i=Ev(t,e,n),r;switch(o=Ki(o??",f"),o.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return o.precision==null&&!isNaN(r=v5(i,l))&&(o.precision=r),rd(o,l)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(r=w5(i,Math.max(Math.abs(t),Math.abs(e))))&&(o.precision=r-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(r=y5(i))&&(o.precision=r-(o.type==="%")*2);break}}return id(o)}function E5(t){var e=t.domain;return t.ticks=function(n){var o=e();return Nv(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=e();return N5(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=e(),i=0,r=o.length-1,l=o[i],a=o[r],s,u,f=10;for(a<l&&(u=l,l=a,a=u,u=i,i=r,r=u);f-- >0;){if(u=Yr(l,a,n),u===s)return o[i]=l,o[r]=a,e(o);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;s=u}return t},t}function il(){var t=P5();return t.copy=function(){return M5(t,il())},k5.apply(t,arguments),E5(t)}function Un(t){return function(){return t}}function $5(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);e=o}return t},()=>new f5(e)}function R5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ld(t){this._context=t}ld.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function L5(t){return new ld(t)}function D5(t){return t[0]}function F5(t){return t[1]}function Or(t,e){var n=Un(!0),o=null,i=L5,r=null,l=$5(a);t=typeof t=="function"?t:t===void 0?D5:Un(t),e=typeof e=="function"?e:e===void 0?F5:Un(e);function a(s){var u,f=(s=R5(s)).length,c,d=!1,m;for(o==null&&(r=i(m=l())),u=0;u<=f;++u)!(u<f&&n(c=s[u],u,s))===d&&((d=!d)?r.lineStart():r.lineEnd()),d&&r.point(+t(c,u,s),+e(c,u,s));if(m)return r=null,m+""||null}return a.x=function(s){return arguments.length?(t=typeof s=="function"?s:Un(+s),a):t},a.y=function(s){return arguments.length?(e=typeof s=="function"?s:Un(+s),a):e},a.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Un(!!s),a):n},a.curve=function(s){return arguments.length?(i=s,o!=null&&(r=i(o)),a):i},a.context=function(s){return arguments.length?(s==null?o=r=null:r=i(o=s),a):o},a}function Fo(t,e,n){this.k=t,this.x=e,this.y=n}Fo.prototype={constructor:Fo,scale:function(t){return t===1?this:new Fo(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Fo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Fo.prototype;function j5(t){let e;return{c(){e=Zi("svg"),$(e,"id","line-chart")},m(n,o){O(n,e,o)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}const Ja=52;function q5(t,e,n){let{data:o=[]}=e,i,r,l;const a={top:10,right:30,bottom:10,left:20},s=500-a.left-a.right,u=400-a.top-a.bottom;Or().x((h,g)=>r(g)).y(h=>l(h)),Zo(()=>{n(1,i=k2("#line-chart").attr("width",s+a.left+a.right).attr("height",u+a.top+a.bottom)),r=il().range([0,s]),l=il().range([u,0]),o.length&&f()});function f(){const h=o.length>Ja?o.slice(-Ja):o;c(h),d(h),m()}function c(h){i.selectAll(".line").remove();const g=Or().defined(w=>w>-5).x((w,v)=>r(v)).y(w=>l(w)),p=Or().defined(w=>w<0).x((w,v)=>r(v)).y(w=>l(w));i.append("path").datum(h).attr("class","line positive").attr("d",g).attr("transform",`translate(${a.left},${a.top})`).attr("fill","none").attr("stroke","green").attr("stroke-width",2),i.append("path").datum(h).attr("class","line negative").attr("d",p).attr("transform",`translate(${a.left},${a.top})`).attr("fill","none").attr("stroke","red").attr("stroke-width",2)}function d(h){const g=Math.max(0,...h),p=Math.min(0,...h);r.domain([0,h.length-1]),l.domain([p,g]).nice()}function m(h){const g=qv(r).ticks(0),p=Bv(l).ticks(10);i.selectAll(".axis").remove(),i.append("g").attr("class","axis x-axis").attr("transform",`translate(${a.left},${u+a.top})`).call(g),i.append("g").attr("class","axis y-axis").attr("transform",`translate(${a.left},${a.top})`).call(p)}return t.$$set=h=>{"data"in h&&n(0,o=h.data)},t.$$.update=()=>{t.$$.dirty&3&&o&&i&&f()},[o,i]}class B5 extends pe{constructor(e){super(),me(this,e,q5,j5,de,{data:0})}}function H5(t){let e,n=t[1].townInfo.knowledge_points+"",o,i;return{c(){e=G("Manage your Knowledge ("),o=G(n),i=G(" pts)")},m(r,l){O(r,e,l),O(r,o,l),O(r,i,l)},p(r,l){l&2&&n!==(n=r[1].townInfo.knowledge_points+"")&&ae(o,n)},d(r){r&&(M(e),M(o),M(i))}}}function G5(t){let e,n,o,i;return e=new sn({props:{$$slots:{default:[H5]},$$scope:{ctx:t}}}),o=new Gn({}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&130&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Za(t){let e,n,o=tu(t[1].townInfo.knowledge_points*t[3])+"",i,r;return{c(){e=P("br"),n=G(`
          (total value: $`),i=G(o),r=G(")")},m(l,a){O(l,e,a),O(l,n,a),O(l,i,a),O(l,r,a)},p(l,a){a&10&&o!==(o=tu(l[1].townInfo.knowledge_points*l[3])+"")&&ae(i,o)},d(l){l&&(M(e),M(n),M(i),M(r))}}}function Qa(t){let e;return{c(){e=P("div"),e.innerHTML=`Wait until the market value is <span class="text-green-500">positive</span> to sell your Knowledge for Gold. Keep in mind that you need a bank to
          convert.`},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function za(t){let e,n,o;return n=new Mt({props:{variant:"default",$$slots:{default:[W5]},$$scope:{ctx:t}}}),n.$on("click",t[0]),{c(){e=P("div"),Y(n.$$.fragment)},m(i,r){O(i,e,r),V(n,e,null),o=!0},p(i,r){const l={};r&128&&(l.$$scope={dirty:r,ctx:i}),n.$set(l)},i(i){o||(k(n.$$.fragment,i),o=!0)},o(i){S(n.$$.fragment,i),o=!1},d(i){i&&M(e),x(n)}}}function W5(t){let e;return{c(){e=G("Convert Knowledge to Gold")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function eu(t){let e;return{c(){e=P("div"),e.textContent="You need a bank to convert knowledge to gold."},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function V5(t){let e,n,o,i,r,l,a,s,u=(t[3]??0)+"",f,c,d,m,h,g,p,w,v,A,R,q;e=new an({props:{$$slots:{default:[G5]},$$scope:{ctx:t}}});let F=t[3]>0&&Za(t);g=new B5({props:{data:t[2]}});let E=t[3]<0&&Qa(),I=t[1].hasBank&&t[3]>0&&za(t),N=t[1].hasBank===!1&&eu();return R=new Cn({}),{c(){Y(e.$$.fragment),n=B(),o=P("span"),o.textContent="Knowledge is power, unlock it!",i=B(),r=P("div"),l=P("div"),a=G("Market Rate: "),s=P("span"),f=G(u),c=G(" gold"),m=G(`
        per Knowledge Point
        `),F&&F.c(),h=B(),Y(g.$$.fragment),p=B(),E&&E.c(),w=B(),I&&I.c(),v=B(),N&&N.c(),A=B(),Y(R.$$.fragment),$(o,"class",""),$(s,"class",d=t[3]<0?"text-red-500":"text-green-500"),$(r,"class","py-0 flex flex-col gap-4 text-gray-400 overflow-x-auto")},m(j,C){V(e,j,C),O(j,n,C),O(j,o,C),O(j,i,C),O(j,r,C),y(r,l),y(l,a),y(l,s),y(s,f),y(s,c),y(l,m),F&&F.m(l,null),y(r,h),V(g,r,null),y(r,p),E&&E.m(r,null),y(r,w),I&&I.m(r,null),y(r,v),N&&N.m(r,null),O(j,A,C),V(R,j,C),q=!0},p(j,C){const b={};C&130&&(b.$$scope={dirty:C,ctx:j}),e.$set(b),(!q||C&8)&&u!==(u=(j[3]??0)+"")&&ae(f,u),(!q||C&8&&d!==(d=j[3]<0?"text-red-500":"text-green-500"))&&$(s,"class",d),j[3]>0?F?F.p(j,C):(F=Za(j),F.c(),F.m(l,null)):F&&(F.d(1),F=null);const T={};C&4&&(T.data=j[2]),g.$set(T),j[3]<0?E||(E=Qa(),E.c(),E.m(r,w)):E&&(E.d(1),E=null),j[1].hasBank&&j[3]>0?I?(I.p(j,C),C&10&&k(I,1)):(I=za(j),I.c(),k(I,1),I.m(r,v)):I&&(Ie(),S(I,1,1,()=>{I=null}),Me()),j[1].hasBank===!1?N||(N=eu(),N.c(),N.m(r,null)):N&&(N.d(1),N=null)},i(j){q||(k(e.$$.fragment,j),k(g.$$.fragment,j),k(I),k(R.$$.fragment,j),q=!0)},o(j){S(e.$$.fragment,j),S(g.$$.fragment,j),S(I),S(R.$$.fragment,j),q=!1},d(j){j&&(M(n),M(o),M(i),M(r),M(A)),x(e,j),F&&F.d(),x(g),E&&E.d(),I&&I.d(),N&&N.d(),x(R,j)}}}function x5(t){let e,n;return e=new un({props:{transitionConfig:{duration:0},class:"bg-foreground text-accentText",$$slots:{default:[V5]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&142&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Y5(t){let e,n,o;function i(l){t[5](l)}let r={$$slots:{default:[x5]},$$scope:{ctx:t}};return t[4]!==void 0&&(r.open=t[4]),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&142&&(s.$$scope={dirty:a,ctx:l}),!n&&a&16&&(n=!0,s.open=l[4],xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function tu(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function U5(t,e,n){let o,i;le(t,$e,u=>n(1,o=u)),le(t,lo,u=>n(4,i=u));let r,l=0;function a(){let u=o;o.hasBank===!0?(u.townInfo.gold+=Math.round(u.townInfo.knowledge_points*l),u.townInfo.knowledge_points=0,$e.set(u),localStorage.setItem(_t,JSON.stringify(u))):St.set("You need a bank to convert knowledge to gold.")}function s(u){i=u,lo.set(i)}return t.$$.update=()=>{t.$$.dirty&2&&o&&(n(2,r=o.economyAndLaws.knowledge_gold_market_rates),n(3,l=o.economyAndLaws.knowledge_gold_market_rates[o.economyAndLaws.knowledge_gold_market_rates.length-1]))},[a,o,r,l,i,s]}class K5 extends pe{constructor(e){super(),me(this,e,U5,Y5,de,{convertKnowledgeToGold:0})}get convertKnowledgeToGold(){return this.$$.ctx[0]}}const X5=[{id:"sunshine",title:"Hint of Sunshine",description:`Scientist Jane T. found that more sunlight makes everyone a bit happier.
          Now, every home is equipped with a pair of sunglasses and a sunhat. Enjoy happier citizens!,
          `,cost:5e3,duration:180,effect:t=>(t.townInfo.happiness+=100,t)},{id:"antibiotics",title:"We will call them 'Antibiotics'",description:`Scientist Alfred C. has pitched us an idea that he calls 'Antibiotics'.
           We don't really know what that means, but it seems to make people healthier.
          `,cost:8e3,duration:200,effect:t=>(t.townInfo.health+=180,t.townInfo.happiness+=25,t)},{id:"funny_cows",title:"Cowabunga!",description:`Scientist Barry T. thought that showing cows some stand-up comedy would make them produce better milk, but it didn't have the desired effect.
          The cows are now following Mike Birbiglia on Twitter, but the milk production has not increased.
          `,cost:3e3,duration:60,effect:t=>t},{id:"missing_treasure",title:"Missing Treasure?",description:`Scientist Sarah H. was running an experiment on tree growth and found a stash of gold near the lab.
          She hopes nobody will miss it. Your town now has some more money.
          `,cost:15e3,duration:180,effect:t=>(t.townInfo.gold+=Math.floor(Math.random()*35e3),t)},{id:"tax_relief",title:"'Maybe the government is not so bad after all'",description:`Scientist Sam P. conducted a study and found that if you put a tiny bit of CHEMICAL X in the water supply, people are more likely to be ok with tax hikes.
          We don't question it, as these experiments cost a lot of moo-lah.`,cost:7500,duration:360,effect:t=>(t.economyAndLaws.max_tax_rate=(Math.random()*.8+1.2)*t.economyAndLaws.max_tax_rate,t)},{id:"spring_break",title:"Spring Break",description:`The Scientists took our money and spent the week at the beach.
          We are not sure what they did, but they came back with a tan and a smile.`,cost:2e3,duration:7,effect:t=>t},{id:"tornado",title:"A Gust of Grain",description:`Scientist Clint C. is sulking after a botched weather experiment caused about half of the food supply to be sucked into a tornado.
  		The only positive seems to be that the town now knows what a tornado is, and that makes us a bit smarter as a whole.`,cost:7e3,duration:150,effect:t=>(t.townInfo.knowledge_points+=3e3,t.resources.food=Math.floor(t.resources.food/2),t)},{id:"aquatic_overachievers",title:"Fishy Business",description:`An attempt to genetically enhance fish intelligence by Scientist Goldie F. in fisheries has gone awry, resulting in fish that are too smart to be caught. The fisheries are now underpopulated and shut down, but the town enjoys an unexpected tourism boom as people flock to see the genius fish who are now hanging out in local parks.
          Who knew fish could be such a draw?`,cost:6e3,duration:90,effect:t=>(t.townInfo.gold+=1e4,nu("fishery",t),t)},{id:"educational_eclipse",title:"A Sudden Drop in IQ",description:`Scientist Albert E. wanted to see if the towns' children would become smarter if THEY ran the schools.
          This was obviously a terrible idea and the first thing the kids did was shut down the schools.`,cost:1e3,duration:45,effect:t=>(nu("schoolhouse",t),t)},{id:"education_grant",title:"Education Grant",description:`Scientist Marie C. took this experiments funding and applied the town for a grant to improve education.
          The town wins a grant for $150,000 to build schools and improve education. (but it's up to you if that's how you want to spend the money)`,cost:25e3,duration:45,effect:t=>(t.townInfo.gold+=15e4,t)},{id:"mindfulness_meditation_classes",title:"'Mindfulness Meditation Classes'",description:`Scientist Zen M. has introduced mindfulness meditation classes to the town after realizing that breathing in certain ways can lower stress.
  		Now, the town is a bit more relaxed, for now.`,cost:13e3,duration:540,effect:t=>(t.townInfo.happiness+=75,t)}];function nu(t,e){let n=Ge(t,e);for(let o=0;o<n.length;o++)En(n[o].x,n[o].y,e)}function ou(t,e,n){const o=t.slice();return o[15]=e[n],o}function J5(t){let e,n=t[1].lab.active_experiment.title+"",o;return{c(){e=G("🎉 Experiment Completed: "),o=G(n)},m(i,r){O(i,e,r),O(i,o,r)},p(i,r){r&2&&n!==(n=i[1].lab.active_experiment.title+"")&&ae(o,n)},d(i){i&&(M(e),M(o))}}}function Z5(t){let e,n=t[1].lab.active_experiment.description+"",o;return{c(){e=P("div"),o=G(n),$(e,"class","select-none whitespace-pre-wrap text-lg text-gray-400 leading-6 px-4 py-4 text-center ")},m(i,r){O(i,e,r),y(e,o)},p(i,r){r&2&&n!==(n=i[1].lab.active_experiment.description+"")&&ae(o,n)},d(i){i&&M(e)}}}function Q5(t){let e,n,o,i;return e=new yc({props:{class:"text-center",$$slots:{default:[J5]},$$scope:{ctx:t}}}),o=new Ic({props:{$$slots:{default:[Z5]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&262146&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&262146&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function z5(t){let e;return{c(){e=G("Thank the scientists")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function e3(t){let e,n;return e=new Sc({props:{$$slots:{default:[z5]},$$scope:{ctx:t}}}),e.$on("click",t[9]),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&262144&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function t3(t){let e,n,o,i;return e=new Ac({props:{$$slots:{default:[Q5]},$$scope:{ctx:t}}}),o=new kl({props:{$$slots:{default:[e3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&262146&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&262144&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function n3(t){let e,n;return e=new Cl({props:{$$slots:{default:[t3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&262146&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function o3(t){let e;return{c(){e=P("span"),e.textContent="Manage your Laboratory 🔬 🧪"},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function i3(t){let e,n,o,i=t[1].lab.xp+"",r,l,a,s;return{c(){e=P("span"),n=G("You have earned "),o=P("span"),r=G(i),l=G(" XP"),s=G(` from experiments. XP can be used to buy advanced plots and develop your
          city.`),$(o,"class",a=t[1].lab.xp<0?"text-textDanger":"text-primaryText")},m(u,f){O(u,e,f),y(e,n),y(e,o),y(o,r),y(o,l),y(e,s)},p(u,f){f&2&&i!==(i=u[1].lab.xp+"")&&ae(r,i),f&2&&a!==(a=u[1].lab.xp<0?"text-textDanger":"text-primaryText")&&$(o,"class",a)},d(u){u&&M(e)}}}function r3(t){let e,n,o,i;return e=new sn({props:{$$slots:{default:[o3]},$$scope:{ctx:t}}}),o=new Gn({props:{$$slots:{default:[i3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&262144&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&262146&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function l3(t){let e;return{c(){e=G("No more experiments available")},m(n,o){O(n,e,o)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}function s3(t){let e,n,o,i,r=Ke(t[0]),l=[];for(let s=0;s<r.length;s+=1)l[s]=ru(ou(t,r,s));const a=s=>S(l[s],1,1,()=>{l[s]=null});return{c(){e=P("div"),e.textContent=`It's time to fund your next experiment! Choose a project below based on
        it's funding requirement. Once the experiment is over, you will see the
        results.`,n=B(),o=P("div");for(let s=0;s<l.length;s+=1)l[s].c();$(e,"class","select-none text-sm "),$(o,"class","text-center flex flex-col justify-center items-center gap-4 ")},m(s,u){O(s,e,u),O(s,n,u),O(s,o,u);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,null);i=!0},p(s,u){if(u&19){r=Ke(s[0]);let f;for(f=0;f<r.length;f+=1){const c=ou(s,r,f);l[f]?(l[f].p(c,u),k(l[f],1)):(l[f]=ru(c),l[f].c(),k(l[f],1),l[f].m(o,null))}for(Ie(),f=r.length;f<l.length;f+=1)a(f);Me()}},i(s){if(!i){for(let u=0;u<r.length;u+=1)k(l[u]);i=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)S(l[u]);i=!1},d(s){s&&(M(e),M(n),M(o)),ft(l,s)}}}function a3(t){let e,n=t[1].lab.active_experiment.duration+"",o,i,r,l,a=t[1].lab.active_experiment.duration===0&&lu(t);return{c(){e=G("Currently running an experiment... check back in "),o=G(n),i=G(` days.
      `),a&&a.c(),r=Fe()},m(s,u){O(s,e,u),O(s,o,u),O(s,i,u),a&&a.m(s,u),O(s,r,u),l=!0},p(s,u){(!l||u&2)&&n!==(n=s[1].lab.active_experiment.duration+"")&&ae(o,n),s[1].lab.active_experiment.duration===0?a?(a.p(s,u),u&2&&k(a,1)):(a=lu(s),a.c(),k(a,1),a.m(r.parentNode,r)):a&&(Ie(),S(a,1,1,()=>{a=null}),Me())},i(s){l||(k(a),l=!0)},o(s){S(a),l=!1},d(s){s&&(M(e),M(o),M(i),M(r)),a&&a.d(s)}}}function iu(t){let e,n,o=t[15].id+"",i;return{c(){e=P("span"),n=G("// dev-"),i=G(o),$(e,"class","text-xs text-gray-400")},m(r,l){O(r,e,l),y(e,n),y(e,i)},p(r,l){l&1&&o!==(o=r[15].id+"")&&ae(i,o)},d(r){r&&M(e)}}}function u3(t){let e,n=su(t[15].cost).split(".")[0]+"",o,i,r,l=t[1].devMode===!0&&iu(t);return{c(){e=G("$"),o=G(n),i=G(` gold

            `),l&&l.c(),r=B()},m(a,s){O(a,e,s),O(a,o,s),O(a,i,s),l&&l.m(a,s),O(a,r,s)},p(a,s){s&1&&n!==(n=su(a[15].cost).split(".")[0]+"")&&ae(o,n),a[1].devMode===!0?l?l.p(a,s):(l=iu(a),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(a){a&&(M(e),M(o),M(i),M(r)),l&&l.d(a)}}}function ru(t){let e,n;function o(){return t[11](t[15])}return e=new Mt({props:{variant:"outline",class:`min-w-48 w-max flex-col
				`+(t[15].cost>t[1].townInfo.gold?"cursor-not-allowed":"")+`
				`,$$slots:{default:[u3]},$$scope:{ctx:t}}}),e.$on("click",o),{c(){Y(e.$$.fragment)},m(i,r){V(e,i,r),n=!0},p(i,r){t=i;const l={};r&3&&(l.class=`min-w-48 w-max flex-col
				`+(t[15].cost>t[1].townInfo.gold?"cursor-not-allowed":"")+`
				`),r&262147&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function lu(t){let e,n;return e=new Mt({props:{variant:"outline",$$slots:{default:[f3]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&262144&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function f3(t){let e;return{c(){e=G("Complete experiment (and face the impact)")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function c3(t){let e;return{c(){e=P("span"),e.textContent="Keep in mind that not all experiments yield positive results.",$(e,"class","text-left text-textDanger")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function d3(t){let e,n,o,i,r,l,a,s,u,f,c;e=new an({props:{$$slots:{default:[r3]},$$scope:{ctx:t}}}),o=new It({});const d=[a3,s3,l3],m=[];function h(g,p){return g[1].lab.active_experiment!==null?0:g[0].length>0?1:g[0].length===0?2:-1}return~(r=h(t))&&(l=m[r]=d[r](t)),s=new It({props:{class:"mt-4"}}),f=new Cn({props:{$$slots:{default:[c3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment),i=B(),l&&l.c(),a=B(),Y(s.$$.fragment),u=B(),Y(f.$$.fragment)},m(g,p){V(e,g,p),O(g,n,p),V(o,g,p),O(g,i,p),~r&&m[r].m(g,p),O(g,a,p),V(s,g,p),O(g,u,p),V(f,g,p),c=!0},p(g,p){const w={};p&262146&&(w.$$scope={dirty:p,ctx:g}),e.$set(w);let v=r;r=h(g),r===v?~r&&m[r].p(g,p):(l&&(Ie(),S(m[v],1,1,()=>{m[v]=null}),Me()),~r?(l=m[r],l?l.p(g,p):(l=m[r]=d[r](g),l.c()),k(l,1),l.m(a.parentNode,a)):l=null);const A={};p&262144&&(A.$$scope={dirty:p,ctx:g}),f.$set(A)},i(g){c||(k(e.$$.fragment,g),k(o.$$.fragment,g),k(l),k(s.$$.fragment,g),k(f.$$.fragment,g),c=!0)},o(g){S(e.$$.fragment,g),S(o.$$.fragment,g),S(l),S(s.$$.fragment,g),S(f.$$.fragment,g),c=!1},d(g){g&&(M(n),M(i),M(a),M(u)),x(e,g),x(o,g),~r&&m[r].d(g),x(s,g),x(f,g)}}}function m3(t){let e,n;return e=new un({props:{class:"bg-foreground text-accentText",$$slots:{default:[d3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&262147&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function p3(t){let e,n,o,i,r;e=new Tl({props:{open:t[2],$$slots:{default:[n3]},$$scope:{ctx:t}}});function l(s){t[12](s)}let a={$$slots:{default:[m3]},$$scope:{ctx:t}};return t[3]!==void 0&&(a.open=t[3]),o=new fn({props:a}),Re.push(()=>Kt(o,"open",l)),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(s,u){V(e,s,u),O(s,n,u),V(o,s,u),r=!0},p(s,[u]){const f={};u&4&&(f.open=s[2]),u&262146&&(f.$$scope={dirty:u,ctx:s}),e.$set(f);const c={};u&262147&&(c.$$scope={dirty:u,ctx:s}),!i&&u&8&&(i=!0,c.open=s[3],xt(()=>i=!1)),o.$set(c)},i(s){r||(k(e.$$.fragment,s),k(o.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(o.$$.fragment,s),r=!1},d(s){s&&M(n),x(e,s),x(o,s)}}}function su(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function h3(t,e,n){let o,i;le(t,$e,v=>n(1,o=v)),le(t,zn,v=>n(3,i=v));var r;let l=[],a=!1,s=!1,u=!1;function f(){if(l.length>0||!a)return l;let v=[],A=X5.filter(R=>!o.lab.past_experiments.some(q=>q.id===R.id));if(A.length===0)return[];for(let R=0;R<3;R++){let q=A[Math.floor(Math.random()*A.length)];q.cost=Math.floor(Math.random()*(q.cost*.35)+q.cost*.8),v.push(q)}return v=v.filter((R,q)=>v.indexOf(R)===q),v=v.filter(R=>R),n(8,u=!0),v}function c(v){if(o.townInfo.gold<v.cost){St.set("You do not have enough gold to purchase this experiment.");return}Te($e,o.townInfo.gold-=v.cost,o),Te($e,o.lab.active_experiment=v,o),o.lab.past_experiments.push(v)}function d(){Te(zn,i=!1,i),n(2,s=!0);let v=l.find(R=>R.id===o.lab.active_experiment.id),A=v!=null?v.effect(o):o;Te($e,o=A,o),Te($e,o.lab.active_experiment.duration=-1,o)}function m(){let v=o;v.lab.xp+=Math.round(v.lab.active_experiment.cost*(Math.random()*2+.5)),v.lab.active_experiment=null,n(2,s=!1),Te($e,o=v,o)}const h=()=>{m()},g=()=>{d()},p=v=>{v.cost<o.townInfo.gold&&c(v)};function w(v){i=v,zn.set(i)}return t.$$.update=()=>{t.$$.dirty&387&&(o?(a=!0,n(0,l=u==!1?f():l),(n(7,r=o.lab.active_experiment)===null||r===void 0?void 0:r.duration)===-1&&n(2,s=!0)):a=!1)},[l,o,s,i,c,d,m,r,u,h,g,p,w]}class _3 extends pe{constructor(e){super(),me(this,e,h3,p3,de,{})}}function g3(t){let e,n,o,i,r,l,a,s,u,f=t[0].townInfo.name+"",c,d,m,h,g,p,w,v=t[0].townInfo.population_count+"",A,R,q,F,E,I,N,j=Math.floor(t[0].environment.day/365)+1+"",C,b,T,D,W,L,U=t[0].environment.day%365+1+"",X,Q,z,ne=t[1]==0?"Normal":t[1]==1?"Fast":"Superfast",oe,Ae,ce,ee,Pe,Ne;return n=new Ht({props:{text:"Pause game",onOpen:t[6],styling:"fixed top-2 right-2"}}),{c(){e=P("div"),Y(n.$$.fragment),o=B(),i=P("div"),r=P("div"),l=P("div"),a=P("div"),s=P("div"),u=P("h1"),c=G(f),d=B(),m=P("div"),h=P("div"),g=P("div"),p=P("span"),w=G("👥 "),A=G(v),R=B(),q=P("div"),F=P("span"),E=P("span"),E.textContent="Year",I=B(),N=P("span"),C=G(j),b=B(),T=P("span"),D=P("span"),D.textContent="Day",W=B(),L=P("span"),X=G(U),Q=B(),z=P("span"),oe=G(ne),Ae=G(" Speed"),$(u,"class","cursor-pointer w-full text-center select-none"),$(s,"class","cursor-pointer flex flex-row justify-center text-center w-full"),$(a,"class","text-4xl flex flex-row items-center"),$(p,"class","text-xs px-4 min-w-24"),$(E,"class","text-xs"),$(N,"class","font-semibold text-xs"),$(F,"class","flex flex-col"),$(D,"class","text-xs"),$(L,"class","font-semibold text-xs"),$(T,"class","flex flex-col"),$(q,"class","rounded-xl flex-row text-accentText gap-4 w-20 flex items-center max-w-24"),$(z,"class","cursor text-blue-200 text-nowrap noselect text-end w-36"),bt(z,"text-blue-200",t[1]==0),bt(z,"text-yellow-200",t[1]==1),bt(z,"text-red-200",t[1]==2),$(g,"class","flex align-middle items-center text-accentText flex-row w-full justify-center gap-2 h-max"),$(h,"class","flex flex-col align-middle justify-center"),$(l,"class","flex flex-col gap-2 justify-center w-full "),$(r,"class","rounded-xl"),$(i,"class","flex justify-between flex-col align-middle items-center w-full"),$(e,"id","header"),$(e,"class",ce="flex px-6 gap-6 justify-center flex-row fixed top-0 left-0 right-0 cursor-default z-10 bg-black text-[white] py-3 align-middle border-b-4 border-sidebarBackground "+(t[2].visible?"opacity-70":""))},m(_,K){O(_,e,K),V(n,e,null),y(e,o),y(e,i),y(i,r),y(r,l),y(l,a),y(a,s),y(s,u),y(u,c),y(l,d),y(l,m),y(m,h),y(h,g),y(g,p),y(p,w),y(p,A),y(g,R),y(g,q),y(q,F),y(F,E),y(F,I),y(F,N),y(N,C),y(q,b),y(q,T),y(T,D),y(T,W),y(T,L),y(L,X),y(g,Q),y(g,z),y(z,oe),y(z,Ae),ee=!0,Pe||(Ne=[te(s,"click",t[4]),te(z,"click",t[7])],Pe=!0)},p(_,[K]){const J={};K&8&&(J.onOpen=_[6]),n.$set(J),(!ee||K&1)&&f!==(f=_[0].townInfo.name+"")&&ae(c,f),(!ee||K&1)&&v!==(v=_[0].townInfo.population_count+"")&&ae(A,v),(!ee||K&1)&&j!==(j=Math.floor(_[0].environment.day/365)+1+"")&&ae(C,j),(!ee||K&1)&&U!==(U=_[0].environment.day%365+1+"")&&ae(X,U),(!ee||K&2)&&ne!==(ne=_[1]==0?"Normal":_[1]==1?"Fast":"Superfast")&&ae(oe,ne),(!ee||K&2)&&bt(z,"text-blue-200",_[1]==0),(!ee||K&2)&&bt(z,"text-yellow-200",_[1]==1),(!ee||K&2)&&bt(z,"text-red-200",_[1]==2),(!ee||K&4&&ce!==(ce="flex px-6 gap-6 justify-center flex-row fixed top-0 left-0 right-0 cursor-default z-10 bg-black text-[white] py-3 align-middle border-b-4 border-sidebarBackground "+(_[2].visible?"opacity-70":"")))&&$(e,"class",ce)},i(_){ee||(k(n.$$.fragment,_),ee=!0)},o(_){S(n.$$.fragment,_),ee=!1},d(_){_&&M(e),x(n),Pe=!1,Ye(Ne)}}}function b3(t,e,n){let o,i,r,l;le(t,$e,m=>n(0,o=m)),le(t,Eo,m=>n(9,i=m)),le(t,Qe,m=>n(2,r=m)),le(t,Et,m=>n(3,l=m));const a=o.gameSettings.includes("casual")?[375,200,100]:[550,375,100];let s=0;Zo(()=>{o.gameSettings.includes("casual")?Te(Eo,i=375,i):Te(Eo,i=550,i);const m=setInterval(()=>{Te($e,o.timeSpent+=1e3,o)},1e3);return()=>{clearInterval(m)}});function u(){let m=prompt("Enter a new name for your town (under 200 chars)");if(m&&m.length<200&&m.length>=1){let h=o;h.townInfo.name=m,$e.set(h),localStorage.setItem(_t,JSON.stringify(h))}}function f(){s==a.length-1?n(1,s=0):n(1,s++,s),Te(Eo,i=a[s],i)}const c=()=>Te(Et,l=!0,l),d=()=>{f()};return t.$$.update=()=>{t.$$.dirty&1&&o.timeSpent>0&&vm(o.timeSpent)},[o,s,r,l,u,f,c,d]}class y3 extends pe{constructor(e){super(),me(this,e,b3,g3,de,{})}}function v3(t){let e,n,o,i,r,l;return{c(){e=P("div"),i=B(),r=P("span"),l=G(t[4]),$(e,"class",n="h-full w-full flex-1 "+t[3]+" transition-all relative"),$(e,"style",o=`transform: translateX(-${100-100*(t[2]??0)/(t[1]??1)}%)`),$(r,"class","absolute inset-0 flex items-center justify-center text-white text-sm")},m(a,s){O(a,e,s),O(a,i,s),O(a,r,s),y(r,l)},p(a,s){s&8&&n!==(n="h-full w-full flex-1 "+a[3]+" transition-all relative")&&$(e,"class",n),s&6&&o!==(o=`transform: translateX(-${100-100*(a[2]??0)/(a[1]??1)}%)`)&&$(e,"style",o),s&16&&ae(l,a[4])},d(a){a&&(M(e),M(i),M(r))}}}function w3(t){let e,n;const o=[{class:We("relative h-6 w-full overflow-hidden  bg-black border border-gray-300",t[0])},t[5]];let i={$$slots:{default:[v3]},$$scope:{ctx:t}};for(let r=0;r<o.length;r+=1)i=Z(i,o[r]);return e=new Dg({props:i}),{c(){Y(e.$$.fragment)},m(r,l){V(e,r,l),n=!0},p(r,[l]){const a=l&33?ve(o,[l&1&&{class:We("relative h-6 w-full overflow-hidden  bg-black border border-gray-300",r[0])},l&32&&at(r[5])]):{};l&94&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function k3(t,e,n){const o=["class","max","value","color","text"];let i=ue(e,o),{class:r=void 0}=e,{max:l=100}=e,{value:a=void 0}=e,{color:s="bg-accent"}=e,{text:u=void 0}=e;return t.$$set=f=>{e=Z(Z({},e),je(f)),n(5,i=ue(e,o)),"class"in f&&n(0,r=f.class),"max"in f&&n(1,l=f.max),"value"in f&&n(2,a=f.value),"color"in f&&n(3,s=f.color),"text"in f&&n(4,u=f.text)},[r,l,a,s,u,i]}class C3 extends pe{constructor(e){super(),me(this,e,k3,w3,de,{class:0,max:1,value:2,color:3,text:4})}}function au(t,e,n){const o=t.slice();return o[19]=e[n],o}function uu(t){let e,n=Ke({length:t[6]}),o=[];for(let i=0;i<n.length;i+=1)o[i]=fu(au(t,n,i));return{c(){e=P("div");for(let i=0;i<o.length;i+=1)o[i].c();$(e,"class","confetti-holder svelte-15ksp55"),bt(e,"rounded",t[9]),bt(e,"cone",t[10]),bt(e,"no-gravity",t[11]),bt(e,"reduced-motion",t[13])},m(i,r){O(i,e,r);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null)},p(i,r){if(r&37375){n=Ke({length:i[6]});let l;for(l=0;l<n.length;l+=1){const a=au(i,n,l);o[l]?o[l].p(a,r):(o[l]=fu(a),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}r&512&&bt(e,"rounded",i[9]),r&1024&&bt(e,"cone",i[10]),r&2048&&bt(e,"no-gravity",i[11]),r&8192&&bt(e,"reduced-motion",i[13])},d(i){i&&M(e),ft(o,i)}}}function fu(t){let e;return{c(){e=P("div"),$(e,"class","confetti svelte-15ksp55"),tt(e,"--fall-distance",t[8]),tt(e,"--size",t[0]+"px"),tt(e,"--color",t[15]()),tt(e,"--skew",gt(-45,45)+"deg,"+gt(-45,45)+"deg"),tt(e,"--rotation-xyz",gt(-10,10)+", "+gt(-10,10)+", "+gt(-10,10)),tt(e,"--rotation-deg",gt(0,360)+"deg"),tt(e,"--translate-y-multiplier",gt(t[2][0],t[2][1])),tt(e,"--translate-x-multiplier",gt(t[1][0],t[1][1])),tt(e,"--scale",.1*gt(2,10)),tt(e,"--transition-duration",t[4]?`calc(${t[3]}ms * var(--scale))`:`${t[3]}ms`),tt(e,"--transition-delay",gt(t[5][0],t[5][1])+"ms"),tt(e,"--transition-iteration-count",t[4]?"infinite":t[7]),tt(e,"--x-spread",1-t[12])},m(n,o){O(n,e,o)},p(n,o){o&256&&tt(e,"--fall-distance",n[8]),o&1&&tt(e,"--size",n[0]+"px"),o&4&&tt(e,"--translate-y-multiplier",gt(n[2][0],n[2][1])),o&2&&tt(e,"--translate-x-multiplier",gt(n[1][0],n[1][1])),o&24&&tt(e,"--transition-duration",n[4]?`calc(${n[3]}ms * var(--scale))`:`${n[3]}ms`),o&32&&tt(e,"--transition-delay",gt(n[5][0],n[5][1])+"ms"),o&144&&tt(e,"--transition-iteration-count",n[4]?"infinite":n[7]),o&4096&&tt(e,"--x-spread",1-n[12])},d(n){n&&M(e)}}}function T3(t){let e,n=!t[14]&&uu(t);return{c(){n&&n.c(),e=Fe()},m(o,i){n&&n.m(o,i),O(o,e,i)},p(o,[i]){o[14]?n&&(n.d(1),n=null):n?n.p(o,i):(n=uu(o),n.c(),n.m(e.parentNode,e))},i:Ce,o:Ce,d(o){o&&M(e),n&&n.d(o)}}}function gt(t,e){return Math.random()*(e-t)+t}function S3(t,e,n){let{size:o=10}=e,{x:i=[-.5,.5]}=e,{y:r=[.25,1]}=e,{duration:l=2e3}=e,{infinite:a=!1}=e,{delay:s=[0,50]}=e,{colorRange:u=[0,360]}=e,{colorArray:f=[]}=e,{amount:c=50}=e,{iterationCount:d=1}=e,{fallDistance:m="100px"}=e,{rounded:h=!1}=e,{cone:g=!1}=e,{noGravity:p=!1}=e,{xSpread:w=.15}=e,{destroyOnComplete:v=!0}=e,{disableForReducedMotion:A=!1}=e,R=!1;Zo(()=>{!v||a||d=="infinite"||setTimeout(()=>n(14,R=!0),(l+s[1])*d)});function q(){return f.length?f[Math.round(Math.random()*(f.length-1))]:`hsl(${Math.round(gt(u[0],u[1]))}, 75%, 50%)`}return t.$$set=F=>{"size"in F&&n(0,o=F.size),"x"in F&&n(1,i=F.x),"y"in F&&n(2,r=F.y),"duration"in F&&n(3,l=F.duration),"infinite"in F&&n(4,a=F.infinite),"delay"in F&&n(5,s=F.delay),"colorRange"in F&&n(16,u=F.colorRange),"colorArray"in F&&n(17,f=F.colorArray),"amount"in F&&n(6,c=F.amount),"iterationCount"in F&&n(7,d=F.iterationCount),"fallDistance"in F&&n(8,m=F.fallDistance),"rounded"in F&&n(9,h=F.rounded),"cone"in F&&n(10,g=F.cone),"noGravity"in F&&n(11,p=F.noGravity),"xSpread"in F&&n(12,w=F.xSpread),"destroyOnComplete"in F&&n(18,v=F.destroyOnComplete),"disableForReducedMotion"in F&&n(13,A=F.disableForReducedMotion)},[o,i,r,l,a,s,c,d,m,h,g,p,w,A,R,q,u,f,v]}class hn extends pe{constructor(e){super(),me(this,e,S3,T3,de,{size:0,x:1,y:2,duration:3,infinite:4,delay:5,colorRange:16,colorArray:17,amount:6,iterationCount:7,fallDistance:8,rounded:9,cone:10,noGravity:11,xSpread:12,destroyOnComplete:18,disableForReducedMotion:13})}}function cu(t){let e,n,o,i,r,l,a,s;return e=new hn({props:{cone:!0,x:[-.5,.5]}}),o=new hn({props:{cone:!0,amount:10,x:[-1,-.4],y:[.25,.75],rounded:!0,size:15}}),r=new hn({props:{cone:!0,amount:10,x:[.4,1],y:[.25,.75]}}),a=new hn({props:{infinite:!0,amount:75,delay:[0,200]}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment),i=B(),Y(r.$$.fragment),l=B(),Y(a.$$.fragment)},m(u,f){V(e,u,f),O(u,n,f),V(o,u,f),O(u,i,f),V(r,u,f),O(u,l,f),V(a,u,f),s=!0},i(u){s||(k(e.$$.fragment,u),k(o.$$.fragment,u),k(r.$$.fragment,u),k(a.$$.fragment,u),s=!0)},o(u){S(e.$$.fragment,u),S(o.$$.fragment,u),S(r.$$.fragment,u),S(a.$$.fragment,u),s=!1},d(u){u&&(M(n),M(i),M(l)),x(e,u),x(o,u),x(r,u),x(a,u)}}}function A3(t){let e,n,o,i=t[1].isComplete(t[2])||t[3]&&t[2].currentTutorialStep==t[0]?"✅":"⬜️",r,l,a,s=t[1].message+"",u,f,c,d=t[3]&&t[2].currentTutorialStep==t[0]&&cu();return{c(){e=P("div"),d&&d.c(),n=B(),o=P("span"),r=G(i),l=B(),a=P("span"),u=G(s),$(o,"class","flex flex-row gap-1"),$(e,"class",f="text-sm flex flex-row justify-start align-middle pb-2 mb-2 transition-all duration-300 noselect "+(t[2].currentTutorialStep==t[0]?"opacity-100":"opacity-50"))},m(m,h){O(m,e,h),d&&d.m(e,null),y(e,n),y(e,o),y(o,r),y(o,l),y(o,a),y(a,u),c=!0},p(m,[h]){m[3]&&m[2].currentTutorialStep==m[0]?d?h&13&&k(d,1):(d=cu(),d.c(),k(d,1),d.m(e,n)):d&&(Ie(),S(d,1,1,()=>{d=null}),Me()),(!c||h&15)&&i!==(i=m[1].isComplete(m[2])||m[3]&&m[2].currentTutorialStep==m[0]?"✅":"⬜️")&&ae(r,i),(!c||h&2)&&s!==(s=m[1].message+"")&&ae(u,s),(!c||h&5&&f!==(f="text-sm flex flex-row justify-start align-middle pb-2 mb-2 transition-all duration-300 noselect "+(m[2].currentTutorialStep==m[0]?"opacity-100":"opacity-50")))&&$(e,"class",f)},i(m){c||(k(d),c=!0)},o(m){S(d),c=!1},d(m){m&&M(e),d&&d.d()}}}function I3(t,e,n){let o,i;le(t,$e,a=>n(2,o=a)),le(t,Bo,a=>n(3,i=a));let{index:r}=e,{step:l}=e;return t.$$set=a=>{"index"in a&&n(0,r=a.index),"step"in a&&n(1,l=a.step)},[r,l,o,i]}class sd extends pe{constructor(e){super(),me(this,e,I3,A3,de,{index:0,step:1})}}function du(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function mu(t,e,n){const o=t.slice();return o[16]=e[n].icon,o[17]=e[n].name,o[18]=e[n].value,o[19]=e[n].rate,o}function pu(t,e,n){const o=t.slice();return o[22]=e[n],o}function hu(t,e,n){const o=t.slice();return o[17]=e[n].name,o[18]=e[n].value,o[25]=e[n].modifier,o[26]=e[n].color,o[27]=e[n].hover,o[28]=e[n].description,o[29]=e[n].max,o}function M3(t){let e,n=t[17]+"",o,i,r,l;return r=new C3({props:{value:t[18],max:t[29]??300,class:"min-w-[80px] max-w-[80px] ",color:t[26],text:`${st(t[18],0)} / ${st(t[29],0)}`}}),{c(){e=P("span"),o=G(n),i=B(),Y(r.$$.fragment),$(e,"class","text-md pr-2")},m(a,s){O(a,e,s),y(e,o),O(a,i,s),V(r,a,s),l=!0},p(a,s){(!l||s[0]&32)&&n!==(n=a[17]+"")&&ae(o,n);const u={};s[0]&32&&(u.value=a[18]),s[0]&32&&(u.max=a[29]??300),s[0]&32&&(u.color=a[26]),s[0]&32&&(u.text=`${st(a[18],0)} / ${st(a[29],0)}`),r.$set(u)},i(a){l||(k(r.$$.fragment,a),l=!0)},o(a){S(r.$$.fragment,a),l=!1},d(a){a&&(M(e),M(i)),x(r,a)}}}function _u(t){let e,n;return e=new wo({props:{class:"rounded-2xl text-white "+(t[26]??t[9](t[18])),$$slots:{default:[O3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&32&&(r.class="rounded-2xl text-white "+(o[26]??o[9](o[18]))),i[0]&32|i[1]&2&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function O3(t){let e,n,o=t[17]+"",i,r,l=tn(t[18],!1)+"",a,s,u=t[29]?`out of ${t[29]}`:"",f,c,d,m,h,g=t[28]+"",p;return d=new It({props:{class:"mb-2 mt-1"}}),{c(){e=P("div"),n=P("span"),i=G(o),r=G(": "),a=G(l),s=B(),f=G(u),c=B(),Y(d.$$.fragment),m=B(),h=P("span"),$(n,"class","text-md"),$(e,"class","flex flex-col justify-between max-w-48")},m(w,v){O(w,e,v),y(e,n),y(n,i),y(n,r),y(n,a),y(n,s),y(n,f),y(e,c),V(d,e,null),y(e,m),y(e,h),h.innerHTML=g,p=!0},p(w,v){(!p||v[0]&32)&&o!==(o=w[17]+"")&&ae(i,o),(!p||v[0]&32)&&l!==(l=tn(w[18],!1)+"")&&ae(a,l),(!p||v[0]&32)&&u!==(u=w[29]?`out of ${w[29]}`:"")&&ae(f,u),(!p||v[0]&32)&&g!==(g=w[28]+"")&&(h.innerHTML=g)},i(w){p||(k(d.$$.fragment,w),p=!0)},o(w){S(d.$$.fragment,w),p=!1},d(w){w&&M(e),x(d)}}}function P3(t){let e,n,o,i;e=new Co({props:{class:"w-full flex flex-row align-middle justify-between text-sm filter hover:brightness-110",$$slots:{default:[M3]},$$scope:{ctx:t}}});let r=t[27]&&_u(t);return{c(){Y(e.$$.fragment),n=B(),r&&r.c(),o=Fe()},m(l,a){V(e,l,a),O(l,n,a),r&&r.m(l,a),O(l,o,a),i=!0},p(l,a){const s={};a[0]&32|a[1]&2&&(s.$$scope={dirty:a,ctx:l}),e.$set(s),l[27]?r?(r.p(l,a),a[0]&32&&k(r,1)):(r=_u(l),r.c(),k(r,1),r.m(o.parentNode,o)):r&&(Ie(),S(r,1,1,()=>{r=null}),Me())},i(l){i||(k(e.$$.fragment,l),k(r),i=!0)},o(l){S(e.$$.fragment,l),S(r),i=!1},d(l){l&&(M(n),M(o)),x(e,l),r&&r.d(l)}}}function gu(t){let e,n,o,i;return n=new ko({props:{openDelay:200,closeDelay:0,$$slots:{default:[P3]},$$scope:{ctx:t}}}),{c(){e=P("div"),Y(n.$$.fragment),o=B(),$(e,"class","flex flex-col gap-1")},m(r,l){O(r,e,l),V(n,e,null),y(e,o),i=!0},p(r,l){const a={};l[0]&32|l[1]&2&&(a.$$scope={dirty:l,ctx:r}),n.$set(a)},i(r){i||(k(n.$$.fragment,r),i=!0)},o(r){S(n.$$.fragment,r),i=!1},d(r){r&&M(e),x(n)}}}function N3(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h,g,p,w,v,A,R,q,F=t[1].gameSettings.includes("bagOfHolding")?"There is no resource cap in this game mode! (Bag of Holding)":"",E;return{c(){e=P("div"),n=G(`ℹ️ Resources are generated from plots. Generation rate can be
            increased by raising the productivity of the town, at the cost of
            some happiness.
            `),o=P("br"),i=B(),r=P("br"),l=G(`
            There is also a slight bit of randomness as townspeople aren't robots.
            `),a=P("br"),s=B(),u=P("br"),f=B(),c=P("span"),c.textContent="Stockpile plots",d=G(` increase the maximum
            amount of resources you can store.
            `),m=P("br"),h=B(),g=P("br"),p=G(`
            If the cap is 500, then you can store 500 of each resource before the
            cap is reached.
            `),w=P("br"),v=G(`
            Capacity is increased by 2,000 per Stockpile plot.
            `),A=P("br"),R=B(),q=P("span"),E=G(F),$(c,"class","font-bold"),$(q,"class","text-red-800 font-bold"),$(e,"class","text-sm")},m(I,N){O(I,e,N),y(e,n),y(e,o),y(e,i),y(e,r),y(e,l),y(e,a),y(e,s),y(e,u),y(e,f),y(e,c),y(e,d),y(e,m),y(e,h),y(e,g),y(e,p),y(e,w),y(e,v),y(e,A),y(e,R),y(e,q),y(q,E)},p(I,N){N[0]&2&&F!==(F=I[1].gameSettings.includes("bagOfHolding")?"There is no resource cap in this game mode! (Bag of Holding)":"")&&ae(E,F)},d(I){I&&M(e)}}}function E3(t){let e,n,o,i=t[1].gameSettings.includes("bagOfHolding")?"No resource cap":`Capacity: ${tn(t[1].resource_capacity,!1)}`,r,l,a,s,u;return s=new wo({props:{class:"text-sm max-h-[200px] overflow-y-scroll",$$slots:{default:[N3]},$$scope:{ctx:t}}}),{c(){e=P("h1"),n=G(`Resources

          `),o=P("div"),r=G(i),a=B(),Y(s.$$.fragment),$(o,"class",l="text-xs w-full text-center mb-2 cursor-pointer "+(t[2]==!0?"text-textDanger animate-pulse font-bold":"")+" "+(t[1].gameSettings.includes("bagOfHolding")?"opacity-30":"")),$(e,"class","text-lg w-full text-center pb-2")},m(f,c){O(f,e,c),y(e,n),y(e,o),y(o,r),O(f,a,c),V(s,f,c),u=!0},p(f,c){(!u||c[0]&2)&&i!==(i=f[1].gameSettings.includes("bagOfHolding")?"No resource cap":`Capacity: ${tn(f[1].resource_capacity,!1)}`)&&ae(r,i),(!u||c[0]&6&&l!==(l="text-xs w-full text-center mb-2 cursor-pointer "+(f[2]==!0?"text-textDanger animate-pulse font-bold":"")+" "+(f[1].gameSettings.includes("bagOfHolding")?"opacity-30":"")))&&$(o,"class",l);const d={};c[0]&2|c[1]&2&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){u||(k(s.$$.fragment,f),u=!0)},o(f){S(s.$$.fragment,f),u=!1},d(f){f&&(M(e),M(a)),x(s,f)}}}function $3(t){let e,n;return e=new Co({props:{$$slots:{default:[E3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&6|i[1]&2&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function R3(t){let e,n,o=t[19]+"",i;return{c(){e=P("span"),n=G("+"),i=G(o),$(e,"class","")},m(r,l){O(r,e,l),y(e,n),y(e,i)},p(r,l){l[0]&16&&o!==(o=r[19]+"")&&ae(i,o)},d(r){r&&M(e)}}}function L3(t){let e;return{c(){e=P("span")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function D3(t){let e,n=t[19]+"",o;return{c(){e=P("span"),o=G(n),$(e,"class","text-textDanger")},m(i,r){O(i,e,r),y(e,o)},p(i,r){r[0]&16&&n!==(n=i[19]+"")&&ae(o,n)},d(i){i&&M(e)}}}function F3(t){let e,n,o=t[19]+"",i;return{c(){e=P("span"),n=G("+"),i=G(o),$(e,"class","text-textHappy")},m(r,l){O(r,e,l),y(e,n),y(e,i)},p(r,l){l[0]&16&&o!==(o=r[19]+"")&&ae(i,o)},d(r){r&&M(e)}}}function j3(t){let e;return{c(){e=P("span"),e.textContent="⚠️ CAP",$(e,"class","text-textDanger")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function q3(t){let e;return{c(){e=P("span"),$(e,"class","display-none")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function B3(t){let e,n,o=t[19]+"",i,r;return{c(){e=P("span"),n=G("+"),i=G(o),r=G(" (weekly)"),$(e,"class","text-gray-600")},m(l,a){O(l,e,a),y(e,n),y(e,i),y(e,r)},p(l,a){a[0]&16&&o!==(o=l[19]+"")&&ae(i,o)},d(l){l&&M(e)}}}function H3(t){let e,n=t[19]+"",o,i;return{c(){e=P("span"),o=G(n),i=G(" (weekly)"),$(e,"class","text-textDanger")},m(r,l){O(r,e,l),y(e,o),y(e,i)},p(r,l){l[0]&16&&n!==(n=r[19]+"")&&ae(o,n)},d(r){r&&M(e)}}}function G3(t){let e,n,o=t[19]+"",i,r;return{c(){e=P("span"),n=G("+"),i=G(o),r=G(" (weekly)"),$(e,"class","text-textHappy")},m(l,a){O(l,e,a),y(e,n),y(e,i),y(e,r)},p(l,a){a[0]&16&&o!==(o=l[19]+"")&&ae(i,o)},d(l){l&&M(e)}}}function bu(t){let e,n,o,i,r,l;e=new It({props:{class:"bg-gray-400"}});let a=Ke(t[8](t[17])),s=[];for(let u=0;u<a.length;u+=1)s[u]=yu(pu(t,a,u));return{c(){Y(e.$$.fragment),n=B(),o=P("span"),o.textContent="Required for",i=B(),r=P("div");for(let u=0;u<s.length;u+=1)s[u].c();$(o,"class","text-sm font-semibold"),$(r,"class","grid grid-cols-3 justify-between")},m(u,f){V(e,u,f),O(u,n,f),O(u,o,f),O(u,i,f),O(u,r,f);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,null);l=!0},p(u,f){if(f[0]&272){a=Ke(u[8](u[17]));let c;for(c=0;c<a.length;c+=1){const d=pu(u,a,c);s[c]?s[c].p(d,f):(s[c]=yu(d),s[c].c(),s[c].m(r,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},i(u){l||(k(e.$$.fragment,u),l=!0)},o(u){S(e.$$.fragment,u),l=!1},d(u){u&&(M(n),M(o),M(i),M(r)),x(e,u),ft(s,u)}}}function yu(t){let e,n=t[22]+"",o;return{c(){e=P("span"),o=G(n),$(e,"class","text-xs pr-3")},m(i,r){O(i,e,r),y(e,o)},p(i,r){r[0]&16&&n!==(n=i[22]+"")&&ae(o,n)},d(i){i&&M(e)}}}function W3(t){let e,n,o,i=t[16]+"",r,l,a=no(t[17])+"",s,u,f,c=t[8](t[17]).length>0,d;function m(w,v){return w[19]>0?G3:w[19]<0?H3:w[19]!=null?B3:q3}let h=m(t),g=h(t),p=c&&bu(t);return{c(){e=P("div"),n=P("div"),o=P("span"),r=G(i),l=B(),s=G(a),u=B(),g.c(),f=B(),p&&p.c(),$(o,"class","text-md font-bold"),$(e,"class","flex flex-col gap-2 whitespace-nowrap min-w-fit rounded-lg text-black")},m(w,v){O(w,e,v),y(e,n),y(n,o),y(o,r),y(o,l),y(o,s),y(n,u),g.m(n,null),y(e,f),p&&p.m(e,null),d=!0},p(w,v){(!d||v[0]&16)&&i!==(i=w[16]+"")&&ae(r,i),(!d||v[0]&16)&&a!==(a=no(w[17])+"")&&ae(s,a),h===(h=m(w))&&g?g.p(w,v):(g.d(1),g=h(w),g&&(g.c(),g.m(n,null))),v[0]&16&&(c=w[8](w[17]).length>0),c?p?(p.p(w,v),v[0]&16&&k(p,1)):(p=bu(w),p.c(),k(p,1),p.m(e,null)):p&&(Ie(),S(p,1,1,()=>{p=null}),Me())},i(w){d||(k(p),d=!0)},o(w){S(p),d=!1},d(w){w&&M(e),g.d(),p&&p.d()}}}function V3(t){let e,n=t[16]+"",o,i,r=tn(parseInt(t[18]),!1)+"",l,a,s,u,f,c;function d(g,p){return g[18]>=g[1].resource_capacity&&g[17]!="gold"?j3:g[19]>0?F3:g[19]<0?D3:g[19]==null?L3:R3}let m=d(t),h=m(t);return f=new wo({props:{$$slots:{default:[W3]},$$scope:{ctx:t}}}),{c(){e=P("span"),o=G(n),i=B(),l=G(r),a=B(),h.c(),u=B(),Y(f.$$.fragment),$(e,"class",s="flex flex-row justify-between text-sm "+(t[18]<=0?"text-textDanger font-semibold":""))},m(g,p){O(g,e,p),y(e,o),y(e,i),y(e,l),y(e,a),h.m(e,null),O(g,u,p),V(f,g,p),c=!0},p(g,p){(!c||p[0]&16)&&n!==(n=g[16]+"")&&ae(o,n),(!c||p[0]&16)&&r!==(r=tn(parseInt(g[18]),!1)+"")&&ae(l,r),m===(m=d(g))&&h?h.p(g,p):(h.d(1),h=m(g),h&&(h.c(),h.m(e,null))),(!c||p[0]&16&&s!==(s="flex flex-row justify-between text-sm "+(g[18]<=0?"text-textDanger font-semibold":"")))&&$(e,"class",s);const w={};p[0]&16|p[1]&2&&(w.$$scope={dirty:p,ctx:g}),f.$set(w)},i(g){c||(k(f.$$.fragment,g),c=!0)},o(g){S(f.$$.fragment,g),c=!1},d(g){g&&(M(e),M(u)),h.d(),x(f,g)}}}function x3(t){let e,n,o;return e=new Co({props:{$$slots:{default:[V3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B()},m(i,r){V(e,i,r),O(i,n,r),o=!0},p(i,r){const l={};r[0]&18|r[1]&2&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){o||(k(e.$$.fragment,i),o=!0)},o(i){S(e.$$.fragment,i),o=!1},d(i){i&&M(n),x(e,i)}}}function vu(t){let e,n;return e=new ko({props:{openDelay:200,closeDelay:0,$$slots:{default:[x3]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i[0]&18|i[1]&2&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Y3(t){let e;return{c(){e=P("br")},m(n,o){O(n,e,o)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}function U3(t){let e,n,o,i,r,l,a,s,u,f,c=t[7]&&wu(),d=t[1].currentTutorialStep>0&&ku(t),m=Ke(Ho),h=[];for(let p=0;p<m.length;p+=1)h[p]=Tu(du(t,m,p));const g=p=>S(h[p],1,1,()=>{h[p]=null});return{c(){e=P("div"),n=P("div"),c&&c.c(),o=B(),i=P("h1"),i.textContent="Milestones",r=B(),d&&d.c(),l=B(),a=P("div");for(let p=0;p<h.length;p+=1)h[p].c();$(i,"class","text-lg w-full text-center"),$(n,"class","text-lg w-full text-center noselect flex flex-col no-select"),$(a,"class","scroll overflow-y-scroll")},m(p,w){O(p,e,w),y(e,n),c&&c.m(n,null),y(n,o),y(n,i),y(n,r),d&&d.m(n,null),y(e,l),y(e,a);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(a,null);s=!0,u||(f=te(n,"click",t[10]),u=!0)},p(p,w){if(p[7]?c?w[0]&128&&k(c,1):(c=wu(),c.c(),k(c,1),c.m(n,o)):c&&(Ie(),S(c,1,1,()=>{c=null}),Me()),p[1].currentTutorialStep>0?d?d.p(p,w):(d=ku(p),d.c(),d.m(n,null)):d&&(d.d(1),d=null),w[0]&10){m=Ke(Ho);let v;for(v=0;v<m.length;v+=1){const A=du(p,m,v);h[v]?(h[v].p(A,w),k(h[v],1)):(h[v]=Tu(A),h[v].c(),k(h[v],1),h[v].m(a,null))}for(Ie(),v=m.length;v<h.length;v+=1)g(v);Me()}},i(p){if(!s){k(c);for(let w=0;w<m.length;w+=1)k(h[w]);s=!0}},o(p){S(c),h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)S(h[w]);s=!1},d(p){p&&M(e),c&&c.d(),d&&d.d(),ft(h,p),u=!1,f()}}}function wu(t){let e,n,o,i,r,l,a,s;return e=new hn({props:{cone:!0,x:[-.5,.5]}}),o=new hn({props:{cone:!0,amount:10,x:[-1,-.4],y:[.25,.75],rounded:!0,size:15}}),r=new hn({props:{cone:!0,amount:10,x:[.4,1],y:[.25,.75]}}),a=new hn({props:{infinite:!0,amount:75,delay:[0,200]}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment),i=B(),Y(r.$$.fragment),l=B(),Y(a.$$.fragment)},m(u,f){V(e,u,f),O(u,n,f),V(o,u,f),O(u,i,f),V(r,u,f),O(u,l,f),V(a,u,f),s=!0},i(u){s||(k(e.$$.fragment,u),k(o.$$.fragment,u),k(r.$$.fragment,u),k(a.$$.fragment,u),s=!0)},o(u){S(e.$$.fragment,u),S(o.$$.fragment,u),S(r.$$.fragment,u),S(a.$$.fragment,u),s=!1},d(u){u&&(M(n),M(i),M(l)),x(e,u),x(o,u),x(r,u),x(a,u)}}}function ku(t){let e,n=t[3]?`Hide ${t[1].currentTutorialStep} completed`:`Show ${t[1].currentTutorialStep} completed`,o;return{c(){e=P("span"),o=G(n),$(e,"class","text-xs opacity-65 cursor-pointer pb-2")},m(i,r){O(i,e,r),y(e,o)},p(i,r){r[0]&10&&n!==(n=i[3]?`Hide ${i[1].currentTutorialStep} completed`:`Show ${i[1].currentTutorialStep} completed`)&&ae(o,n)},d(i){i&&M(e)}}}function K3(t){let e,n;return e=new sd({props:{index:t[15],step:t[13]}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p:Ce,i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function X3(t){let e,n,o=t[3]&&Cu(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,r){i[3]?o?r[0]&8&&k(o,1):(o=Cu(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}function Cu(t){let e,n;return e=new sd({props:{index:t[15],step:t[13]}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function Tu(t){let e,n,o,i;const r=[X3,K3],l=[];function a(s,u){return s[1].currentTutorialStep>s[15]?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,u){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function J3(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h,g,p,w,v,A=Ke(t[5]),R=[];for(let b=0;b<A.length;b+=1)R[b]=gu(hu(t,A,b));const q=b=>S(R[b],1,1,()=>{R[b]=null});s=new ko({props:{openDelay:200,closeDelay:0,$$slots:{default:[$3]},$$scope:{ctx:t}}});let F=Ke(t[4]),E=[];for(let b=0;b<F.length;b+=1)E[b]=vu(mu(t,F,b));const I=b=>S(E[b],1,1,()=>{E[b]=null}),N=[U3,Y3],j=[];function C(b,T){return b[0]?1:0}return g=C(t),p=j[g]=N[g](t),{c(){e=P("div"),n=P("div"),o=P("div"),i=P("h1"),i.textContent="Stats",r=B();for(let b=0;b<R.length;b+=1)R[b].c();l=B(),a=P("div"),Y(s.$$.fragment),u=B(),f=P("div"),c=B(),d=P("div"),m=P("div");for(let b=0;b<E.length;b+=1)E[b].c();h=B(),p.c(),$(i,"class","text-lg w-full text-center pb-1"),$(o,"class","flex flex-col rounded-xl gap-2 w-full"),$(n,"class","flex flex-row w-full pb-6"),$(a,"class","flex flex-row justify-center"),$(f,"class","w-[full] flex flex-row justify-center"),$(m,"class","flex flex-col text-md text-nowrap gap-2"),$(d,"class","flex flex-col gap-8 h-full"),$(e,"class",w="bg-sidebarBackground text-sidebarText border-foreground border-4 "+(t[6].visible&&!t[0]?"opacity-0":"")+" z-10 rounded-xl px-2 pt-2 transition-all duration-300 overflow-y-scroll scroll "+(t[0]?"min-w-56":"fixed right-3 top-[190px] sidebar w-[220px] bottom-4"))},m(b,T){O(b,e,T),y(e,n),y(n,o),y(o,i),y(o,r);for(let D=0;D<R.length;D+=1)R[D]&&R[D].m(o,null);y(e,l),y(e,a),V(s,a,null),y(e,u),y(e,f),y(e,c),y(e,d),y(d,m);for(let D=0;D<E.length;D+=1)E[D]&&E[D].m(m,null);y(d,h),j[g].m(d,null),v=!0},p(b,T){if(T[0]&544){A=Ke(b[5]);let L;for(L=0;L<A.length;L+=1){const U=hu(b,A,L);R[L]?(R[L].p(U,T),k(R[L],1)):(R[L]=gu(U),R[L].c(),k(R[L],1),R[L].m(o,null))}for(Ie(),L=A.length;L<R.length;L+=1)q(L);Me()}const D={};if(T[0]&6|T[1]&2&&(D.$$scope={dirty:T,ctx:b}),s.$set(D),T[0]&274){F=Ke(b[4]);let L;for(L=0;L<F.length;L+=1){const U=mu(b,F,L);E[L]?(E[L].p(U,T),k(E[L],1)):(E[L]=vu(U),E[L].c(),k(E[L],1),E[L].m(m,null))}for(Ie(),L=F.length;L<E.length;L+=1)I(L);Me()}let W=g;g=C(b),g===W?j[g].p(b,T):(Ie(),S(j[W],1,1,()=>{j[W]=null}),Me(),p=j[g],p?p.p(b,T):(p=j[g]=N[g](b),p.c()),k(p,1),p.m(d,null)),(!v||T[0]&65&&w!==(w="bg-sidebarBackground text-sidebarText border-foreground border-4 "+(b[6].visible&&!b[0]?"opacity-0":"")+" z-10 rounded-xl px-2 pt-2 transition-all duration-300 overflow-y-scroll scroll "+(b[0]?"min-w-56":"fixed right-3 top-[190px] sidebar w-[220px] bottom-4")))&&$(e,"class",w)},i(b){if(!v){for(let T=0;T<A.length;T+=1)k(R[T]);k(s.$$.fragment,b);for(let T=0;T<F.length;T+=1)k(E[T]);k(p),v=!0}},o(b){R=R.filter(Boolean);for(let T=0;T<R.length;T+=1)S(R[T]);S(s.$$.fragment,b),E=E.filter(Boolean);for(let T=0;T<E.length;T+=1)S(E[T]);S(p),v=!1},d(b){b&&M(e),ft(R,b),x(s),ft(E,b),j[g].d()}}}function Z3(t){return["food","wood","stone","metal","power","knowledge"].includes(t)}function Su(t){let e=0;for(let n=0;n<t.plots.length;n++)for(let o=0;o<t.plots[n].length;o++)t.plots[n][o].active==!0&&t.plots[n][o].type>-1&&e++;return e}function Q3(t,e,n){let o,i,r;le(t,$e,p=>n(1,o=p)),le(t,Qe,p=>n(6,i=p)),le(t,Bo,p=>n(7,r=p));let l=!1,a=!1,{mini:s=!1}=e,u=[];function f(p){let w=[];for(let v=0;v<ie.length;v++)(p!="knowledge"&&ie[v].requirements.resources[p]>0||p=="power"&&ie[v].active_costs.power>0||p=="knowledge"&&ie[v].requirements.knowledge>0)&&w.push(ie[v].title);return w}function c(p){return Z3(p)?f(p):[]}let d;const m=p=>p===1?"bg-green-500":p>.9?"bg-yellow-500":"bg-red-500",h=p=>p>149?"bg-green-500":p>99?"bg-yellow-500":"bg-red-500",g=()=>{n(3,a=!a)};return t.$$set=p=>{"mini"in p&&n(0,s=p.mini)},t.$$.update=()=>{t.$$.dirty[0]&2&&n(2,l=o.resources.food>=o.resource_capacity||o.resources.wood>=o.resource_capacity||o.resources.stone>=o.resource_capacity||o.resources.metal>=o.resource_capacity),t.$$.dirty[0]&2&&n(4,u=[{icon:"💰",name:"gold",value:o.townInfo.gold,rate:o.economyAndLaws.weeklyProfit},{icon:"🥕",name:"food",value:o.resources.food,rate:o.resource_rate.food},{icon:"🪵",name:"wood",value:o.resources.wood,rate:o.resource_rate.wood},{icon:"🪨",name:"stone",value:o.resources.stone,rate:o.resource_rate.stone},{icon:"🧠",name:"knowledge",value:o.townInfo.knowledge_points,rate:o.resource_rate.knowledge},{icon:"🧲",name:"metal",value:o.resources.metal,rate:o.resource_rate.metal},{icon:"🔋",name:"power",value:o.resources.power,rate:null},{icon:"🧑‍⚖️",name:"bureaucracy",value:o.resources.bureaucracy,rate:o.resource_rate.bureaucracy}]),t.$$.dirty[0]&2&&n(5,d=[{name:"Happiness",description:"Happy townspeople spend more money and are less likely to leave.",value:o.townInfo.happiness,modifier:o.modifiers.happiness,color:h(o.townInfo.happiness),hover:!0,max:300},{name:"Health",description:"Healthy townspeople are less likely to die (and leave the town obviously).",value:o.townInfo.health,modifier:o.modifiers.health,color:h(o.townInfo.health),hover:!0,max:300},{name:"Community",description:"Townspeople that feel at home are less likely to leave, and less likely to get bored.",value:o.townInfo.community,modifier:o.modifiers.community,color:h(o.townInfo.community),hover:!0,max:300},{name:"Employment",description:"The number of people employed in your town. Unemployed people are more likely to leave.",value:o.townInfo.employees,modifier:null,color:m(o.townInfo.employees/o.townInfo.population_count),hover:!0,max:o.townInfo.population_count},{name:"🛝 Recreation",description:"Tracker for how many plots you have for recreation, which keeps townspeople happy. <br/><br/>Make sure as your town grows that you build enough 🛝 plots. ",value:o.townInfo.recreation,modifier:null,color:o.townInfo.recreation/Su(o)>=.2?"bg-green-500":"bg-orange-300",hover:!0,max:Su(o)}])},[s,o,l,a,u,d,i,r,c,h,g]}class ad extends pe{constructor(e){super(),me(this,e,Q3,J3,de,{mini:0},null,[-1,-1])}}function Au(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Iu(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Mu(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Ou(t){let e,n,o,i=ie[ke(t[0].id)].title+"",r,l,a,s=ie[ke(t[0].id)].description+"",u,f,c,d,m,h,g,p,w,v=t[3]("💰",ie[ke(t[0].id)].requirements.gold,t[2].townInfo.gold)+"",A,R,q=t[3]("🥕",ie[ke(t[0].id)].requirements.resources.food,t[2].resources.food)+"",F,E,I=t[3]("🧠",ie[ke(t[0].id)].requirements.knowledge,t[2].townInfo.knowledge_points)+"",N,j,C=t[3]("🪵",ie[ke(t[0].id)].requirements.resources.wood,t[2].resources.wood)+"",b,T,D=t[3]("🪨",ie[ke(t[0].id)].requirements.resources.stone,t[2].resources.stone)+"",W,L,U=t[3]("🧲",ie[ke(t[0].id)].requirements.resources.metal,t[2].resources.metal)+"",X,Q,z=t[3]("🔋",ie[ke(t[0].id)].active_costs.power,t[2].resources.power)+"",ne,oe,Ae=t[3]("🧑‍⚖️",ie[ke(t[0].id)].requirements.resources.bureaucracy,t[2].resources.bureaucracy)+"",ce,ee=ie[ke(t[0].id)].requirements.employees!=0,Pe,Ne=ie[ke(t[0].id)].revenue_per_week!=0,_,K=Object.values(ie[ke(t[0].id)].active_costs).some(Wu),J,se=Object.values(ie[ke(t[0].id)].requirements.plots).length>0,we,Oe=Object.values(ie[ke(t[0].id)].generated_resources).some(Gu)||ie[ke(t[0].id)].knowledge_points_per_month>0,De;d=new It({props:{class:"bg-accent opacity-25 mt-1 mb-1"}});let qe=ee&&Pu(t),He=Ne&&Nu(t),Be=K&&Eu(t),Je=se&&Lu(t),Ue=Oe&&ju(t);return{c(){e=P("div"),n=P("div"),o=P("span"),r=G(i),l=B(),a=P("span"),u=G(s),f=B(),c=P("div"),Y(d.$$.fragment),m=B(),h=P("span"),h.textContent="Requirements",g=B(),p=P("div"),w=new Qt(!1),A=B(),R=new Qt(!1),F=B(),E=new Qt(!1),N=B(),j=new Qt(!1),b=B(),T=new Qt(!1),W=B(),L=new Qt(!1),X=B(),Q=new Qt(!1),ne=B(),oe=new Qt(!1),ce=B(),qe&&qe.c(),Pe=B(),He&&He.c(),_=B(),Be&&Be.c(),J=B(),Je&&Je.c(),we=B(),Ue&&Ue.c(),$(o,"class","text-md"),$(a,"class","text-xs"),$(n,"class","flex flex-col gap-2"),$(h,"class","font-semibold"),w.a=A,R.a=F,E.a=N,j.a=b,T.a=W,L.a=X,Q.a=ne,oe.a=ce,$(p,"class","flex flex-row gap-1 flex-wrap"),$(c,"class","flex flex-col w-36 h-min gap-0 text-xs pb-2"),$(e,"class","p-2 max-w-64")},m(Se,Ee){O(Se,e,Ee),y(e,n),y(n,o),y(o,r),y(n,l),y(n,a),y(a,u),y(e,f),y(e,c),V(d,c,null),y(c,m),y(c,h),y(c,g),y(c,p),w.m(v,p),y(p,A),R.m(q,p),y(p,F),E.m(I,p),y(p,N),j.m(C,p),y(p,b),T.m(D,p),y(p,W),L.m(U,p),y(p,X),Q.m(z,p),y(p,ne),oe.m(Ae,p),y(p,ce),qe&&qe.m(p,null),y(e,Pe),He&&He.m(e,null),y(e,_),Be&&Be.m(e,null),y(e,J),Je&&Je.m(e,null),y(e,we),Ue&&Ue.m(e,null),De=!0},p(Se,Ee){(!De||Ee&1)&&i!==(i=ie[ke(Se[0].id)].title+"")&&ae(r,i),(!De||Ee&1)&&s!==(s=ie[ke(Se[0].id)].description+"")&&ae(u,s),(!De||Ee&5)&&v!==(v=Se[3]("💰",ie[ke(Se[0].id)].requirements.gold,Se[2].townInfo.gold)+"")&&w.p(v),(!De||Ee&5)&&q!==(q=Se[3]("🥕",ie[ke(Se[0].id)].requirements.resources.food,Se[2].resources.food)+"")&&R.p(q),(!De||Ee&5)&&I!==(I=Se[3]("🧠",ie[ke(Se[0].id)].requirements.knowledge,Se[2].townInfo.knowledge_points)+"")&&E.p(I),(!De||Ee&5)&&C!==(C=Se[3]("🪵",ie[ke(Se[0].id)].requirements.resources.wood,Se[2].resources.wood)+"")&&j.p(C),(!De||Ee&5)&&D!==(D=Se[3]("🪨",ie[ke(Se[0].id)].requirements.resources.stone,Se[2].resources.stone)+"")&&T.p(D),(!De||Ee&5)&&U!==(U=Se[3]("🧲",ie[ke(Se[0].id)].requirements.resources.metal,Se[2].resources.metal)+"")&&L.p(U),(!De||Ee&5)&&z!==(z=Se[3]("🔋",ie[ke(Se[0].id)].active_costs.power,Se[2].resources.power)+"")&&Q.p(z),(!De||Ee&5)&&Ae!==(Ae=Se[3]("🧑‍⚖️",ie[ke(Se[0].id)].requirements.resources.bureaucracy,Se[2].resources.bureaucracy)+"")&&oe.p(Ae),Ee&1&&(ee=ie[ke(Se[0].id)].requirements.employees!=0),ee?qe?qe.p(Se,Ee):(qe=Pu(Se),qe.c(),qe.m(p,null)):qe&&(qe.d(1),qe=null),Ee&1&&(Ne=ie[ke(Se[0].id)].revenue_per_week!=0),Ne?He?(He.p(Se,Ee),Ee&1&&k(He,1)):(He=Nu(Se),He.c(),k(He,1),He.m(e,_)):He&&(Ie(),S(He,1,1,()=>{He=null}),Me()),Ee&1&&(K=Object.values(ie[ke(Se[0].id)].active_costs).some(Wu)),K?Be?(Be.p(Se,Ee),Ee&1&&k(Be,1)):(Be=Eu(Se),Be.c(),k(Be,1),Be.m(e,J)):Be&&(Ie(),S(Be,1,1,()=>{Be=null}),Me()),Ee&1&&(se=Object.values(ie[ke(Se[0].id)].requirements.plots).length>0),se?Je?(Je.p(Se,Ee),Ee&1&&k(Je,1)):(Je=Lu(Se),Je.c(),k(Je,1),Je.m(e,we)):Je&&(Ie(),S(Je,1,1,()=>{Je=null}),Me()),Ee&1&&(Oe=Object.values(ie[ke(Se[0].id)].generated_resources).some(Gu)||ie[ke(Se[0].id)].knowledge_points_per_month>0),Oe?Ue?(Ue.p(Se,Ee),Ee&1&&k(Ue,1)):(Ue=ju(Se),Ue.c(),k(Ue,1),Ue.m(e,null)):Ue&&(Ie(),S(Ue,1,1,()=>{Ue=null}),Me())},i(Se){De||(k(d.$$.fragment,Se),k(He),k(Be),k(Je),k(Ue),De=!0)},o(Se){S(d.$$.fragment,Se),S(He),S(Be),S(Je),S(Ue),De=!1},d(Se){Se&&M(e),x(d),qe&&qe.d(),He&&He.d(),Be&&Be.d(),Je&&Je.d(),Ue&&Ue.d()}}}function Pu(t){let e,n,o=ie[ke(t[0].id)].requirements.employees+"",i,r,l;return{c(){e=P("span"),n=G("👥 "),i=G(o),r=G(" employees"),$(e,"class",l=ie[ke(t[0].id)].requirements.employees>t[2].townInfo.population_count-t[2].townInfo.employees&&t[1]?"px-1 text-textDanger font-bold border-2 border-red-400":"")},m(a,s){O(a,e,s),y(e,n),y(e,i),y(e,r)},p(a,s){s&1&&o!==(o=ie[ke(a[0].id)].requirements.employees+"")&&ae(i,o),s&7&&l!==(l=ie[ke(a[0].id)].requirements.employees>a[2].townInfo.population_count-a[2].townInfo.employees&&a[1]?"px-1 text-textDanger font-bold border-2 border-red-400":"")&&$(e,"class",l)},d(a){a&&M(e)}}}function Nu(t){let e,n,o,i,r,l,a,s=ie[ke(t[0].id)].revenue_per_week+"",u,f;return n=new It({props:{class:"bg-accent opacity-25 mt-0"}}),{c(){e=P("div"),Y(n.$$.fragment),o=B(),i=P("span"),i.textContent="Weekly revenue",r=B(),l=P("span"),a=G("💰 "),u=G(s),$(i,"class","font-semibold"),$(e,"class","flex flex-col gap-1 text-xs")},m(c,d){O(c,e,d),V(n,e,null),y(e,o),y(e,i),y(e,r),y(e,l),y(l,a),y(l,u),f=!0},p(c,d){(!f||d&1)&&s!==(s=ie[ke(c[0].id)].revenue_per_week+"")&&ae(u,s)},i(c){f||(k(n.$$.fragment,c),f=!0)},o(c){S(n.$$.fragment,c),f=!1},d(c){c&&M(e),x(n)}}}function Eu(t){let e,n,o,i,r,l;n=new It({props:{class:"bg-accent opacity-25 mt-2"}});let a=Ke(Object.keys(ie[ke(t[0].id)].active_costs)),s=[];for(let u=0;u<a.length;u+=1)s[u]=Ru(Mu(t,a,u));return{c(){e=P("div"),Y(n.$$.fragment),o=B(),i=P("span"),i.textContent="Weekly Costs",r=B();for(let u=0;u<s.length;u+=1)s[u].c();$(i,"class","font-semibold"),$(e,"class","flex flex-col gap-1 text-xs")},m(u,f){O(u,e,f),V(n,e,null),y(e,o),y(e,i),y(e,r);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);l=!0},p(u,f){if(f&1){a=Ke(Object.keys(ie[ke(u[0].id)].active_costs));let c;for(c=0;c<a.length;c+=1){const d=Mu(u,a,c);s[c]?s[c].p(d,f):(s[c]=Ru(d),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},i(u){l||(k(n.$$.fragment,u),l=!0)},o(u){S(n.$$.fragment,u),l=!1},d(u){u&&M(e),x(n),ft(s,u)}}}function $u(t){let e,n=no(t[4])+"",o,i,r=Xi(t[4])+"",l,a,s=-1*Object.values(ie[ke(t[0].id)].active_costs)[t[6]]+"",u,f,c;return{c(){e=P("span"),o=G(n),i=B(),l=G(r),a=B(),u=G(s),f=B(),$(e,"class",c=Object.values(ie[ke(t[0].id)].active_costs)[t[6]]>0?"text-textDanger":"text-textHappy")},m(d,m){O(d,e,m),y(e,o),y(e,i),y(e,l),y(e,a),y(e,u),y(e,f)},p(d,m){m&1&&n!==(n=no(d[4])+"")&&ae(o,n),m&1&&r!==(r=Xi(d[4])+"")&&ae(l,r),m&1&&s!==(s=-1*Object.values(ie[ke(d[0].id)].active_costs)[d[6]]+"")&&ae(u,s),m&1&&c!==(c=Object.values(ie[ke(d[0].id)].active_costs)[d[6]]>0?"text-textDanger":"text-textHappy")&&$(e,"class",c)},d(d){d&&M(e)}}}function Ru(t){let e=Object.values(ie[ke(t[0].id)].active_costs)[t[6]]!=0,n,o=e&&$u(t);return{c(){o&&o.c(),n=Fe()},m(i,r){o&&o.m(i,r),O(i,n,r)},p(i,r){r&1&&(e=Object.values(ie[ke(i[0].id)].active_costs)[i[6]]!=0),e?o?o.p(i,r):(o=$u(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(i){i&&M(n),o&&o.d(i)}}}function Lu(t){let e,n,o,i,r,l;n=new It({props:{class:"bg-accent opacity-25 mt-2"}});let a=Ke(Object.keys(ie[ke(t[0].id)].requirements.plots)),s=[];for(let u=0;u<a.length;u+=1)s[u]=Fu(Iu(t,a,u));return{c(){e=P("div"),Y(n.$$.fragment),o=B(),i=P("span"),i.textContent="Required Plots",r=B();for(let u=0;u<s.length;u+=1)s[u].c();$(i,"class","font-semibold"),$(e,"class","flex flex-col gap-1 text-xs")},m(u,f){O(u,e,f),V(n,e,null),y(e,o),y(e,i),y(e,r);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);l=!0},p(u,f){if(f&5){a=Ke(Object.keys(ie[ke(u[0].id)].requirements.plots));let c;for(c=0;c<a.length;c+=1){const d=Iu(u,a,c);s[c]?s[c].p(d,f):(s[c]=Fu(d),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},i(u){l||(k(n.$$.fragment,u),l=!0)},o(u){S(n.$$.fragment,u),l=!1},d(u){u&&M(e),x(n),ft(s,u)}}}function Du(t){var l;let e,n=((l=Bl(Object.values(ie[ke(t[0].id)].requirements.plots)[t[6]]))==null?void 0:l.title)+"",o,i,r;return{c(){e=P("span"),o=G(n),i=B(),$(e,"class",r=Ge(Object.values(ie[ke(t[0].id)].requirements.plots)[t[6]],t[2]).length==0?"text-textDanger border-2 border-red-400 font-semibold px-1":"text-textHappy")},m(a,s){O(a,e,s),y(e,o),y(e,i)},p(a,s){var u;s&1&&n!==(n=((u=Bl(Object.values(ie[ke(a[0].id)].requirements.plots)[a[6]]))==null?void 0:u.title)+"")&&ae(o,n),s&5&&r!==(r=Ge(Object.values(ie[ke(a[0].id)].requirements.plots)[a[6]],a[2]).length==0?"text-textDanger border-2 border-red-400 font-semibold px-1":"text-textHappy")&&$(e,"class",r)},d(a){a&&M(e)}}}function Fu(t){let e=Object.values(ie[ke(t[0].id)].requirements.plots)[t[6]]!=0,n,o=e&&Du(t);return{c(){o&&o.c(),n=Fe()},m(i,r){o&&o.m(i,r),O(i,n,r)},p(i,r){r&1&&(e=Object.values(ie[ke(i[0].id)].requirements.plots)[i[6]]!=0),e?o?o.p(i,r):(o=Du(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(i){i&&M(n),o&&o.d(i)}}}function ju(t){let e,n,o,i,r,l=ie[ke(t[0].id)].knowledge_points_per_month>0,a,s;n=new It({props:{class:"bg-accent opacity-25 mt-2"}});let u=l&&qu(t),f=Ke(Object.keys(ie[ke(t[0].id)].generated_resources)),c=[];for(let d=0;d<f.length;d+=1)c[d]=Hu(Au(t,f,d));return{c(){e=P("div"),Y(n.$$.fragment),o=B(),i=P("span"),i.textContent="Generated Resources",r=B(),u&&u.c(),a=B();for(let d=0;d<c.length;d+=1)c[d].c();$(i,"class","font-semibold"),$(e,"class","flex flex-col gap-1 text-xs")},m(d,m){O(d,e,m),V(n,e,null),y(e,o),y(e,i),y(e,r),u&&u.m(e,null),y(e,a);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);s=!0},p(d,m){if(m&1&&(l=ie[ke(d[0].id)].knowledge_points_per_month>0),l?u?u.p(d,m):(u=qu(d),u.c(),u.m(e,a)):u&&(u.d(1),u=null),m&1){f=Ke(Object.keys(ie[ke(d[0].id)].generated_resources));let h;for(h=0;h<f.length;h+=1){const g=Au(d,f,h);c[h]?c[h].p(g,m):(c[h]=Hu(g),c[h].c(),c[h].m(e,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=f.length}},i(d){s||(k(n.$$.fragment,d),s=!0)},o(d){S(n.$$.fragment,d),s=!1},d(d){d&&M(e),x(n),u&&u.d(),ft(c,d)}}}function qu(t){let e,n,o=Math.round(ie[ke(t[0].id)].knowledge_points_per_month)+"",i,r;return{c(){e=P("span"),n=G("🧠 "),i=G(o),r=G(" (monthly)")},m(l,a){O(l,e,a),y(e,n),y(e,i),y(e,r)},p(l,a){a&1&&o!==(o=Math.round(ie[ke(l[0].id)].knowledge_points_per_month)+"")&&ae(i,o)},d(l){l&&M(e)}}}function Bu(t){let e,n=Xi(t[4])+"",o,i,r=no(t[4])+"",l,a,s=Hl(Object.values(ie[ke(t[0].id)].generated_resources)[t[6]],!1)+"",u,f,c;return{c(){e=P("span"),o=G(n),i=B(),l=G(r),a=B(),u=G(s),f=B(),$(e,"class",c=Object.values(ie[ke(t[0].id)].generated_resources)[t[6]]>0?"text-textHappy":"text-textDanger")},m(d,m){O(d,e,m),y(e,o),y(e,i),y(e,l),y(e,a),y(e,u),y(e,f)},p(d,m){m&1&&n!==(n=Xi(d[4])+"")&&ae(o,n),m&1&&r!==(r=no(d[4])+"")&&ae(l,r),m&1&&s!==(s=Hl(Object.values(ie[ke(d[0].id)].generated_resources)[d[6]],!1)+"")&&ae(u,s),m&1&&c!==(c=Object.values(ie[ke(d[0].id)].generated_resources)[d[6]]>0?"text-textHappy":"text-textDanger")&&$(e,"class",c)},d(d){d&&M(e)}}}function Hu(t){let e=Object.values(ie[ke(t[0].id)].generated_resources)[t[6]]!=0,n,o=e&&Bu(t);return{c(){o&&o.c(),n=Fe()},m(i,r){o&&o.m(i,r),O(i,n,r)},p(i,r){r&1&&(e=Object.values(ie[ke(i[0].id)].generated_resources)[i[6]]!=0),e?o?o.p(i,r):(o=Bu(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(i){i&&M(n),o&&o.d(i)}}}function z3(t){let e,n,o=t[0]!=null&&Ou(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,[r]){i[0]!=null?o?(o.p(i,r),r&1&&k(o,1)):(o=Ou(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}function Xi(t){switch(t){case"food":return"🥕";case"knowledge":return"🧠";case"wood":return"🪵";case"stone":return"🪨";case"metal":return"🧲";case"power":return"🔋";case"bureaucracy":return"🧑‍⚖️";default:return"💰"}}const Gu=t=>t!=0,Wu=t=>t!=0;function e4(t,e,n){let o;le(t,$e,a=>n(2,o=a));let{option:i}=e,{checkRequirements:r=!0}=e;function l(a,s,u){if(s==0||s==null)return"<span class='hidden'></span>";let f="",c="";return u<s&&r&&(c="text-textDanger border-2 border-red-400 px-2"),f=`<span class='${c}'>${a} ${tn(s,!1)}</span>`,f}return t.$$set=a=>{"option"in a&&n(0,i=a.option),"checkRequirements"in a&&n(1,r=a.checkRequirements)},[i,r,o,l]}class ud extends pe{constructor(e){super(),me(this,e,e4,z3,de,{option:0,checkRequirements:1})}}function t4(t){let e,n;return{c(){e=P("span"),n=G(t[3]),$(e,"class","text-[11px] text-wrap")},m(o,i){O(o,e,i),y(e,n)},p(o,i){i&8&&ae(n,o[3])},d(o){o&&M(e)}}}function n4(t){let e;return{c(){e=P("span"),e.textContent="Click to bulldoze",$(e,"class","text-[11px] text-wrap text-yellow-300")},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function o4(t){let e,n,o,i,r;return{c(){e=P("span"),n=G(`Hires
              `),o=P("span"),i=G(t[9]),r=G(`

              employees`),$(o,"class",t[10]+" font-medium"),$(e,"class","text-[11px] opacity-80")},m(l,a){O(l,e,a),y(e,n),y(e,o),y(o,i),y(e,r)},p:Ce,d(l){l&&M(e)}}}function i4(t){let e;return{c(){e=P("span"),e.textContent=`+💰${tn(t[8],!1)}/wk`},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function r4(t){let e;return{c(){e=P("span"),e.textContent=`🔌${t[11]}`},m(n,o){O(n,e,o)},p:Ce,d(n){n&&M(e)}}}function l4(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h=tn(t[6],!1)+"",g,p,w,v,A,R,q,F;function E(T,D){if(T[0].selected)return n4;if(T[3])return t4}let I=E(t),N=I&&I(t),j=t[9]&&o4(t),C=t[8]>0&&i4(t),b=t[11]>0&&r4(t);return{c(){e=P("div"),n=P("div"),o=P("div"),i=P("span"),i.textContent=`${t[5]}`,r=B(),l=P("span"),l.textContent=`${t[4]}`,a=B(),N&&N.c(),s=B(),u=P("div"),j&&j.c(),f=B(),c=P("div"),d=P("span"),m=G("💰"),g=G(h),p=B(),C&&C.c(),w=B(),v=P("div"),b&&b.c(),$(i,"class","text-3xl"),$(l,"class","font-medium text-center text-md"),$(o,"class","flex flex-col flex-grow rounded-xl p-2 gap-0 justify-center items-center"),$(d,"class",""+t[7]),$(c,"class","flex flex-row justify-between mx-2 text-[11px] font-mono items-center"),$(v,"class","flex flex-row justify-between mx-2 text-[11px] font-mono"),$(u,"class","bg-sidebarBackground text-black rounded-t-lg py-1"),$(n,"class",A="flex flex-col w-36 h-48 min-h-32 min-w-36 rounded-xl text-white drop-shadow-lg border-black border-2 hover:translate-y-[-8px] transition-transform duration-300 ease-in-out z-100 "+(t[2]||t[0].selected?"cursor-pointer":"cursor-not-allowed opacity-30")+" "+(t[0].selected?"border-4 border-white scale-105":"")),tt(n,"background",t[12]),$(e,"class","plotOption"),$(e,"data-plotoptionid",R=t[0].id)},m(T,D){O(T,e,D),y(e,n),y(n,o),y(o,i),y(o,r),y(o,l),y(o,a),N&&N.m(o,null),y(n,s),y(n,u),j&&j.m(u,null),y(u,f),y(u,c),y(c,d),y(d,m),y(d,g),y(c,p),C&&C.m(c,null),y(u,w),y(u,v),b&&b.m(v,null),q||(F=te(e,"click",function(){Ft(t[2]?t[15]:Vu)&&(t[2]?t[15]:Vu).apply(this,arguments)}),q=!0)},p(T,D){t=T,I===(I=E(t))&&N?N.p(t,D):(N&&N.d(1),N=I&&I(t),N&&(N.c(),N.m(o,null))),t[9]&&j.p(t,D),t[8]>0&&C.p(t,D),t[11]>0&&b.p(t,D),D&5&&A!==(A="flex flex-col w-36 h-48 min-h-32 min-w-36 rounded-xl text-white drop-shadow-lg border-black border-2 hover:translate-y-[-8px] transition-transform duration-300 ease-in-out z-100 "+(t[2]||t[0].selected?"cursor-pointer":"cursor-not-allowed opacity-30")+" "+(t[0].selected?"border-4 border-white scale-105":""))&&$(n,"class",A),D&1&&R!==(R=t[0].id)&&$(e,"data-plotoptionid",R)},d(T){T&&M(e),N&&N.d(),j&&j.d(),C&&C.d(),b&&b.d(),q=!1,F()}}}function s4(t){let e,n;return e=new ud({props:{option:t[0],checkRequirements:!0}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.option=o[0]),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function a4(t){let e,n,o,i;return e=new Co({props:{$$slots:{default:[l4]},$$scope:{ctx:t}}}),o=new wo({props:{$$slots:{default:[s4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&262159&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&262145&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function u4(t){let e,n;return e=new ko({props:{openDelay:200,closeDelay:0,$$slots:{default:[a4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&262159&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}const Vu=()=>{};function f4(t,e,n){let o;le(t,$e,R=>n(14,o=R));let{option:i}=e,{purchaseCallback:r}=e,{canPurchase:l}=e,a=i.title,s=i.emoji,u=i.requirements.gold,f=o.townInfo.gold<u?"text-red-500 font-semibold":"",c=i.revenue_per_week,d=i.requirements.employees,m=o.townInfo.population_count-o.townInfo.employees<d?"text-red-500 font-semibold":"",h=i.active_costs.power,g=$r(ke(i.id),!1,5),{count:p=0}=e,w="";const v=Object.entries(i.generated_resources).filter(([R,q])=>q>0).map(([R,q])=>`${q} ${R}`);v.length>0&&(w=`Produces: ${v.join(", ")}`);const A=()=>r(i);return t.$$set=R=>{"option"in R&&n(0,i=R.option),"purchaseCallback"in R&&n(1,r=R.purchaseCallback),"canPurchase"in R&&n(2,l=R.canPurchase),"count"in R&&n(13,p=R.count)},t.$$.update=()=>{t.$$.dirty&16384},[i,r,l,w,a,s,u,f,c,d,m,h,g,p,o,A]}class c4 extends pe{constructor(e){super(),me(this,e,f4,u4,de,{option:0,purchaseCallback:1,canPurchase:2,count:13})}}const{Map:d4}=gd;function xu(t,e,n){const o=t.slice();return o[23]=e[n],o}function Yu(t){let e,n,o,i,r,l,a,s,u,f,c=[],d=new d4,m,h,g,p,w,v,A,R,q=Ke(t[2].filter(t[11]));const F=E=>E[23].id;for(let E=0;E<q.length;E+=1){let I=xu(t,q,E),N=F(I);d.set(N,c[E]=Uu(N,I))}return p=new ad({props:{mini:!0}}),{c(){e=P("div"),o=B(),i=P("div"),r=P("div"),l=P("div"),a=P("div"),s=P("div"),u=P("div"),f=P("div");for(let E=0;E<c.length;E+=1)c[E].c();h=B(),g=P("div"),Y(p.$$.fragment),$(e,"class","fixed inset-0 bg-black/20 z-[998]"),$(f,"class",m="flex flex-row text-start justify-start items-start flex-wrap py-8 px-8 "+(t[1].isMineralSource,"pt-6 gap-2")+" w-full align-middle"),$(s,"class","flex gap-1 pb-24 overflow-scroll max-h-["+Ku+"]"),$(a,"class","flex flex-row gap-2 justify-start pt-8 flex-grow w-full"),$(r,"class","h-max w-full flex-grow"),$(i,"class","w-[100vw] fixed bottom-0 max-h-["+Ku+"] z-[999] flex flex-row justify-center text-center items-center bg-popupBackground text-sidebarText px-4 shadow-2xl rounded-t-2xl")},m(E,I){O(E,e,I),O(E,o,I),O(E,i,I),y(i,r),y(r,l),y(l,a),y(a,s),y(s,u),y(u,f);for(let N=0;N<c.length;N+=1)c[N]&&c[N].m(f,null);y(i,h),y(i,g),V(p,g,null),v=!0,A||(R=[te(e,"click",t[10]),te(a,"click",t[3]),te(i,"click",vd(t[9]))],A=!0)},p(E,I){I&6&&(q=Ke(E[2].filter(E[11])),Ie(),c=Ed(c,I,F,1,E,q,d,f,Nd,Uu,null,xu),Me()),(!v||I&2&&m!==(m="flex flex-row text-start justify-start items-start flex-wrap py-8 px-8 "+(E[1].isMineralSource,"pt-6 gap-2")+" w-full align-middle"))&&$(f,"class",m)},i(E){if(!v){E&&it(()=>{v&&(n||(n=vt(e,ji,{duration:200},!0)),n.run(1))});for(let I=0;I<q.length;I+=1)k(c[I]);k(p.$$.fragment,E),E&&it(()=>{v&&(w||(w=vt(i,aa,{duration:200,axis:"y"},!0)),w.run(1))}),v=!0}},o(E){E&&(n||(n=vt(e,ji,{duration:200},!1)),n.run(0));for(let I=0;I<c.length;I+=1)S(c[I]);S(p.$$.fragment,E),E&&(w||(w=vt(i,aa,{duration:200,axis:"y"},!1)),w.run(0)),v=!1},d(E){E&&(M(e),M(o),M(i)),E&&n&&n.end();for(let I=0;I<c.length;I+=1)c[I].d();x(p),E&&w&&w.end(),A=!1,Ye(R)}}}function Uu(t,e){let n,o,i;return o=new c4({props:{option:e[23],purchaseCallback:h4,canPurchase:e[23].affordable??!1}}),{key:t,first:null,c(){n=Fe(),Y(o.$$.fragment),this.first=n},m(r,l){O(r,n,l),V(o,r,l),i=!0},p(r,l){e=r;const a={};l&6&&(a.option=e[23]),l&6&&(a.canPurchase=e[23].affordable??!1),o.$set(a)},i(r){i||(k(o.$$.fragment,r),i=!0)},o(r){S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(o,r)}}}function m4(t){let e,n,o=t[0]&&Yu(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,[r]){i[0]?o?(o.p(i,r),r&1&&k(o,1)):(o=Yu(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}const Ku="50vh";function p4(t,e,n){return t>=0&&t<n.length&&e>=0&&e<n[0].length&&!n[t][e].water&&!n[t][e].disabled}function mi(t,e,n,o,i){let r=t+n,l=e+o;for(;r>=0&&r<i.length&&l>=0&&l<i[0].length;){if(p4(r,l,i))return[r,l];r+=n,l+=o}return null}const h4=()=>{};function _4(t,e,n){let o,i,r,l;le(t,Qe,I=>n(1,r=I)),le(t,$e,I=>n(8,l=I));let{x:a=0}=e,{y:s=0}=e,{open:u=!1}=e,{tooltip:f=""}=e,c=ie,d;const m=new Map;function h(I){return m.has(I)||m.set(I,ie.findIndex(N=>N.id===I)),m.get(I)}function g(I){return l.plots[a][s].type>-1?c[l.plots[a][s].type].id===I.id:!1}function p(I,N){let j=!0,C=!0;I.requirements.gold>N.townInfo.gold&&(j=!1,C=!1),I.requirements.knowledge!==void 0&&I.requirements.knowledge>N.townInfo.knowledge_points&&(j=!1,C=!1),I.requirements.resources!==void 0&&Object.keys(I.requirements.resources).forEach(T=>{I.requirements.resources[T]!=0&&l.resources[T]<I.requirements.resources[T]&&(j=!1,C=!1)});let b=N.townInfo.population_count-N.townInfo.employees;if(I.requirements.employees!==void 0&&I.requirements.employees>0){const T=N.plots[a][s];if(T.type!==-1){const W=c[T.type].requirements.employees||0;C&&I.requirements.employees<=W?j=!0:I.requirements.employees>b+W&&(j=!1)}else I.requirements.employees>b&&(j=!1)}return I.active_costs!==void 0&&(I.active_costs.gold>N.townInfo.gold||I.active_costs.power>N.resources.power||I.active_costs.wood>N.resources.wood||I.active_costs.stone>N.resources.stone||I.active_costs.metal>N.resources.metal||I.active_costs.bureaucracy>N.resources.bureaucracy||I.active_costs.food>N.resources.food)&&(j=!1,C=!1),I.requirements.plots.length>0&&I.requirements.plots.forEach(T=>{Ge(T,N).length===0&&(j=!1,C=!1)}),j}function w(I){const N=I.target.closest(".plotOption");if(N){const j=N.dataset.plotoptionid;if(j===l.plots[a][s].typeId){A();return}v(j)}}function v(I){const N=h(I),j=c[N];let C=l;if(p(j,C)){if(C.plots[a][s].type!==-1&&En(a,s,C),n(6,f=""),C.plots[a][s].type=N,C.plots[a][s].active=!0,C.plots[a][s].referencePlot=[],C.plots[a][s].typeId=j.id,C.townInfo.gold-=j.requirements.gold,C.townInfo.gold=st(C.townInfo.gold,2),C.townInfo.population_count+=j.immediate_variable_changes.population,C.townInfo.population_max+=j.immediate_variable_changes.population,C.townInfo.happiness+=j.immediate_variable_changes.happiness,C.townInfo.health+=j.immediate_variable_changes.health,C.modifiers.happiness=st(C.modifiers.happiness*j.purchase_effect_modifiers.happiness,2),C.modifiers.health=st(C.modifiers.health*j.purchase_effect_modifiers.health,2),C.modifiers.community=st(C.modifiers.community*j.purchase_effect_modifiers.community,2),C.townInfo.employees+=j.requirements.employees,(C.plotCounts[N]===void 0||C.plotCounts[N]===null)&&(C.plotCounts[N]=0),C.plotCounts[N]++,C.lastChangeDay=C.environment.day,j.requirements.resources!==void 0){const T=j.requirements.resources;C.resources.food-=T.food,C.resources.wood-=T.wood,C.resources.stone-=T.stone,C.resources.metal-=T.metal}switch(j.id){case"city_hall":C.hasCityHall=!0;break;case"bank":C.hasBank=!0;break}$e.set(C),localStorage.setItem(_t,JSON.stringify(C));const b=Tm(a,s,C);if(b){const[T,D]=b;n(4,a=T),n(5,s=D),Te(Qe,r.x=T,r),Te(Qe,r.y=D,r);const W=document.querySelector(`.plot_container[data-x="${T}"][data-y="${D}"]`);if(W){const L=W.getBoundingClientRect(),U=window.innerHeight||d.clientHeight,X=window.innerWidth||d.clientWidth,Q=d.scrollTop+L.top-U/2+225,z=d.scrollLeft+L.left-X/2;window.scrollTo({top:Q,left:z,behavior:"smooth"}),document.querySelectorAll(".plot_container").forEach(oe=>oe.classList.remove("selected")),W.classList.add("selected")}}}else n(6,f="You do not have enough resources to purchase this plot. If it's a 'Large' plot, make sure you have a 2x2 area available. "),document.querySelectorAll(".plotOption").forEach(T=>{T.classList.remove("active")})}function A(){document.querySelectorAll(".plotOption").forEach(N=>{N.classList.remove("active")}),En(a,s,l)}function R(I){if(!u)return;let N=null;switch(I.key.toLowerCase()){case"arrowup":case"w":N=mi(r.x,r.y,-1,0,l.plots);break;case"arrowdown":case"s":N=mi(r.x,r.y,1,0,l.plots);break;case"arrowleft":case"a":N=mi(r.x,r.y,0,-1,l.plots);break;case"arrowright":case"d":N=mi(r.x,r.y,0,1,l.plots);break;default:return}if(!N)return;const[j,C]=N;Te(Qe,r.x=j,r),Te(Qe,r.y=C,r);const b=document.querySelector(`.plot_container[data-x="${j}"][data-y="${C}"]`);if(b){const T=b.getBoundingClientRect(),D=window.innerHeight||d.clientHeight,W=window.innerWidth||d.clientWidth,L=d.scrollTop+T.top-D/2+225,U=d.scrollLeft+T.left-W/2;window.scrollTo({top:L,left:U,behavior:"smooth"}),document.querySelectorAll(".plot_container").forEach(Q=>Q.classList.remove("selected")),b.classList.add("selected")}}Zo(()=>{d=document.documentElement||document.body,window.addEventListener("keydown",R)}),Of(()=>{window.removeEventListener("keydown",R)});function q(I){re.call(this,t,I)}const F=()=>Te(Qe,r.visible=!1,r),E=I=>r.isMineralSource?I.id==="mine":I.id!=="mine";return t.$$set=I=>{"x"in I&&n(4,a=I.x),"y"in I&&n(5,s=I.y),"open"in I&&n(0,u=I.open),"tooltip"in I&&n(6,f=I.tooltip)},t.$$.update=()=>{t.$$.dirty&256&&n(7,o=l?c.map(I=>Object.assign(Object.assign({},I),{affordable:p(I,l),selected:g(I)})):[]),t.$$.dirty&386&&n(2,i=l?(()=>{let I=[...o];if(r.isMineralSource)return I.filter(N=>N.id==="mine");Ge("tree_farm",l).length===0&&(I=I.filter(N=>["small_homes","farm","tree_farm"].includes(N.id)));for(const[N,j]of Object.entries(Fd))typeof j=="number"&&j>0&&Ge(N,l).length>=j&&(I=I.filter(C=>C.id!==N));return I.sort((N,j)=>N.selected&&!j.selected?-1:0)})():[])},[u,r,i,w,a,s,f,o,l,q,F,E]}class fd extends pe{constructor(e){super(),me(this,e,_4,m4,de,{x:4,y:5,open:0,tooltip:6})}}function g4(t){let e,n,o;return{c(){e=P("span"),n=G("My liege, if you build a City Hall, you can expand your city "),o=G(t[0]),$(e,"class","text-xs")},m(i,r){O(i,e,r),y(e,n),y(e,o)},p(i,r){r&1&&ae(o,i[0])},i:Ce,o:Ce,d(i){i&&M(e)}}}function b4(t){let e,n;return e=new Mt({props:{class:"bg-accent h-max rounded-2xl hover:scale-110 transition-transform duration-200 ease-in-out hover:drop-shadow-2xl",$$slots:{default:[y4]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&11&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function y4(t){let e,n,o,i,r,l=t[0].toUpperCase()+"",a,s,u,f,c,d,m,h,g,p,w,v=Math.round(Math.pow(1.7,t[1].kingdom_expansions+5))+"",A,R,q,F;return{c(){e=P("div"),n=G("My liege, you can expand your "),o=P("br"),i=G(`kingdom
        `),r=P("span"),a=G(l),s=G(`
        using
        `),u=P("br"),f=G(`your
        `),c=P("span"),c.textContent="City Hall",d=G("!"),m=P("br"),h=P("br"),g=B(),p=P("span"),w=G("Requires "),A=G(v),R=G(` Guardians
          `),q=P("br"),F=G("to be employed. (see city mgmt menu)"),$(r,"class","font-extrabold text-blue-200"),$(c,"class","text-blue-200 bold"),$(p,"class","opacity-75 text-xs")},m(E,I){O(E,e,I),y(e,n),y(e,o),y(e,i),y(e,r),y(r,a),y(e,s),y(e,u),y(e,f),y(e,c),y(e,d),y(e,m),y(e,h),y(e,g),y(e,p),y(p,w),y(p,A),y(p,R),y(p,q),y(p,F)},p(E,I){I&1&&l!==(l=E[0].toUpperCase()+"")&&ae(a,l),I&2&&v!==(v=Math.round(Math.pow(1.7,E[1].kingdom_expansions+5))+"")&&ae(A,v)},d(E){E&&M(e)}}}function v4(t){let e,n,o,i,r;const l=[b4,g4],a=[];function s(u,f){return f&2&&(n=null),n==null&&(n=Ge("city_hall",u[1]).length>0),n?0:1}return o=s(t,-1),i=a[o]=l[o](t),{c(){e=P("div"),i.c(),$(e,"class","w-48 h-max")},m(u,f){O(u,e,f),a[o].m(e,null),r=!0},p(u,[f]){let c=o;o=s(u,f),o===c?a[o].p(u,f):(Ie(),S(a[c],1,1,()=>{a[c]=null}),Me(),i=a[o],i?i.p(u,f):(i=a[o]=l[o](u),i.c()),k(i,1),i.m(e,null))},i(u){r||(k(i),r=!0)},o(u){S(i),r=!1},d(u){u&&M(e),a[o].d()}}}function w4(t,e,n){let o;le(t,$e,l=>n(1,o=l));let{direction:i}=e;const r=()=>{const l=Om(o,i);l&&St.set(l)};return t.$$set=l=>{"direction"in l&&n(0,i=l.direction)},[i,o,r]}class Xu extends pe{constructor(e){super(),me(this,e,w4,v4,de,{direction:0})}}function k4(t){return{c:Ce,m:Ce,p:Ce,d:Ce}}function C4(t){let e,n,o,i=ie[t[0].type].emoji+"",r,l,a,s,u,f=ie[t[0].type].title+"",c,d,m,h;return{c(){e=P("div"),n=P("span"),o=P("span"),r=G(i),l=B(),a=P("br"),s=B(),u=P("span"),c=G(f),$(o,"class","text-lg align-text-top select-none"),$(u,"class","text-sm align-text-top text-black select-none"),$(n,"data-size",d=ie[t[0].type].requirements.size),$(n,"data-x",m=t[0].x),$(n,"data-y",h=t[0].y),$(e,"class","svelte-lm6uio")},m(g,p){O(g,e,p),y(e,n),y(n,o),y(o,r),y(n,l),y(n,a),y(n,s),y(n,u),y(u,c)},p(g,p){p&1&&i!==(i=ie[g[0].type].emoji+"")&&ae(r,i),p&1&&f!==(f=ie[g[0].type].title+"")&&ae(c,f),p&1&&d!==(d=ie[g[0].type].requirements.size)&&$(n,"data-size",d),p&1&&m!==(m=g[0].x)&&$(n,"data-x",m),p&1&&h!==(h=g[0].y)&&$(n,"data-y",h)},d(g){g&&M(e)}}}function Ju(t){let e;return{c(){e=P("span"),e.textContent="🧲",$(e,"class","text-lg")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function Zu(t){let e;return{c(){e=P("span"),e.textContent="👑",$(e,"class","text-lg absolute top-0")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function T4(t){let e,n,o,i=t[7](t[0].x,t[0].y),r,l,a,s,u,f,c,d,m,h,g,p,w,v,A,R,q,F;function E(b,T){if(b[0].type>-1)return C4;if(b[0].type==-1&&b[0].x==0&&b[0].y==0)return k4}let I=E(t),N=I&&I(t),j=t[0].mineralSource&&t[0].type==-1&&Ju(),C=i&&Zu();return{c(){e=P("button"),N&&N.c(),n=B(),j&&j.c(),o=B(),C&&C.c(),$(e,"class",r="plot_container "+t[1]+" overflow-visible "+(t[0].type==-1&&t[2]==!1,"")+" "+(t[0].mineralSource?"hidden":"")+" "+(t[2]?"cursor-pointer":"cursor-not-allowed")+" svelte-lm6uio"),tt(e,"background-color",t[0].water?"rgba(66, 135, 245, 1)":t[5].x==t[0].x&&t[5].y==t[0].y&&t[5].visible?"white":t[0].mineralSource?"black":$r(t[0].type,t[2])),$(e,"data-active",l=t[0].active),$(e,"data-hidehoveranimation",a=t[5].visible||t[0].type==-1&&t[0].x==0&&t[0].y==0),$(e,"data-id",s=t[0].id),$(e,"data-x",u=t[0].x),$(e,"data-y",f=t[0].y),$(e,"data-optionindex",c=t[0].optionIndex),$(e,"data-canbeupgraded",t[2]),$(e,"data-type",d=t[0].type),$(e,"data-type-id",m=t[0].typeId),$(e,"data-refplotx",h=t[0].referencePlot!==void 0?t[0].referencePlot[1]:null),$(e,"data-refploty",g=t[0].referencePlot!==void 0?t[0].referencePlot[0]:null),$(e,"data-size",p=t[0].type>-1?ie[t[0].type].requirements.size:null),$(e,"data-mineralsource",w=t[0].mineralSource),$(e,"data-water",v=t[0].water),$(e,"data-nearwater",A=oo(t[0].x,t[0].y,t[3])),$(e,"data-liegelocation",R=t[7](t[0].x,t[0].y))},m(b,T){O(b,e,T),N&&N.m(e,null),y(e,n),j&&j.m(e,null),y(e,o),C&&C.m(e,null),q||(F=te(e,"click",function(){Ft(t[0].water?null:t[6]?Gl(t[0].x,t[0].y,t[3]):t[8])&&(t[0].water?null:t[6]?Gl(t[0].x,t[0].y,t[3]):t[8]).apply(this,arguments)}),q=!0)},p(b,T){t=b,I===(I=E(t))&&N?N.p(t,T):(N&&N.d(1),N=I&&I(t),N&&(N.c(),N.m(e,n))),t[0].mineralSource&&t[0].type==-1?j||(j=Ju(),j.c(),j.m(e,o)):j&&(j.d(1),j=null),T&1&&(i=t[7](t[0].x,t[0].y)),i?C||(C=Zu(),C.c(),C.m(e,null)):C&&(C.d(1),C=null),T&7&&r!==(r="plot_container "+t[1]+" overflow-visible "+(t[0].type==-1&&t[2]==!1,"")+" "+(t[0].mineralSource?"hidden":"")+" "+(t[2]?"cursor-pointer":"cursor-not-allowed")+" svelte-lm6uio")&&$(e,"class",r),T&37&&tt(e,"background-color",t[0].water?"rgba(66, 135, 245, 1)":t[5].x==t[0].x&&t[5].y==t[0].y&&t[5].visible?"white":t[0].mineralSource?"black":$r(t[0].type,t[2])),T&1&&l!==(l=t[0].active)&&$(e,"data-active",l),T&33&&a!==(a=t[5].visible||t[0].type==-1&&t[0].x==0&&t[0].y==0)&&$(e,"data-hidehoveranimation",a),T&1&&s!==(s=t[0].id)&&$(e,"data-id",s),T&1&&u!==(u=t[0].x)&&$(e,"data-x",u),T&1&&f!==(f=t[0].y)&&$(e,"data-y",f),T&1&&c!==(c=t[0].optionIndex)&&$(e,"data-optionindex",c),T&4&&$(e,"data-canbeupgraded",t[2]),T&1&&d!==(d=t[0].type)&&$(e,"data-type",d),T&1&&m!==(m=t[0].typeId)&&$(e,"data-type-id",m),T&1&&h!==(h=t[0].referencePlot!==void 0?t[0].referencePlot[1]:null)&&$(e,"data-refplotx",h),T&1&&g!==(g=t[0].referencePlot!==void 0?t[0].referencePlot[0]:null)&&$(e,"data-refploty",g),T&1&&p!==(p=t[0].type>-1?ie[t[0].type].requirements.size:null)&&$(e,"data-size",p),T&1&&w!==(w=t[0].mineralSource)&&$(e,"data-mineralsource",w),T&1&&v!==(v=t[0].water)&&$(e,"data-water",v),T&9&&A!==(A=oo(t[0].x,t[0].y,t[3]))&&$(e,"data-nearwater",A),T&1&&R!==(R=t[7](t[0].x,t[0].y))&&$(e,"data-liegelocation",R)},d(b){b&&M(e),N&&N.d(),j&&j.d(),C&&C.d(),q=!1,F()}}}function Qu(t){let e;return{c(){e=G("Water - Place farms nearby for more food & revenue!")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function zu(t){let e;return{c(){e=P("span"),e.textContent="Near water - Generating more food & revenue!",$(e,"class","text-xs bg-blue-500 text-white px-2 py-3 rounded-2xl text-center")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function ef(t){let e;function n(r,l){return ie[r[0].type].liege_on_plot_hint==null?A4:S4}let o=n(t),i=o(t);return{c(){e=P("span"),i.c(),$(e,"class","text-xs bg-pink-700 text-white px-2 py-3 rounded-2xl text-center")},m(r,l){O(r,e,l),i.m(e,null)},p(r,l){o===(o=n(r))&&i?i.p(r,l):(i.d(1),i=o(r),i&&(i.c(),i.m(e,null)))},d(r){r&&M(e),i.d()}}}function S4(t){let e=ie[t[0].type].liege_on_plot_hint+"",n;return{c(){n=G(e)},m(o,i){O(o,n,i)},p(o,i){i&1&&e!==(e=ie[o[0].type].liege_on_plot_hint+"")&&ae(n,e)},d(o){o&&M(n)}}}function A4(t){let e,n=ie[t[0].type].title+"",o,i;return{c(){e=G("You are hanging out on the "),o=G(n),i=G(` plot, but nothing
            seems to be changing except a revenue boost.`)},m(r,l){O(r,e,l),O(r,o,l),O(r,i,l)},p(r,l){l&1&&n!==(n=ie[r[0].type].title+"")&&ae(o,n)},d(r){r&&(M(e),M(o),M(i))}}}function tf(t){let e,n;return e=new ud({props:{option:t[4],checkRequirements:!1}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&16&&(r.option=o[4]),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function I4(t){let e,n,o=oo(t[0].x,t[0].y,t[3]),i,r=Xn(t[0].x,t[0].y,t[3]),l,a,s=t[0].water&&Qu(),u=o&&zu(),f=r&&ef(t),c=t[0].active&&tf(t);return{c(){e=P("div"),s&&s.c(),n=B(),u&&u.c(),i=B(),f&&f.c(),l=B(),c&&c.c(),$(e,"class","flex flex-col gap-2")},m(d,m){O(d,e,m),s&&s.m(e,null),y(e,n),u&&u.m(e,null),y(e,i),f&&f.m(e,null),y(e,l),c&&c.m(e,null),a=!0},p(d,m){d[0].water?s||(s=Qu(),s.c(),s.m(e,n)):s&&(s.d(1),s=null),m&9&&(o=oo(d[0].x,d[0].y,d[3])),o?u||(u=zu(),u.c(),u.m(e,i)):u&&(u.d(1),u=null),m&9&&(r=Xn(d[0].x,d[0].y,d[3])),r?f?f.p(d,m):(f=ef(d),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d[0].active?c?(c.p(d,m),m&1&&k(c,1)):(c=tf(d),c.c(),k(c,1),c.m(e,null)):c&&(Ie(),S(c,1,1,()=>{c=null}),Me())},i(d){a||(k(c),a=!0)},o(d){S(c),a=!1},d(d){d&&M(e),s&&s.d(),u&&u.d(),f&&f.d(),c&&c.d()}}}function M4(t){let e,n,o,i;return e=new Co({props:{$$slots:{default:[T4]},$$scope:{ctx:t}}}),o=new wo({props:{class:"max-w-64 rounded-3xl "+(t[0].type<0&&!t[0].water?"hidden":""),$$slots:{default:[I4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&8303&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&1&&(s.class="max-w-64 rounded-3xl "+(r[0].type<0&&!r[0].water?"hidden":"")),l&8217&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function O4(t){let e,n;return e=new ko({props:{openDelay:200,closeDelay:0,$$slots:{default:[M4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&8319&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function P4(t,e,n){let o,i,r,l,a,s;le(t,Qe,p=>n(5,o=p)),le(t,$e,p=>n(3,i=p)),le(t,Et,p=>n(11,r=p)),le(t,ro,p=>n(12,l=p)),le(t,Bt,p=>n(10,a=p)),le(t,so,p=>n(6,s=p));let{data:u={id:0,active:!1,x:0,y:0,type:-1,styling:"",referencePlot:[],mineralSource:!1,disabled:!1,water:!1}}=e,f,{classText:c=""}=e,{canBeUpgraded:d=!1}=e;const m=(p,w)=>i.liege_location!=null&&p==i.liege_location[0]&&w==i.liege_location[1];function h(p,w,v){let A=document.querySelectorAll(".plot_container");if(r==!1){if(u.referencePlot!=null&&u.referencePlot[0]!==null&&w==null&&v==null&&u.referencePlot[1]!==void 0)return h(p,u.referencePlot[0],u.referencePlot[1]);if(!u.active&&!d)Te(ro,l={},l),Te(Qe,o.visible=!1,o),A.forEach(R=>{R.classList.remove("selected")});else{w!=null&&v!=null?(Te(Qe,o.x=w,o),Te(Qe,o.y=v,o)):(Te(Qe,o.x=u.x,o),Te(Qe,o.y=u.y,o)),Te(Qe,o.isMineralSource=u.mineralSource,o),Te(Qe,o.visible=!0,o);const R=document.querySelector(`.plot_container[data-id="${u.id}"]`),q=document.documentElement||document.body,F=R.getBoundingClientRect(),E=window.innerHeight||q.clientHeight,I=window.innerWidth||q.clientWidth,N=q.scrollTop+F.top-E/2+225,j=q.scrollLeft+F.left-I/2;window.scrollTo({top:N,left:j,behavior:"smooth"}),A.forEach(C=>{C.classList.remove("selected")}),w!=null&&v!=null?document.querySelector(`.plot_container[data-x="${w}"][data-y="${v}"]`).classList.add("selected"):document.querySelector(`.plot_container[data-id="${u.id}"]`).classList.add("selected")}}}function g(p){r==!1&&(Te($e,i.plots[u.x][u.y].type=p,i),Te(Qe,o.visible=!1,o))}return t.$$set=p=>{"data"in p&&n(0,u=p.data),"classText"in p&&n(1,c=p.classText),"canBeUpgraded"in p&&n(2,d=p.canBeUpgraded)},t.$$.update=()=>{t.$$.dirty&1033&&(u.type>-1&&n(4,f=ie[u.type]),u.disabled==!0&&a.visible==!1&&(En(u.x,u.y,i),n(0,u.disabled=!1,u),Te(Bt,a.visible=!1,a)))},[u,c,d,i,f,o,s,m,h,g,a]}class N4 extends pe{constructor(e){super(),me(this,e,P4,O4,de,{data:0,classText:1,canBeUpgraded:2,changePlotType:9})}get changePlotType(){return this.$$.ctx[9]}}function nf(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function of(t,e,n){const o=t.slice();return o[11]=e[n],o}function rf(t){let e,n,o,i,r,l,a,s,u,f,c,d=t[3],m,h,g=Ke(t[1].plots),p=[];for(let A=0;A<g.length;A+=1)p[A]=sf(nf(t,g,A));const w=A=>S(p[A],1,1,()=>{p[A]=null});a=new Xu({props:{direction:"east"}}),f=new Xu({props:{direction:"south"}});let v=uf(t);return{c(){e=P("div"),n=P("div"),o=P("div"),i=P("div");for(let A=0;A<p.length;A+=1)p[A].c();r=B(),l=P("span"),Y(a.$$.fragment),s=B(),u=P("span"),Y(f.$$.fragment),c=B(),v.c(),m=Fe(),$(i,"class","grid plot_controller svelte-1udphho"),$(o,"class","flex flex-row items-center"),$(n,"style",t[2]),$(n,"id","plotContainerMain"),$(n,"class","items-center h-max flex flex-col pr-80 pb-80  svelte-1udphho"),$(e,"class","flex flex-col")},m(A,R){O(A,e,R),y(e,n),y(n,o),y(o,i);for(let q=0;q<p.length;q+=1)p[q]&&p[q].m(i,null);y(o,r),y(o,l),V(a,l,null),y(n,s),y(n,u),V(f,u,null),O(A,c,R),v.m(A,R),O(A,m,R),h=!0},p(A,R){if(R&3){g=Ke(A[1].plots);let q;for(q=0;q<g.length;q+=1){const F=nf(A,g,q);p[q]?(p[q].p(F,R),k(p[q],1)):(p[q]=sf(F),p[q].c(),k(p[q],1),p[q].m(i,null))}for(Ie(),q=g.length;q<p.length;q+=1)w(q);Me()}(!h||R&4)&&$(n,"style",A[2]),R&8&&de(d,d=A[3])?(Ie(),S(v,1,1,Ce),Me(),v=uf(A),v.c(),k(v,1),v.m(m.parentNode,m)):v.p(A,R)},i(A){if(!h){for(let R=0;R<g.length;R+=1)k(p[R]);k(a.$$.fragment,A),k(f.$$.fragment,A),k(v),h=!0}},o(A){p=p.filter(Boolean);for(let R=0;R<p.length;R+=1)S(p[R]);S(a.$$.fragment,A),S(f.$$.fragment,A),S(v),h=!1},d(A){A&&(M(e),M(c),M(m)),ft(p,A),x(a),x(f),v.d(A)}}}function lf(t){let e,n;return e=new N4({props:{classText:"hexagon",data:t[11],canBeUpgraded:Ii(t[11].x,t[11].y,t[1])}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&2&&(r.data=o[11]),i&2&&(r.canBeUpgraded=Ii(o[11].x,o[11].y,o[1])),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function sf(t){let e,n,o,i,r,l=Ke(t[8]),a=[];for(let u=0;u<l.length;u+=1)a[u]=lf(of(t,l,u));const s=u=>S(a[u],1,1,()=>{a[u]=null});return{c(){e=P("div");for(let u=0;u<a.length;u+=1)a[u].c();n=B(),$(e,"class","row "+(t[10]%2!==0?"odd-row":"")+" svelte-1udphho")},m(u,f){O(u,e,f);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);y(e,n),o=!0,i||(r=te(e,"click",t[0]),i=!0)},p(u,f){if(f&2){l=Ke(u[8]);let c;for(c=0;c<l.length;c+=1){const d=of(u,l,c);a[c]?(a[c].p(d,f),k(a[c],1)):(a[c]=lf(d),a[c].c(),k(a[c],1),a[c].m(e,n))}for(Ie(),c=l.length;c<a.length;c+=1)s(c);Me()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)k(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)S(a[f]);o=!1},d(u){u&&M(e),ft(a,u),i=!1,r()}}}function af(t){let e,n;return e=new fd({props:{x:t[4].x,y:t[4].y,open:t[4].visible}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&16&&(r.x=o[4].x),i&16&&(r.y=o[4].y),i&16&&(r.open=o[4].visible),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function uf(t){let e,n,o=t[4].visible&&af(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,r){i[4].visible?o?(o.p(i,r),r&16&&k(o,1)):(o=af(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}function E4(t){let e,n,o=t[1]!=null&&rf(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,[r]){i[1]!=null?o?(o.p(i,r),r&2&&k(o,1)):(o=rf(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}const Pr="plotsSize";function $4(t,e,n){let o,i,r;le(t,ro,c=>n(3,o=c)),le(t,$e,c=>n(1,i=c)),le(t,Qe,c=>n(4,r=c));let l,a=localStorage.getItem(Pr)?parseInt(localStorage.getItem(Pr)):0,s=["margin-left: 300px; margin-top: 200px; scale: 1;","margin-left: 650px; margin-top: 600px; scale: 1.5;","margin-left: -50px; margin-top: -50px; scale: 0.6;"];document.addEventListener("keypress",function(c){c.key==="z"&&(a==s.length-1?n(5,a=0):n(5,a++,a),localStorage.setItem(Pr,a.toString()))}),document.addEventListener("click",function(c){const d=c.target;(d.dataset.x==null&&d.dataset.type!="-1"&&d.dataset.size!=null||d.id=="plotContainerMain"||d.classList.contains("row")||d.classList.contains("grid"))&&Te(Qe,r.visible=!1,r)});function u(){let c=[];for(let d=0;d<i.plots.length;d++)for(let m=0;m<i.plots.length;m++)Ii(d,m,i)&&i.plots[d][m].active==!1&&c.push(i.plots[d][m])}function f(){Te(ro,o={},o)}return t.$$.update=()=>{t.$$.dirty&2&&i&&u(),t.$$.dirty&32&&n(2,l=s[a])},[f,i,l,o,r,a]}class R4 extends pe{constructor(e){super(),me(this,e,$4,E4,de,{restartModifyPlotMenu:0})}get restartModifyPlotMenu(){return this.$$.ctx[0]}}function ff(t,e,n){const o=t.slice();return o[5]=e[n],o}function cf(t){let e,n;return e=new n1({props:{thumb:t[5],class:"block h-4 w-4  bg-accent focus-visible:outline-none  disabled:pointer-events-none disabled:opacity-50"}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&16&&(r.thumb=o[5]),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function L4(t){let e,n,o,i,r;n=new Jg({props:{class:"absolute h-full bg-primary"}});let l=Ke(t[4]),a=[];for(let u=0;u<l.length;u+=1)a[u]=cf(ff(t,l,u));const s=u=>S(a[u],1,1,()=>{a[u]=null});return{c(){e=P("span"),Y(n.$$.fragment),o=B();for(let u=0;u<a.length;u+=1)a[u].c();i=Fe(),$(e,"class","relative h-2 w-full grow overflow-hidden bg-black")},m(u,f){O(u,e,f),V(n,e,null),O(u,o,f);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(u,f);O(u,i,f),r=!0},p(u,f){if(f&16){l=Ke(u[4]);let c;for(c=0;c<l.length;c+=1){const d=ff(u,l,c);a[c]?(a[c].p(d,f),k(a[c],1)):(a[c]=cf(d),a[c].c(),k(a[c],1),a[c].m(i.parentNode,i))}for(Ie(),c=l.length;c<a.length;c+=1)s(c);Me()}},i(u){if(!r){k(n.$$.fragment,u);for(let f=0;f<l.length;f+=1)k(a[f]);r=!0}},o(u){S(n.$$.fragment,u),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)S(a[f]);r=!1},d(u){u&&(M(e),M(o),M(i)),x(n),ft(a,u)}}}function D4(t){let e,n,o;const i=[{class:We("relative flex w-full touch-none select-none items-center",t[1])},t[2]];function r(a){t[3](a)}let l={$$slots:{default:[L4,({thumbs:a})=>({4:a}),({thumbs:a})=>a?16:0]},$$scope:{ctx:t}};for(let a=0;a<i.length;a+=1)l=Z(l,i[a]);return t[0]!==void 0&&(l.value=t[0]),e=new Vg({props:l}),Re.push(()=>Kt(e,"value",r)),{c(){Y(e.$$.fragment)},m(a,s){V(e,a,s),o=!0},p(a,[s]){const u=s&6?ve(i,[s&2&&{class:We("relative flex w-full touch-none select-none items-center",a[1])},s&4&&at(a[2])]):{};s&272&&(u.$$scope={dirty:s,ctx:a}),!n&&s&1&&(n=!0,u.value=a[0],xt(()=>n=!1)),e.$set(u)},i(a){o||(k(e.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),o=!1},d(a){x(e,a)}}}function F4(t,e,n){const o=["class","value"];let i=ue(e,o),{class:r=void 0}=e,{value:l=[0]}=e;function a(s){l=s,n(0,l)}return t.$$set=s=>{e=Z(Z({},e),je(s)),n(2,i=ue(e,o)),"class"in s&&n(1,r=s.class),"value"in s&&n(0,l=s.value)},[l,r,i,a]}class df extends pe{constructor(e){super(),me(this,e,F4,D4,de,{class:1,value:0})}}function mf(t,e,n){const o=t.slice();return o[14]=e[n],o}function pf(t){let e;return{c(){e=P("p"),e.textContent="No alerts",$(e,"class","text-center text-xs opacity-50 svelte-1m80q9z")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function hf(t){let e,n,o,i=t[14].day+"",r,l,a,s=t[14].message+"",u,f,c;return{c(){e=P("div"),n=P("p"),o=G("DAY "),r=G(i),l=B(),a=P("p"),u=G(s),f=B(),$(n,"class","font-mono text-[10px]  svelte-1m80q9z"),$(a,"class","text-xs svelte-1m80q9z"),$(e,"class",c="px-2 py-2 rounded-2xl fade-in mb-4 "+(t[14].vibe==ot.BAD?"bg-white text-textDanger border ":t[14].vibe==ot.GOOD?"bg-green-300":(t[14].vibe==ot.NORMAL,"bg-accent"))+" svelte-1m80q9z")},m(d,m){O(d,e,m),y(e,n),y(n,o),y(n,r),y(e,l),y(e,a),y(a,u),y(e,f)},p(d,m){m&2&&i!==(i=d[14].day+"")&&ae(r,i),m&2&&s!==(s=d[14].message+"")&&ae(u,s),m&2&&c!==(c="px-2 py-2 rounded-2xl fade-in mb-4 "+(d[14].vibe==ot.BAD?"bg-white text-textDanger border ":d[14].vibe==ot.GOOD?"bg-green-300":(d[14].vibe==ot.NORMAL,"bg-accent"))+" svelte-1m80q9z")&&$(e,"class",c)},d(d){d&&M(e)}}}function j4(t){let e,n,o,i,r,l,a,s,u,f,c,d=st(t[1].economyAndLaws.tax_rate*100,0)+"",m,h,g,p,w,v,A,R,q,F,E=st(t[1].townInfo.productivity,0)+"",I,N,j,C,b,T,D,W,L,U,X,Q,z,ne,oe,Ae,ce,ee,Pe,Ne,_,K,J=t[0]=="true"?"🔇":"🔊",se,we,Oe,De,qe,He,Be,Je;p=new df({props:{value:[t[1].economyAndLaws.tax_rate],onValueChange:t[8],min:0,max:.5,step:.05,class:"cursor-pointer w-[75%]"}}),C=new df({props:{value:[t[1].townInfo.productivity],onValueChange:t[7],min:0,max:200,step:5,class:"cursor-pointer w-[75%]"}}),U=new Ht({props:{text:t[3]?"Select an active plot!":"👑 Set your location (boost)",onOpen:t[9]}}),Q=new Ht({props:{text:"🧠 Sell Knowledge",onOpen:t[10]}}),ne=new Ht({props:{text:"🏢 Manage City",onOpen:t[11]}}),Ae=new Ht({props:{text:t[1].lab.active_experiment!==null?`${t[1].lab.active_experiment.duration}`:"🧪 Manage Lab",onOpen:t[6],opacity:Ge("lab",t[1]).length>=1?100:30,onHoverText:Ge("lab",t[1]).length>=1?"":"Build a Lab to perform experiments. Experiments can save lives, make money, or generally improve your town."}});let Ue=t[1].townLog.length==0&&pf(),Se=Ke(t[1].townLog),Ee=[];for(let Le=0;Le<Se.length;Le+=1)Ee[Le]=hf(mf(t,Se,Le));return{c(){e=P("div"),n=P("div"),o=P("div"),i=P("div"),r=P("div"),l=P("div"),a=P("h1"),a.textContent="Laws",s=B(),u=P("span"),u.textContent="Tax Rate",f=B(),c=P("span"),m=G(d),h=G("%"),g=B(),Y(p.$$.fragment),w=B(),v=P("div"),A=P("div"),R=P("span"),R.textContent="Productivity",q=B(),F=P("span"),I=G(E),N=G("%"),j=B(),Y(C.$$.fragment),b=B(),T=P("div"),D=P("h1"),D.textContent="Menus",W=B(),L=P("div"),Y(U.$$.fragment),X=B(),Y(Q.$$.fragment),z=B(),Y(ne.$$.fragment),oe=B(),Y(Ae.$$.fragment),ce=B(),ee=P("div"),Pe=P("div"),Ne=P("h3"),Ne.innerHTML='<h1 class="text-lg w-full text-center svelte-1m80q9z">Alerts</h1>',_=B(),K=P("button"),se=G(J),we=B(),Oe=P("div"),Ue&&Ue.c(),De=B();for(let Le=0;Le<Ee.length;Le+=1)Ee[Le].c();$(a,"class","text-lg w-full text-center pb-2 svelte-1m80q9z"),$(u,"class","text-sm svelte-1m80q9z"),$(c,"class","text-sm svelte-1m80q9z"),$(l,"class","mb-1 svelte-1m80q9z"),$(r,"class","flex flex-col justify-center w-full text-center items-center gap-1 min-h-12 pb-2 rounded-xl svelte-1m80q9z"),$(R,"class","text-sm svelte-1m80q9z"),$(F,"class","text-sm svelte-1m80q9z"),$(A,"class","mb-1 svelte-1m80q9z"),$(v,"class","flex flex-col justify-center w-full text-center items-center gap-2 svelte-1m80q9z"),$(i,"class","flex flex-col gap-2 rounded-xl text-center justify-center mb-2 mt-0 pt-2 svelte-1m80q9z"),$(D,"class","text-lg w-full text-center pb-2 svelte-1m80q9z"),$(L,"class","flex flex-col gap-2 svelte-1m80q9z"),$(T,"class","svelte-1m80q9z"),$(Ne,"class","text-md cursor-pointer  svelte-1m80q9z"),$(K,"class","svelte-1m80q9z"),$(Pe,"class","flex flex-row gap-2 items-start justify-center pb-2 svelte-1m80q9z"),$(Oe,"class","overflow-y-scroll h-[100%] w-[100%] pb-4 scroll-smooth svelte-1m80q9z"),$(ee,"class","svelte-1m80q9z"),$(o,"class","flex flex-col justify-center mx-2 gap-8 svelte-1m80q9z"),$(n,"class","w-[220px] text-sidebarText bg-sidebarBackground overflow-scroll border-foregroundDark border-4 bottom-4 z-10 fixed left-3 py-2 top-[190px] drop-shadow-xl rounded-xl transition-all duration-300 svelte-1m80q9z"),$(e,"class",qe="flex flex-row text-sidebarText bg-sidebarBackground overflow-clip "+(t[2].visible?"opacity-10":"")+" svelte-1m80q9z")},m(Le,ze){O(Le,e,ze),y(e,n),y(n,o),y(o,i),y(i,r),y(r,l),y(l,a),y(l,s),y(l,u),y(l,f),y(l,c),y(c,m),y(c,h),y(r,g),V(p,r,null),y(i,w),y(i,v),y(v,A),y(A,R),y(A,q),y(A,F),y(F,I),y(F,N),y(v,j),V(C,v,null),y(o,b),y(o,T),y(T,D),y(T,W),y(T,L),V(U,L,null),y(L,X),V(Q,L,null),y(L,z),V(ne,L,null),y(L,oe),V(Ae,L,null),y(o,ce),y(o,ee),y(ee,Pe),y(Pe,Ne),y(Pe,_),y(Pe,K),y(K,se),y(ee,we),y(ee,Oe),Ue&&Ue.m(Oe,null),y(Oe,De);for(let lt=0;lt<Ee.length;lt+=1)Ee[lt]&&Ee[lt].m(Oe,null);He=!0,Be||(Je=[te(Ne,"click",t[12]),te(K,"click",t[13])],Be=!0)},p(Le,[ze]){(!He||ze&2)&&d!==(d=st(Le[1].economyAndLaws.tax_rate*100,0)+"")&&ae(m,d);const lt={};ze&2&&(lt.value=[Le[1].economyAndLaws.tax_rate]),p.$set(lt),(!He||ze&2)&&E!==(E=st(Le[1].townInfo.productivity,0)+"")&&ae(I,E);const rt={};ze&2&&(rt.value=[Le[1].townInfo.productivity]),C.$set(rt);const ye={};ze&8&&(ye.text=Le[3]?"Select an active plot!":"👑 Set your location (boost)"),ze&8&&(ye.onOpen=Le[9]),U.$set(ye);const Ze={};ze&16&&(Ze.onOpen=Le[10]),Q.$set(Ze);const H={};ze&32&&(H.onOpen=Le[11]),ne.$set(H);const ni={};if(ze&2&&(ni.text=Le[1].lab.active_experiment!==null?`${Le[1].lab.active_experiment.duration}`:"🧪 Manage Lab"),ze&2&&(ni.opacity=Ge("lab",Le[1]).length>=1?100:30),ze&2&&(ni.onHoverText=Ge("lab",Le[1]).length>=1?"":"Build a Lab to perform experiments. Experiments can save lives, make money, or generally improve your town."),Ae.$set(ni),(!He||ze&1)&&J!==(J=Le[0]=="true"?"🔇":"🔊")&&ae(se,J),Le[1].townLog.length==0?Ue||(Ue=pf(),Ue.c(),Ue.m(Oe,De)):Ue&&(Ue.d(1),Ue=null),ze&2){Se=Ke(Le[1].townLog);let Pt;for(Pt=0;Pt<Se.length;Pt+=1){const Rl=mf(Le,Se,Pt);Ee[Pt]?Ee[Pt].p(Rl,ze):(Ee[Pt]=hf(Rl),Ee[Pt].c(),Ee[Pt].m(Oe,null))}for(;Pt<Ee.length;Pt+=1)Ee[Pt].d(1);Ee.length=Se.length}(!He||ze&4&&qe!==(qe="flex flex-row text-sidebarText bg-sidebarBackground overflow-clip "+(Le[2].visible?"opacity-10":"")+" svelte-1m80q9z"))&&$(e,"class",qe)},i(Le){He||(k(p.$$.fragment,Le),k(C.$$.fragment,Le),k(U.$$.fragment,Le),k(Q.$$.fragment,Le),k(ne.$$.fragment,Le),k(Ae.$$.fragment,Le),He=!0)},o(Le){S(p.$$.fragment,Le),S(C.$$.fragment,Le),S(U.$$.fragment,Le),S(Q.$$.fragment,Le),S(ne.$$.fragment,Le),S(Ae.$$.fragment,Le),He=!1},d(Le){Le&&M(e),x(p),x(C),x(U),x(Q),x(ne),x(Ae),Ue&&Ue.d(),ft(Ee,Le),Be=!1,Ye(Je)}}}function q4(t,e,n){let o,i,r,l,a;le(t,$e,w=>n(1,o=w)),le(t,Qe,w=>n(2,i=w)),le(t,so,w=>n(3,r=w)),le(t,lo,w=>n(4,l=w)),le(t,ao,w=>n(5,a=w));let s=localStorage.getItem("mute")||"false";function u(){o.hasLab&&zn.set(!0)}function f(w){let v=o;v.townInfo.productivity=st(w[0],2),$e.set(v),localStorage.setItem(_t,JSON.stringify(v))}function c(w){let v=o;v.economyAndLaws.tax_rate=st(w[0],2),$e.set(v),localStorage.setItem(_t,JSON.stringify(v))}const d=function(){Te(so,r=!r,r)},m=function(){Te(lo,l=!l,l)},h=function(){Te(ao,a=!a,a)},g=()=>{Te($e,o.townLog=[],o)},p=()=>{localStorage.setItem("mute",s=="false"?"true":s==="true"?"false":"true"),n(0,s=localStorage.getItem("mute")||"false")};return n(0,s=localStorage.getItem("mute")||"false"),[s,o,i,r,l,a,u,f,c,d,m,h,g,p]}class B4 extends pe{constructor(e){super(),me(this,e,q4,j4,de,{})}}function H4(t){let e,n,o,i,r,l,a,s,u,f,c,d,m;return o=new y3({}),l=new B4({}),s=new R4({}),f=new ad({}),d=new fd({}),{c(){e=P("div"),n=P("div"),Y(o.$$.fragment),i=B(),r=P("div"),Y(l.$$.fragment),a=B(),Y(s.$$.fragment),u=B(),Y(f.$$.fragment),c=B(),Y(d.$$.fragment),$(r,"class","flex flex-row text-accentText"),$(e,"class","flex flex-col max-h-[100%] justify-between")},m(h,g){O(h,e,g),y(e,n),V(o,n,null),y(e,i),y(e,r),V(l,r,null),y(r,a),V(s,r,null),y(r,u),V(f,r,null),y(r,c),V(d,r,null),m=!0},p:Ce,i(h){m||(k(o.$$.fragment,h),k(l.$$.fragment,h),k(s.$$.fragment,h),k(f.$$.fragment,h),k(d.$$.fragment,h),m=!0)},o(h){S(o.$$.fragment,h),S(l.$$.fragment,h),S(s.$$.fragment,h),S(f.$$.fragment,h),S(d.$$.fragment,h),m=!1},d(h){h&&M(e),x(o),x(l),x(s),x(f),x(d)}}}class G4 extends pe{constructor(e){super(),me(this,e,null,H4,de,{})}}function W4(t){let e=t[1].townInfo.name+"",n;return{c(){n=G(e)},m(o,i){O(o,n,i)},p(o,i){i&2&&e!==(e=o[1].townInfo.name+"")&&ae(n,e)},d(o){o&&M(n)}}}function V4(t){let e,n,o,i=t[1].townInfo.name+"",r,l,a,s;return{c(){e=P("span"),n=G("The town of "),o=P("span"),r=G(i),l=G(` has been
          founded!`),a=B(),s=P("span"),s.textContent="Start by building some homes, some farms, and a tree farm.",$(o,"class","text-accent")},m(u,f){O(u,e,f),y(e,n),y(e,o),y(o,r),y(e,l),O(u,a,f),O(u,s,f)},p(u,f){f&2&&i!==(i=u[1].townInfo.name+"")&&ae(r,i)},d(u){u&&(M(e),M(a),M(s))}}}function x4(t){let e,n,o,i;return e=new sn({props:{class:"text-xl font-semibold text-center",$$slots:{default:[W4]},$$scope:{ctx:t}}}),o=new Gn({props:{class:"text-center mt-2 text-sm text-sidebarText/80 flex flex-col gap-2",$$slots:{default:[V4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&18&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&18&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function Y4(t){let e,n,o;return{c(){e=P("button"),e.textContent="Begin",$(e,"class","bg-accent hover:bg-accent/80 text-white px-4 py-2 rounded-md transition-colors")},m(i,r){O(i,e,r),n||(o=te(e,"click",t[2]),n=!0)},p:Ce,d(i){i&&M(e),n=!1,o()}}}function U4(t){let e,n,o,i;return e=new an({props:{$$slots:{default:[x4]},$$scope:{ctx:t}}}),o=new Cn({props:{class:"mt-4 flex justify-center",$$slots:{default:[Y4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&18&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const s={};l&17&&(s.$$scope={dirty:l,ctx:r}),o.$set(s)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function K4(t){let e,n;return e=new un({props:{transition:_o,class:"bg-sidebarBackground text-sidebarText max-w-md rounded-md shadow-xl border border-accent p-4",$$slots:{default:[U4]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&19&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function X4(t){let e,n,o;function i(l){t[3](l)}let r={$$slots:{default:[K4]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.open=t[0]),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&19&&(s.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,s.open=l[0],xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function J4(t,e,n){let o,i;le(t,_i,a=>n(0,o=a)),le(t,$e,a=>n(1,i=a));const r=()=>Te(_i,o=!1,o);function l(a){o=a,_i.set(o)}return[o,i,r,l]}class Z4 extends pe{constructor(e){super(),me(this,e,J4,X4,de,{})}}function _f(t,e,n){const o=t.slice();return o[7]=e[n],o}function Q4(t){let e,n,o=t[0].townInfo.name+"",i,r,l,a,s=t[0].resources.bureaucracy+"",u;return{c(){e=P("div"),n=P("span"),i=G(o),r=B(),l=P("span"),a=G("🧑‍⚖️ "),u=G(s),$(e,"class","flex justify-between mr-10")},m(f,c){O(f,e,c),y(e,n),y(n,i),y(e,r),y(e,l),y(l,a),y(l,u)},p(f,c){c&1&&o!==(o=f[0].townInfo.name+"")&&ae(i,o),c&1&&s!==(s=f[0].resources.bureaucracy+"")&&ae(u,s)},d(f){f&&M(e)}}}function gf(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h,g=t[0].townInfo.guardians+"",p,w,v,A,R,q=t[0].townInfo.population_count-t[0].townInfo.employees+"",F,E,I;return e=new It({props:{class:"mb-4"}}),d=new Mt({props:{class:`bg-accent rounded-2xl h-min select-none
            `+(t[0].townInfo.guardians<=0?"opacity-50 cursor-not-allowed":"")+`
            `,$$slots:{default:[z4]},$$scope:{ctx:t}}}),d.$on("click",t[2]),v=new Mt({props:{class:`bg-accent rounded-2xl h-min select-none
            
              `+(t[0].townInfo.employees>=t[0].townInfo.population_count?"opacity-50 cursor-not-allowed":"")+`
            `,$$slots:{default:[eC]},$$scope:{ctx:t}}}),v.$on("click",t[3]),{c(){Y(e.$$.fragment),n=B(),o=P("div"),i=P("span"),i.textContent="Hire Guardians ⚔️",r=B(),l=P("br"),a=B(),s=P("span"),s.textContent=`Guardians work for you and are required to expand your kingdom.
            They do not generate revenue, but still require housing & food.`,u=B(),f=P("div"),c=P("div"),Y(d.$$.fragment),m=B(),h=P("span"),p=G(g),w=B(),Y(v.$$.fragment),A=B(),R=P("span"),F=G(q),E=G(`
              unemployed available for hire.`),$(i,"class","text-lg font-bold"),$(s,"class","text-sm"),$(h,"class","text-lg font-bold select-none px-2"),$(R,"class","w-max"),$(f,"class","flex flex-row justify-between align-middle items-center pt-2 pb-2 gap-2 "),$(o,"class","w-full")},m(N,j){V(e,N,j),O(N,n,j),O(N,o,j),y(o,i),y(o,r),y(o,l),y(o,a),y(o,s),y(o,u),y(o,f),y(f,c),V(d,c,null),y(c,m),y(c,h),y(h,p),y(c,w),V(v,c,null),y(f,A),y(f,R),y(R,F),y(R,E),I=!0},p(N,j){const C={};j&1&&(C.class=`bg-accent rounded-2xl h-min select-none
            `+(N[0].townInfo.guardians<=0?"opacity-50 cursor-not-allowed":"")+`
            `),j&1024&&(C.$$scope={dirty:j,ctx:N}),d.$set(C),(!I||j&1)&&g!==(g=N[0].townInfo.guardians+"")&&ae(p,g);const b={};j&1&&(b.class=`bg-accent rounded-2xl h-min select-none
            
              `+(N[0].townInfo.employees>=N[0].townInfo.population_count?"opacity-50 cursor-not-allowed":"")+`
            `),j&1024&&(b.$$scope={dirty:j,ctx:N}),v.$set(b),(!I||j&1)&&q!==(q=N[0].townInfo.population_count-N[0].townInfo.employees+"")&&ae(F,q)},i(N){I||(k(e.$$.fragment,N),k(d.$$.fragment,N),k(v.$$.fragment,N),I=!0)},o(N){S(e.$$.fragment,N),S(d.$$.fragment,N),S(v.$$.fragment,N),I=!1},d(N){N&&(M(n),M(o)),x(e,N),x(d),x(v)}}}function z4(t){let e;return{c(){e=G("-")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function eC(t){let e;return{c(){e=G("+")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function tC(t){let e;return{c(){e=G("Build a City Hall to manage your city.")},m(n,o){O(n,e,o)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}function nC(t){let e,n,o,i,r=Ke(jr),l=[];for(let s=0;s<r.length;s+=1)l[s]=bf(_f(t,r,s));const a=s=>S(l[s],1,1,()=>{l[s]=null});return{c(){e=P("span"),e.textContent="Laws 🧑‍⚖️",n=B();for(let s=0;s<l.length;s+=1)l[s].c();o=Fe(),$(e,"class","text-lg font-bold")},m(s,u){O(s,e,u),O(s,n,u);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,u);O(s,o,u),i=!0},p(s,u){if(u&1){r=Ke(jr);let f;for(f=0;f<r.length;f+=1){const c=_f(s,r,f);l[f]?(l[f].p(c,u),k(l[f],1)):(l[f]=bf(c),l[f].c(),k(l[f],1),l[f].m(o.parentNode,o))}for(Ie(),f=r.length;f<l.length;f+=1)a(f);Me()}},i(s){if(!i){for(let u=0;u<r.length;u+=1)k(l[u]);i=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)S(l[u]);i=!1},d(s){s&&(M(e),M(n),M(o)),ft(l,s)}}}function oC(t){let e,n=t[7].cost+"",o;return{c(){e=G("Enact for 🧑‍⚖️ "),o=G(n)},m(i,r){O(i,e,r),O(i,o,r)},d(i){i&&(M(e),M(o))}}}function iC(t){let e;return{c(){e=G("Repeal ❌")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function rC(t){let e,n;function o(l,a){return a&1&&(e=null),e==null&&(e=!!l[0].economyAndLaws.enacted.includes(l[7].id)),e?iC:oC}let i=o(t,-1),r=i(t);return{c(){r.c(),n=Fe()},m(l,a){r.m(l,a),O(l,n,a)},p(l,a){i!==(i=o(l,a))&&(r.d(1),r=i(l),r&&(r.c(),r.m(n.parentNode,n)))},d(l){l&&M(n),r.d(l)}}}function bf(t){let e,n,o,i,r,l,a;function s(){return t[4](t[7])}return i=new Mt({props:{class:`bg-accent rounded-2xl 
                `+(t[0].economyAndLaws.enacted.includes(t[7].id)?"bg-textDanger":"bg-accent")+`

                `+(t[0].economyAndLaws.enacted.includes(t[7].id)||t[7].cost<=t[0].resources.bureaucracy?"cursor-pointer":"cursor-not-allowed opacity-30")+`
                `,$$slots:{default:[rC]},$$scope:{ctx:t}}}),i.$on("click",s),l=new It({props:{class:"bg-white opacity-30"}}),{c(){e=P("div"),n=P("span"),n.textContent=`${t[7].description}`,o=B(),Y(i.$$.fragment),r=B(),Y(l.$$.fragment),$(n,"class","text-sm"),$(e,"class","flex justify-between align-middle items-center pt-2 pb-2 gap-2 ")},m(u,f){O(u,e,f),y(e,n),y(e,o),V(i,e,null),O(u,r,f),V(l,u,f),a=!0},p(u,f){t=u;const c={};f&1&&(c.class=`bg-accent rounded-2xl 
                `+(t[0].economyAndLaws.enacted.includes(t[7].id)?"bg-textDanger":"bg-accent")+`

                `+(t[0].economyAndLaws.enacted.includes(t[7].id)||t[7].cost<=t[0].resources.bureaucracy?"cursor-pointer":"cursor-not-allowed opacity-30")+`
                `),f&1025&&(c.$$scope={dirty:f,ctx:t}),i.$set(c)},i(u){a||(k(i.$$.fragment,u),k(l.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),S(l.$$.fragment,u),a=!1},d(u){u&&(M(e),M(r)),x(i),x(l,u)}}}function lC(t){let e,n,o,i,r=Ge("city_hall",t[0]).length>0,l,a,s,u,f,c,d,m;e=new sn({props:{class:"text-lg",$$slots:{default:[Q4]},$$scope:{ctx:t}}}),o=new Gn({props:{class:"w-full "}});let h=r&&gf(t);a=new It({props:{class:"mb-4"}});const g=[nC,tC],p=[];function w(v,A){return A&1&&(f=null),f==null&&(f=Ge("city_hall",v[0]).length>0),f?0:1}return c=w(t,-1),d=p[c]=g[c](t),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment),i=B(),h&&h.c(),l=B(),Y(a.$$.fragment),s=B(),u=P("div"),d.c(),$(u,"class","w-full")},m(v,A){V(e,v,A),O(v,n,A),V(o,v,A),O(v,i,A),h&&h.m(v,A),O(v,l,A),V(a,v,A),O(v,s,A),O(v,u,A),p[c].m(u,null),m=!0},p(v,A){const R={};A&1025&&(R.$$scope={dirty:A,ctx:v}),e.$set(R),A&1&&(r=Ge("city_hall",v[0]).length>0),r?h?(h.p(v,A),A&1&&k(h,1)):(h=gf(v),h.c(),k(h,1),h.m(l.parentNode,l)):h&&(Ie(),S(h,1,1,()=>{h=null}),Me());let q=c;c=w(v,A),c===q?p[c].p(v,A):(Ie(),S(p[q],1,1,()=>{p[q]=null}),Me(),d=p[c],d?d.p(v,A):(d=p[c]=g[c](v),d.c()),k(d,1),d.m(u,null))},i(v){m||(k(e.$$.fragment,v),k(o.$$.fragment,v),k(h),k(a.$$.fragment,v),k(d),m=!0)},o(v){S(e.$$.fragment,v),S(o.$$.fragment,v),S(h),S(a.$$.fragment,v),S(d),m=!1},d(v){v&&(M(n),M(i),M(l),M(s),M(u)),x(e,v),x(o,v),h&&h.d(v),x(a,v),p[c].d()}}}function sC(t){let e,n,o,i;return e=new an({props:{$$slots:{default:[lC]},$$scope:{ctx:t}}}),o=new Cn({}),{c(){Y(e.$$.fragment),n=B(),Y(o.$$.fragment)},m(r,l){V(e,r,l),O(r,n,l),V(o,r,l),i=!0},p(r,l){const a={};l&1025&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){i||(k(e.$$.fragment,r),k(o.$$.fragment,r),i=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),i=!1},d(r){r&&M(n),x(e,r),x(o,r)}}}function aC(t){let e,n;return e=new un({props:{class:"bg-foreground text-accentText h-[80vh] w-full scroll",$$slots:{default:[sC]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&1025&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function uC(t){let e,n,o;function i(l){t[5](l)}let r={$$slots:{default:[aC]},$$scope:{ctx:t}};return t[1]!==void 0&&(r.open=t[1]),e=new fn({props:r}),Re.push(()=>Kt(e,"open",i)),{c(){Y(e.$$.fragment)},m(l,a){V(e,l,a),o=!0},p(l,[a]){const s={};a&1025&&(s.$$scope={dirty:a,ctx:l}),!n&&a&2&&(n=!0,s.open=l[1],xt(()=>n=!1)),e.$set(s)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),o=!1},d(l){x(e,l)}}}function fC(t,e,n){let o,i;le(t,$e,u=>n(0,o=u)),le(t,ao,u=>n(1,i=u));const r=()=>{o.townInfo.guardians>0?(Te($e,o.townInfo.guardians-=1,o),Te($e,o.townInfo.employees-=1,o)):St.set("No guardians to fire.")},l=()=>{o.townInfo.employees<o.townInfo.population_count?(Te($e,o.townInfo.guardians+=1,o),Te($e,o.townInfo.employees+=1,o)):St.set("Not enough people.")},a=u=>{o.economyAndLaws.enacted.includes(u.id)?o.economyAndLaws.enacted.splice(o.economyAndLaws.enacted.indexOf(u.id),1):u.cost<=o.resources.bureaucracy?(Te($e,o.resources.bureaucracy-=u.cost,o),o.economyAndLaws.enacted.push(u.id)):St.set("Not enough bureaucracy!")};function s(u){i=u,ao.set(i)}return t.$$.update=()=>{t.$$.dirty&1},[o,i,r,l,a,s]}class cC extends pe{constructor(e){super(),me(this,e,fC,uC,de,{})}}function dC(t){let e;return{c(){e=G("Got it")},m(n,o){O(n,e,o)},d(n){n&&M(e)}}}function mC(t){let e,n,o,i,r,l,a,s;return r=new Sc({props:{class:"bg-accent hover:scale-105 min-w-[70%] transition-all duration-150 mt-2",$$slots:{default:[dC]},$$scope:{ctx:t}}}),r.$on("click",t[1]),a=new kl({}),{c(){e=P("span"),n=G("🛎️ "),o=new Qt(!1),i=B(),Y(r.$$.fragment),l=B(),Y(a.$$.fragment),o.a=null,$(e,"class","whitespace-pre-wrap overflow-scroll text-center sm:whitespace-normal break-all sm:text-md sm:font-semibold sm:py-4 sm:items-center sm:justify-center"),tt(e,"max-height","80%")},m(u,f){O(u,e,f),y(e,n),o.m(t[0],e),O(u,i,f),V(r,u,f),O(u,l,f),V(a,u,f),s=!0},p(u,f){(!s||f&1)&&o.p(u[0]);const c={};f&4&&(c.$$scope={dirty:f,ctx:u}),r.$set(c)},i(u){s||(k(r.$$.fragment,u),k(a.$$.fragment,u),s=!0)},o(u){S(r.$$.fragment,u),S(a.$$.fragment,u),s=!1},d(u){u&&(M(e),M(i),M(l)),x(r,u),x(a,u)}}}function pC(t){let e,n;return e=new Cl({props:{class:`bg-foregroundDark text-white rounded-input shadow-3xl justify-center items-center flex flex-col py-2 text-lg font-semibold p-2 min-w-96 min-h-36
         sm:rounded-2xl sm:flex sm:flex-col sm:p-6 sm:text-md sm:font-semibold sm:py-4 sm:items-center sm:justify-center max-h-[50vh]

         `,$$slots:{default:[mC]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){const r={};i&5&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function hC(t){let e,n;return e=new Tl({props:{open:t[0]!="",$$slots:{default:[pC]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,[i]){const r={};i&1&&(r.open=o[0]!=""),i&5&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function _C(t,e,n){let o;return le(t,St,r=>n(0,o=r)),[o,()=>{St.set("")}]}class gC extends pe{constructor(e){super(),me(this,e,_C,hC,de,{})}}function yf(t){let e,n,o,i;const r=[yC,bC],l=[];function a(s,u){return s[0]==null?0:1}return e=a(t),n=l[e]=r[e](t),{c(){n.c(),o=Fe()},m(s,u){l[e].m(s,u),O(s,o,u),i=!0},p(s,u){let f=e;e=a(s),e===f?l[e].p(s,u):(Ie(),S(l[f],1,1,()=>{l[f]=null}),Me(),n=l[e],n?n.p(s,u):(n=l[e]=r[e](s),n.c()),k(n,1),n.m(o.parentNode,o))},i(s){i||(k(n),i=!0)},o(s){S(n),i=!1},d(s){s&&M(o),l[e].d(s)}}}function bC(t){let e,n,o,i,r,l,a,s,u,f,c,d,m,h,g,p,w,v,A,R,q,F=t[2]==!0&&vf();n=new G4({}),i=new qm({}),l=new Yy({}),s=new kv({}),f=new K5({}),d=new _3({}),h=new cC({}),p=new gC({}),v=new Ly({});let E=t[0].environment.day==0&&t[3]&&wf();return{c(){F&&F.c(),e=B(),Y(n.$$.fragment),o=B(),Y(i.$$.fragment),r=B(),Y(l.$$.fragment),a=B(),Y(s.$$.fragment),u=B(),Y(f.$$.fragment),c=B(),Y(d.$$.fragment),m=B(),Y(h.$$.fragment),g=B(),Y(p.$$.fragment),w=B(),Y(v.$$.fragment),A=B(),E&&E.c(),R=Fe()},m(I,N){F&&F.m(I,N),O(I,e,N),V(n,I,N),O(I,o,N),V(i,I,N),O(I,r,N),V(l,I,N),O(I,a,N),V(s,I,N),O(I,u,N),V(f,I,N),O(I,c,N),V(d,I,N),O(I,m,N),V(h,I,N),O(I,g,N),V(p,I,N),O(I,w,N),V(v,I,N),O(I,A,N),E&&E.m(I,N),O(I,R,N),q=!0},p(I,N){I[2]==!0?F?N&4&&k(F,1):(F=vf(),F.c(),k(F,1),F.m(e.parentNode,e)):F&&(Ie(),S(F,1,1,()=>{F=null}),Me()),I[0].environment.day==0&&I[3]?E?N&9&&k(E,1):(E=wf(),E.c(),k(E,1),E.m(R.parentNode,R)):E&&(Ie(),S(E,1,1,()=>{E=null}),Me())},i(I){q||(k(F),k(n.$$.fragment,I),k(i.$$.fragment,I),k(l.$$.fragment,I),k(s.$$.fragment,I),k(f.$$.fragment,I),k(d.$$.fragment,I),k(h.$$.fragment,I),k(p.$$.fragment,I),k(v.$$.fragment,I),k(E),q=!0)},o(I){S(F),S(n.$$.fragment,I),S(i.$$.fragment,I),S(l.$$.fragment,I),S(s.$$.fragment,I),S(f.$$.fragment,I),S(d.$$.fragment,I),S(h.$$.fragment,I),S(p.$$.fragment,I),S(v.$$.fragment,I),S(E),q=!1},d(I){I&&(M(e),M(o),M(r),M(a),M(u),M(c),M(m),M(g),M(w),M(A),M(R)),F&&F.d(I),x(n,I),x(i,I),x(l,I),x(s,I),x(f,I),x(d,I),x(h,I),x(p,I),x(v,I),E&&E.d(I)}}}function yC(t){let e,n;return e=new mv({}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p:Ce,i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function vf(t){let e,n;return e=new Sy({}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function wf(t){let e,n;return e=new Z4({}),{c(){Y(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){x(e,o)}}}function vC(t){let e,n,o=(t[1]||t[0]==null)&&yf(t);return{c(){o&&o.c(),e=Fe()},m(i,r){o&&o.m(i,r),O(i,e,r),n=!0},p(i,[r]){i[1]||i[0]==null?o?(o.p(i,r),r&3&&k(o,1)):(o=yf(i),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Ie(),S(o,1,1,()=>{o=null}),Me())},i(i){n||(k(o),n=!0)},o(i){S(o),n=!1},d(i){i&&M(e),o&&o.d(i)}}}const wC=1e-4;function kC(t,e,n){return{r:Math.round(t.r+(e.r-t.r)*n),g:Math.round(t.g+(e.g-t.g)*n),b:Math.round(t.b+(e.b-t.b)*n)}}function CC(t,e,n){let o,i,r,l,a,s,u,f,c,d,m,h;le(t,ro,E=>n(10,o=E)),le(t,Qe,E=>n(11,i=E)),le(t,Et,E=>n(2,r=E)),le(t,$e,E=>n(0,l=E)),le(t,so,E=>n(5,a=E)),le(t,Bt,E=>n(12,s=E)),le(t,Oi,E=>n(13,u=E)),le(t,ao,E=>n(14,f=E)),le(t,zn,E=>n(15,c=E)),le(t,lo,E=>n(16,d=E)),le(t,qo,E=>n(17,m=E)),le(t,_i,E=>n(3,h=E));let g=!1;Dy();let p=!1;const w=[{r:85,g:60,b:40},{r:115,g:85,b:55},{r:70,g:100,b:50},{r:120,g:65,b:50}];let v=0,A=1,R=0;function q(){const E=kC(w[v],w[A],R);document.body.style.backgroundColor=`rgb(${E.r}, ${E.g}, ${E.b})`,R+=wC,R>=1&&(R=0,v=A,A=(A+1)%w.length),requestAnimationFrame(q)}q(),document.addEventListener("keydown",E=>{if((document.activeElement!=null&&document.activeElement.nodeName==="INPUT"||document.activeElement!=null&&document.activeElement.nodeName=="TEXTAREA")&&E.key!=="Escape")return;switch(E.key.toLowerCase()){case"p":case"escape":if(d){Te(lo,d=!1,d);break}if(c){Te(zn,c=!1,c);break}if(f){Te(ao,f=!1,f);break}if(u){Te(Oi,u=!1,u);break}if(i.visible){Te(Qe,i.visible=!1,i);break}if(s.visible){const N=l.plots[s.x][s.y];N.active=!1,N.type=-1,N.disabled=!1,Te(Bt,s.visible=!1,s);break}if(a){so.set(!1),document.querySelectorAll(".plot_container").forEach(j=>{j.style.cursor=""});break}Et.set(!r),r&&Te(Qe,i.visible=!1,i);break}});function F(E,I,N){if(p==!0)switch(N){case"up":I-=2;break;case"down":I+=1;break;case"left":E-=2;break;case"right":E+=1;break}E<0?E=0:E>l.plots.length&&(E=l.plots.length),I<0?I=0:I>l.plots.length&&(I=l.plots.length);let j=document.querySelectorAll(".plot_container"),C;if(j.forEach(b=>{b.dataset.x=="$x"&&b.dataset.y=="$y"&&(C=b)}),r==!1){if(C.dataset.canBeUpgraded==="true"?Te(Qe,i.visible=!0,i):Te(Qe,i.visible=!1,i),C.dataset.refPlotX!==void 0&&C.dataset.refPlotY!=""?(p=!0,j.forEach(b=>{b.dataset.x==C.dataset.refPlotX&&b.dataset.y==C.dataset.refPlotY&&(C=b,E=parseInt(C.dataset.x),I=parseInt(C.dataset.y))})):p=!1,C.dataset.size!=="1"&&C.dataset.size!==void 0&&(p=!0),Te(Qe,i.x=E,i),Te(Qe,i.y=I,i),j.forEach(b=>{b.classList.remove("selected"),b.style.fontWeight=""}),C.classList.add("selected"),p){let b="4px solid #00800045";C.classList.remove("selected"),C.style.borderTop=b,C.style.borderLeft=b,C.style.fontWeight="600",j.forEach(T=>{const D=parseInt(`${T.dataset.x}`),W=parseInt(`${T.dataset.y}`);D==E+1&&W==I&&(T.style.borderLeft=b,T.style.borderBottom=b),D==E&&W==I+1&&(T.style.borderTop=b,T.style.borderRight=b),D==E+1&&W==I+1&&(T.style.borderBottom=b,T.style.borderRight=b)})}C.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),Te(ro,o={},o)}}return t.$$.update=()=>{t.$$.dirty&33&&(l?(Te(qo,m.visible=!1,m),n(1,g=!0),a==!0&&document.querySelectorAll(".plot_container").forEach(I=>{I.dataset.canbeupgraded=="true"&&(I.style.cursor="pointer",I.style.cursor="url('https://github.com/josephrcox/plots/raw/main/public/liege_place.cur'), auto")})):(Te(qo,m.visible=!0,m),n(1,g=!1)))},[l,g,r,h,F,a]}class TC extends pe{constructor(e){super(),me(this,e,CC,vC,de,{openPlotMenu:4})}get openPlotMenu(){return this.$$.ctx[4]}}new TC({target:document.getElementById("app")});
